{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/vscube/index.vue?5aa1","webpack:///./src/components/v4showCase.vue?65dc","webpack:///./src/App.vue?b215","webpack:///./src/components/statistic.vue?5a96","webpack:///./src/components/statistic.vue?00ed","webpack:///./src/components/statistic.vue?004f","webpack:///./src/components/statistic.vue","webpack:///./src/components/sponsor.vue?41ef","webpack:///./src/components/sponsor.vue?8fc2","webpack:///./src/components/sponsor.vue?8cc9","webpack:///./src/components/sponsor.vue","webpack:///./src/components/hot.vue?cdbe","webpack:///./src/components/hot.vue?431c","webpack:///./src/components/hot.vue?44ce","webpack:///./src/components/hot.vue","webpack:///./src/components/account/index.vue?a9f4","webpack:///./src/components/account/index.vue?671e","webpack:///./src/components/account/index.vue?f313","webpack:///./src/components/account/index.vue","webpack:///./src/components/vscube/index.vue?06a8","webpack:///./src/plugins/v4/cuber/define.ts","webpack:///./src/components/vscube/index.vue?83c5","webpack:///./src/components/vscube/index.vue?52a3","webpack:///./src/components/vscube/index.vue","webpack:///./src/components/v4cubesample.vue?ed4f","webpack:///./src/plugins/v4/vue/Render/index.vue?696d","webpack:///./src/plugins/v4/common/toucher.ts","webpack:///./src/plugins/v4/cuber/tweener.ts","webpack:///./src/plugins/v4/cuber/twister.ts","webpack:///./src/plugins/v4/cuber/group.ts","webpack:///./src/plugins/v4/cuber/cubelet.ts","webpack:///./src/plugins/v4/cuber/history.ts","webpack:///./src/plugins/v4/cuber/cube.ts","webpack:///./src/plugins/v4/cuber/controller.ts","webpack:///./src/plugins/v4/cuber/world.ts","webpack:///./src/plugins/v4/cuber/preferance.ts","webpack:///./src/plugins/v4/cuber/theme.ts","webpack:///./src/plugins/v4/vue/Render/index.vue?a431","webpack:///./src/plugins/v4/vue/Render/index.vue?ddb8","webpack:///./src/plugins/v4/vue/Render/index.vue","webpack:///./src/components/v4cubesample.vue?0eac","webpack:///./src/components/v4cubesample.vue?8886","webpack:///./src/components/v4cubesample.vue","webpack:///./src/App.vue?86e8","webpack:///./src/App.vue?93a9","webpack:///./src/App.vue","webpack:///./src/views/Home.vue?d21d","webpack:///./src/views/Home.vue?7b27","webpack:///./src/views/Home.vue?6933","webpack:///./src/views/Home.vue","webpack:///./src/components/v4showSetOrSubSet.vue?f975","webpack:///./src/components/v4showSetOrSubSet.vue?77ff","webpack:///./src/components/v4showSetOrSubSet.vue?0d4e","webpack:///./src/components/v4showSetOrSubSet.vue","webpack:///./src/components/v4showCaseGroup.vue?0630","webpack:///./src/plugins/v3/cuber/define.ts","webpack:///./src/components/showSetOrSubSet.vue?fa12","webpack:///./src/plugins/v3/vue/Render/index.vue?fa89","webpack:///./src/plugins/v3/common/toucher.ts","webpack:///./src/plugins/v3/cuber/tweener.ts","webpack:///./src/plugins/v3/cuber/twister.ts","webpack:///./src/plugins/v3/cuber/group.ts","webpack:///./src/plugins/v3/cuber/cubelet.ts","webpack:///./src/plugins/v3/cuber/history.ts","webpack:///./src/plugins/v3/cuber/cube.ts","webpack:///./src/plugins/v3/cuber/controller.ts","webpack:///./src/plugins/v3/cuber/world.ts","webpack:///./src/plugins/v3/cuber/preferance.ts","webpack:///./src/plugins/v3/vue/Render/index.vue?4a03","webpack:///./src/plugins/v3/vue/Render/index.vue?bc30","webpack:///./src/plugins/v3/vue/Render/index.vue","webpack:///./src/components/showSetOrSubSet.vue?9445","webpack:///./src/components/showSetOrSubSet.vue?b8f7","webpack:///./src/components/showSetOrSubSet.vue","webpack:///./src/components/v4showCaseGroup.vue?7bee","webpack:///./src/components/v4showCaseGroup.vue?c0c0","webpack:///./src/components/v4showCaseGroup.vue","webpack:///./src/components/v4showCase.vue?1d0d","webpack:///./src/plugins/v4/vue/Playbar/index.vue?3e33","webpack:///./src/plugins/v4/vue/Playbar/index.vue?155d","webpack:///./src/plugins/v4/vue/Playbar/index.vue?5aed","webpack:///./src/plugins/v4/vue/Playbar/index.vue","webpack:///./src/components/v4showCase.vue?fc8d","webpack:///./src/components/v4showCase.vue?ada7","webpack:///./src/components/v4showCase.vue","webpack:///./src/components/test.vue?bd6d","webpack:///./src/plugins/cubestack/vue/CubeImgCover/index.vue?7675","webpack:///./src/plugins/cubestack/vue/Player/index.vue?718f","webpack:///./src/plugins/cubestack/cuber/twister.ts","webpack:///./src/plugins/cubestack/vue/Player/index.vue?692c","webpack:///./src/plugins/cubestack/vue/Player/index.vue?7f5b","webpack:///./src/plugins/cubestack/vue/Player/index.vue","webpack:///./src/plugins/cubestack/vue/CubeImgCover/index.vue?e265","webpack:///./src/plugins/cubestack/vue/CubeImgCover/index.vue?16d5","webpack:///./src/plugins/cubestack/vue/CubeImgCover/index.vue","webpack:///./src/components/test.vue?6de3","webpack:///./src/components/test.vue?3d1b","webpack:///./src/components/test.vue","webpack:///./src/components/v3cube.vue?57c2","webpack:///./src/components/v3cube.vue?1142","webpack:///./src/components/v3cube.vue?2417","webpack:///./src/components/v3cube.vue","webpack:///./src/components/v4cube.vue?467a","webpack:///./src/components/v4cube.vue?7332","webpack:///./src/components/v4cube.vue?dad1","webpack:///./src/components/v4cube.vue","webpack:///./src/router/index.ts","webpack:///./src/store/index.ts","webpack:///./src/plugins/vuetify.ts","webpack:///./src/plugins/cubestack/cuber/define.ts","webpack:///./src/plugins/cubestack/cuber/tweener.ts","webpack:///./src/plugins/cubestack/cuber/preferance.ts","webpack:///./src/plugins/cubestack/cuber/cubelet.ts","webpack:///./src/plugins/cubestack/cuber/group.ts","webpack:///./src/plugins/cubestack/cuber/controller.ts","webpack:///./src/plugins/cubestack/cuber/cube.ts","webpack:///./src/plugins/cubestack/cuber/world.ts","webpack:///./src/plugins/cubestack/cuber/history.ts","webpack:///./src/plugins/cubestack/cuber/index.ts","webpack:///./src/plugins/cubestack/common/toucher.ts","webpack:///./src/plugins/cubestack/cuber/renderer.ts","webpack:///./src/main.ts","webpack:///./src/plugins/cubestack/vue/CubeImgCover/index.vue?4712"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","directives","rawName","expression","staticClass","attrs","model","callback","$$v","drawer","_v","ref","sponsorindex","on","setThemeColors","resetThemeColors","saveThemeColors","$event","showcubesample","staticStyle","gotoMain","loading","items","search","select","stopPropagation","usephoneLayout","_e","Navigation","activeBtn","githuburl","staticRenderFns","_s","gcase","guser","galg","gmau","updateAt","algstats","casesnumber","usersnumber","algsnumber","maunumber","gsap","fromTo","$data","duration","cases","users","algs","fetch","$http","res","updatedAt","gsapdata","toFixed","components","component","VCol","VContainer","VRow","VSheet","modelindex","_l","slide","colors","slides","VCarousel","VCarouselItem","VAvatar","VChip","VChipGroup","scopedSlots","_u","fn","proxy","item","domProps","icon","text","VIcon","VListGroup","VListItem","VListItemContent","VList","VListItemIcon","VListItemTitle","FACE","tab","content","bottom","bottomlayer","index","color","setbottomlayer","opencolorselect","style","setcolorset","face","timeout","snackbar","message","colord","width","Math","min","size","padding","setcolor","COLORS","R","L","U","D","F","B","Core","High","Gray","COLORS_R","COLORS_O","COLORS_G","COLORS_B","COLORS_Y","COLORS_W","height","clickcolorindex","bottomlist","colorlist","facelist","facelist2","stylelist","palette","getlocalstoragecolors","Switch2CubeSample","innerWidth","innerHeight","ceil","localStorage","getItem","resize","layername","setItem","setthemecolor","themecolor","JSON","parse","themeconfig","el","oneset","eles","currentTarget","getElementsByClassName","ele","getComputedStyle","backgroundColor","colorsobj","VBottomSheet","VBtn","VCard","VCardTitle","VExpansionPanel","VExpansionPanelContent","VExpansionPanelHeader","VExpansionPanels","VFlex","VLayout","VListItemSubtitle","VSnackbar","VTab","VTabItem","VTabs","VTabsItems","world","cubeconfig","cubesize","hoverin","hoverout","type","x","y","offsetX","offsetY","setoffset","canvas","getBoundingClientRect","left","top","mouse","event","dom","tabIndex","focus","action","clientX","clientY","returnValue","touch","touches","changedTouches","first","preventDefault","addEventListener","begin","end","delta","elapsed","tweens","loop","requestAnimationFrame","update","tween","speedup","finish","tweener","queue","callbacks","fast","exp","reverse","times","node","list","element","cube","lock","twist","undefined","start","group","reset","dirty","history","clear","Twister","shuffle","order","init","angle","PI","part","groups","hold","setTimeout","last","exps","actions","axis","floor","random","side","prefix","suffix","join","String","children","match","test","toLowerCase","TwistNode","SPLIT_SEGMENT","values","SPLIT_BRACKET","parseInt","_result","buffer","stack","ready","note","charAt","AFFIX","indexOf","concat","indices","_angle","cubelets","matrixAutoUpdate","updateMatrix","from","Number","to","half","abs","CubeGroup","AXIS_TABLE","MES_TABLE","toUpperCase","cubelet","remove","add","round","pop","rotate","record","drop","frames","rotateOnWorldAxis","vector","applyAxisAngle","setRotationFromAxisAngle","z","Map","GroupTable","FORMAT","set","AXIS_VECTOR","initials","initial","layer","faces","Error","dst","src","template","replace","AXIS_MAP","NaN","a","M","E","S","border","_O","_I","_verts","_vert","vertices","Frame","_INDICES","_indice","_face","computeFaceNormals","depth","right","radius","shape","moveTo","lineTo","quadraticCurveTo","closePath","bevelEnabled","_vector","stickers","_quaternion","mirrors","xx","position","yy","zz","sqrt","Cubelet","SIZE","lamberts","LAMBERS","basics","BASICS","frame","_FRAME","PHONG","box","_sticker","_STICKER","rotation","_mirror","_MIRROR","copy","quaternion","applyQuaternion","inverse","lamber","basic","visible","DEPTH","material","_index","_x","_y","_z","_BORDER_WIDTH","_STICKER_DEPTH","specular","shininess","substring","lastIndexOf","complete","scale","every","getColor","same","idx","setRotationFromEuler","sort","stick","indexes","dragging","rotating","ray","down","move","matrix","holder","planes","_lock","_disable","sensitivity","tick","Date","getTime","hover","handleDown","handleMove","handleUp","taps","g","ax","dot","plane","normal","finger","point","origin","setFromMatrixPosition","camera","matrixWorld","direction","unproject","sub","normalize","applyMatrix4","identity","getInverse","scene","Infinity","intersectPlane","disable","distance","forEach","intersect","pow","dx","dy","project","subVectors","max","multiply","crossVectors","multiplyScalar","tap","speed","cubes","perspective","ambient","directional","twister","controller","fov","atan","aspect","near","far","lookAt","updateProjectionMatrix","version","gradient","mirror","hollow","shadow","stringify","intensity","dark","default","refresh","CubeStageMask","renderconfig","preferanceconfig","playerconfig","looplayRunning","worldin","preferance","theme","config","renderModelName","preferanceModelName","themeModelName","param","cubename","CoverImgOn","coverImgNotModel","load","masktype","strip","alg","coverimg","loadCubeConfig","console","log","con","datajson","renderer","setSize","createrender","domElement","toDataURL","document","createElement","objectFit","canvasdiv","appendChild","removerender","autoplay","render","toucher","outline","antialias","alpha","autoClear","setClearColor","WHITE","setPixelRatio","devicePixelRatio","draw","dispose","removeChild","initcube","looplay_id","loopplay","autoplay_id","display","hoverplay","clearTimeout","cancelAnimationFrame","loop_id","breath","sin","autorotate","da","Render","show2dOr3d","windowSize","newvalue","statistic","vscube","command","$router","nav","setNavigation","$vuetify","temp","ren","pre","the","caseg","initlocalstorage","cubesample","Account","Cubesample","Hot","Vscube","Sponsor","Statistic","VApp","VAppBar","VAppBarNavIcon","VAutocomplete","VBadge","VBottomNavigation","VBreadcrumbs","VContent","VDivider","VFooter","VListItemAvatar","VNavigationDrawer","VSubheader","VToolbarTitle","VToolbar","Resize","puzzle","gotopage","shortName","res22","res33","_cube","e","puzzleshortname","VHover","shortname","puzzleSet","puzzleSets","titlestyle","hassubset","puzzleset","genAlgs","params","$route","path","split","disabled","setname","go","refreshtitlestyle","refreshcubesize","setisasubset","title","caseGroup","DEFAULT_COLORS","lambers","ORANGE","GRAY","RED","YELLOW","GREEN","BLUE","BLACK","BACKGROUND","caseGroups","caseGroupWholeName","casegroup","groupName","haschildren","casename","showSetOrSubSet","Cases","imageSrc","class","textConfig","ScreenTitle","ScreenCardTitle","header","hidedateanddes","id","algOnScreen","moves","vote","votes","imagesize","toggle","date","createDate","des","progress","chaos","backward","playing","forward","pprogress","flex","required","VSlider","bodydefault","playbar","calVisualCubeSize","calories","defaultconfig","Playbar","VCardActions","VImg","VSimpleTable","VisualcubeConfig","refname","cuber","r_id","cuberef","$refs","cubediv","$cuberender","addcube","pagecubes","player","imgElements","getElementsByTagName","imgelement","now","setInterval","clearInterval","unbind","hide","Player","enable","VisualCube","Configs","use","routes","Home","props","router","Store","state","mutations","commit","storage","brightness","save","light","CYAN","LIME","PINK","_context","productionTip","vuetify","baseURL","vm","store","h","$mount"],"mappings":"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","file":"js/app.45930f5a.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/vue-ts-algdb-player/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=1c6a05e3&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=1c6a05e3&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./v4showCase.vue?vue&type=style&index=0&id=28145261&lang=css&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./v4showCase.vue?vue&type=style&index=0&id=28145261&lang=css&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',{directives:[{name:\"resize\",rawName:\"v-resize\",value:(_vm.onresize),expression:\"onresize\"}]},[_c('v-navigation-drawer',{staticClass:\"teal lighten-1\",attrs:{\"width\":\"500\",\"dark\":\"\",\"right\":\"\",\"app\":\"\",\"disable-resize-watcher\":\"\"},model:{value:(_vm.drawer),callback:function ($$v) {_vm.drawer=$$v},expression:\"drawer\"}},[_c('v-list',{staticClass:\"py-2\",attrs:{\"nav\":\"\"}},[_c('v-list-item',[_c('v-list-item-avatar',[_c('img',{attrs:{\"src\":\"https://randomuser.me/api/portraits/men/81.jpg\"}})]),_c('v-list-item-content',[_c('v-list-item-title',{staticClass:\"title\"},[_vm._v(\" KiraHan \"),_c('v-btn',{attrs:{\"color\":\"purple\",\"right\":\"\",\"absolute\":\"\",\"small\":\"\"}},[_vm._v(\"退出\")])],1)],1)],1),_c('v-divider'),(_vm.showcubesample)?_c('Cubesample',{ref:\"cubesample\"}):_c('div',[_c('v-subheader',[_vm._v(\"赞助商\")]),_c('Sponsor',{attrs:{\"model\":_vm.sponsorindex}})],1),_c('v-divider'),_c('v-subheader',[_vm._v(\"虚拟魔方\")]),_c('Vscube',{ref:\"vscube\",on:{\"setthemecolor\":_vm.setThemeColors,\"resetthemecolors\":_vm.resetThemeColors,\"savethemecolors\":_vm.saveThemeColors,\"switch2cubesample\":function($event){_vm.showcubesample=true}}}),_c('v-divider'),_c('v-subheader',[_vm._v(\"账号\")]),_c('Account'),_c('v-divider'),_c('v-subheader',[_vm._v(\"热门\")]),_c('Hot'),_c('v-divider'),_c('v-subheader',[_vm._v(\"统计\")]),_c('Statistic',{ref:\"stats\"})],1)],1),_c('v-app-bar',{attrs:{\"app\":\"\",\"clipped\":\"\",\"color\":\"purple\",\"dark\":\"\"}},[_c('v-toolbar-title',{staticStyle:{\"cursor\":\"pointer\"},on:{\"click\":function($event){return _vm.gotoMain()}}},[_vm._v(\"AlgDb.Player\")]),_c('v-autocomplete',{staticClass:\"mx-4\",attrs:{\"loading\":_vm.loading,\"items\":_vm.items,\"search-input\":_vm.search,\"clearable\":\"\",\"cache-items\":\"\",\"flat\":\"\",\"hide-no-data\":\"\",\"hide-details\":\"\",\"label\":\"search a case\",\"solo-inverted\":\"\"},on:{\"update:searchInput\":function($event){_vm.search=$event},\"update:search-input\":function($event){_vm.search=$event}},model:{value:(_vm.select),callback:function ($$v) {_vm.select=$$v},expression:\"select\"}}),_c('v-btn',{attrs:{\"icon\":\"\",\"color\":\"\"}},[_c('v-icon',[_vm._v(\"mdi-fullscreen\")])],1),_c('v-btn',{attrs:{\"icon\":\"\",\"color\":\"\"}},[_c('v-badge',{attrs:{\"overlap\":\"\",\"color\":\"red\",\"content\":\"6\"}},[_c('v-icon',[_vm._v(\"mdi-bell\")])],1)],1),_c('v-app-bar-nav-icon',{on:{\"click\":function($event){$event.stopPropagation();_vm.drawer = !_vm.drawer}}})],1),_c('v-content',{attrs:{\"app\":\"\",\"fluid\":\"\"}},[(!_vm.usephoneLayout)?_c('v-breadcrumbs',{attrs:{\"divider\":\">\",\"large\":\"\",\"items\":_vm.Navigation}}):_vm._e(),_c('router-view')],1),(_vm.usephoneLayout)?_c('v-bottom-navigation',{attrs:{\"value\":_vm.activeBtn,\"grow\":\"\",\"app\":\"\",\"color\":\"teal\"}},[_c('v-btn',[_c('span',[_vm._v(\"Recents\")]),_c('v-icon',[_vm._v(\"mdi-history\")])],1),_c('v-btn',[_c('span',[_vm._v(\"Favorites\")]),_c('v-icon',[_vm._v(\"mdi-heart\")])],1),_c('v-btn',[_c('span',[_vm._v(\"Nearby\")]),_c('v-icon',[_vm._v(\"mdi-map-marker\")])],1)],1):_vm._e(),(!_vm.usephoneLayout)?_c('v-footer',{attrs:{\"app\":\"\"}},[_c('span',[_vm._v(\"© 2020\")]),_c('v-btn',{attrs:{\"right\":\"\",\"text\":\"\",\"absolute\":\"\",\"href\":_vm.githuburl,\"target\":\"_blank\"}},[_c('v-icon',[_vm._v(\"mdi-github\")])],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticStyle:{\"padding\":\"0px\"},attrs:{\"fluid\":\"\"}},[_c('v-row',{staticClass:\"text-center\"},[_c('v-col',{attrs:{\"cols\":\"6\"}},[_c('v-sheet',{staticClass:\"pa-3\",attrs:{\"tile\":\"\",\"elevation-10\":\"\",\"color\":\"red\"}},[_c('div',{staticClass:\"headline\"},[_vm._v(_vm._s(_vm.gcase))]),_c('span',{staticClass:\"caption\"},[_vm._v(\"Cases\")])])],1),_c('v-col',{attrs:{\"cols\":\"6\"}},[_c('v-sheet',{staticClass:\"pa-3\",attrs:{\"tile\":\"\",\"elevation-10\":\"\",\"color\":\"indigo\"}},[_c('div',{staticClass:\"headline\"},[_vm._v(_vm._s(_vm.guser))]),_c('span',{staticClass:\"caption\"},[_vm._v(\"Users\")])])],1),_c('v-col',{attrs:{\"cols\":\"6\"}},[_c('v-sheet',{staticClass:\"pa-3\",attrs:{\"tile\":\"\",\"elevation-10\":\"\",\"color\":\"purple\"}},[_c('div',{staticClass:\"headline\"},[_vm._v(_vm._s(_vm.galg))]),_c('span',{staticClass:\"caption\"},[_vm._v(\"Algs\")])])],1),_c('v-col',{attrs:{\"cols\":\"6\"}},[_c('v-sheet',{staticClass:\"pa-3\",attrs:{\"tile\":\"\",\"elevation-10\":\"\",\"color\":\"orange\"}},[_c('div',{staticClass:\"headline\"},[_vm._v(_vm._s(_vm.gmau))]),_c('span',{staticClass:\"caption\"},[_vm._v(\"MAU\")])])],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('span',{staticClass:\"caption grey--text text--lighten-3\"},[_vm._v(\"更新于: \"+_vm._s(_vm.updateAt))])])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport {Component, Prop, Ref, Provide, Watch} from 'vue-property-decorator'\r\nimport gsap  from 'gsap'\r\nimport { settings } from 'cluster'\r\n\r\n\r\n@Component({name:'Statistic',components:{}})\r\nexport default class Statistic extends Vue{\r\n    constructor(){\r\n        super()\r\n    }\r\n\r\n    updateAt: string = ''\r\n\r\n    algstats: any = {}\r\n\r\n    casesnumber: number = 0\r\n    usersnumber: number = 0\r\n    algsnumber: number = 0\r\n    maunumber: number = 0\r\n\r\n\r\n    get gcase(){\r\n        return this.casesnumber.toFixed(0)\r\n    }\r\n\r\n    get guser(){\r\n        return this.usersnumber.toFixed(0)\r\n    }\r\n\r\n    get galg(){\r\n        return this.algsnumber.toFixed(0)\r\n    }\r\n\r\n    get gmau(){\r\n        return this.maunumber.toFixed(0)\r\n    }\r\n\r\n\r\n\r\n    mounted(){\r\n\r\n    }\r\n\r\n    gsapdata(){\r\n         gsap.fromTo(this.$data,{\r\n                duration:1.5, \r\n                casesnumber : 0,\r\n                usersnumber : 0,\r\n                algsnumber : 0,\r\n                maunumber : 0\r\n            },{\r\n                duration:2.5, \r\n                casesnumber : this.algstats.cases,\r\n                usersnumber : this.algstats.users,\r\n                algsnumber : this.algstats.algs,\r\n                maunumber : 500\r\n            })\r\n    }\r\n\r\n\r\n    created(){\r\n        this.fetch()\r\n    }\r\n\r\n    async fetch(){\r\n        const res = await this.$http.get(`algdb/stats`)\r\n        this.algstats = res.data[0]\r\n        this.updateAt = this.algstats.updatedAt\r\n    }\r\n\r\n    @Watch('algstats')\r\n    onCasesnumberChange(){\r\n        this.gsapdata()\r\n    }\r\n}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./statistic.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./statistic.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./statistic.vue?vue&type=template&id=0cee8f8a&scoped=true&\"\nimport script from \"./statistic.vue?vue&type=script&lang=ts&\"\nexport * from \"./statistic.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0cee8f8a\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSheet } from 'vuetify/lib/components/VSheet';\ninstallComponents(component, {VCol,VContainer,VRow,VSheet})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticStyle:{\"padding\":\"0px\"},attrs:{\"fluid\":\"\"}},[_c('v-carousel',{attrs:{\"height\":\"200px\",\"cycle\":_vm.model==-1,\"hide-delimiter-background\":\"\",\"show-arrows\":false,\"hide-delimiters\":\"\"},model:{value:(_vm.modelindex),callback:function ($$v) {_vm.modelindex=$$v},expression:\"modelindex\"}},_vm._l((_vm.slides),function(slide,i){return _c('v-carousel-item',{key:i},[_c('v-sheet',{attrs:{\"color\":_vm.colors[i],\"height\":\"100%\"}},[_c('v-row',{staticClass:\"fill-height\",attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_c('div',{staticClass:\"display-3\"},[_vm._v(_vm._s(slide)+\" Slide\")])])],1)],1)}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport {Component, Prop, Ref, Provide, Watch} from 'vue-property-decorator'\r\n\r\n\r\n@Component({name:'Sponsor',components:{}})\r\nexport default class Sponsor extends Vue{\r\n    constructor(){\r\n    super()\r\n    }\r\n\r\n\r\n    @Prop()\r\n    model: number\r\n\r\n    modelindex: number = 0\r\n\r\n    colors: string[] = [\r\n        'indigo',\r\n        'warning',\r\n        'pink darken-2',\r\n        'red lighten-1',\r\n        'deep-purple accent-4',\r\n        ]\r\n    slides: string[] =[\r\n        'First',\r\n        'Second',\r\n        'Third',\r\n        'Fourth',\r\n        'Fifth',\r\n    ]\r\n\r\n    @Watch('model')\r\n    onModelChange(){\r\n        if(this.model==-1){\r\n        }else{\r\n            this.modelindex = this.model\r\n        }\r\n    }\r\n\r\n}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sponsor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sponsor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./sponsor.vue?vue&type=template&id=56d64436&scoped=true&\"\nimport script from \"./sponsor.vue?vue&type=script&lang=ts&\"\nexport * from \"./sponsor.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"56d64436\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCarousel } from 'vuetify/lib/components/VCarousel';\nimport { VCarouselItem } from 'vuetify/lib/components/VCarousel';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSheet } from 'vuetify/lib/components/VSheet';\ninstallComponents(component, {VCarousel,VCarouselItem,VContainer,VRow,VSheet})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticStyle:{\"padding\":\"0px\"},attrs:{\"fluid\":\"\"}},[_c('v-chip-group',{attrs:{\"column\":\"\"}},[_c('v-chip',{staticClass:\"ma-2\",attrs:{\"link\":\"\",\"color\":\"green\",\"text-color\":\"white\"}},[_c('v-avatar',{staticClass:\"green darken-4\",attrs:{\"left\":\"\"}},[_vm._v(\"3\")]),_vm._v(\" F2L \")],1),_c('v-chip',{staticClass:\"ma-2\",attrs:{\"link\":\"\",\"color\":\"indigo\",\"text-color\":\"white\"}},[_c('v-avatar',{staticClass:\"indigo darken-4\",attrs:{\"left\":\"\"}},[_vm._v(\"2\")]),_vm._v(\" EG1 \")],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport {Component, Prop, Ref, Provide} from 'vue-property-decorator'\r\n\r\n@Component({name:'Hot',components:{}})\r\nexport default class Hot extends Vue{\r\n\r\n\r\n}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./hot.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./hot.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./hot.vue?vue&type=template&id=3399eeca&scoped=true&\"\nimport script from \"./hot.vue?vue&type=script&lang=ts&\"\nexport * from \"./hot.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3399eeca\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VChip } from 'vuetify/lib/components/VChip';\nimport { VChipGroup } from 'vuetify/lib/components/VChipGroup';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VAvatar,VChip,VChipGroup,VContainer})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticStyle:{\"padding\":\"0px\"},attrs:{\"fluid\":\"\"}},[_c('v-list-group',{attrs:{\"value\":_vm.model,\"prepend-icon\":\"account_circle\",\"color\":\"yellow\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(){return [_c('v-list-item-title',[_vm._v(\"Users\")])]},proxy:true}])},_vm._l((_vm.items),function(item,i){return _c('v-list-item',{key:i,attrs:{\"link\":\"\"}},[_c('v-list-item-icon',[_c('v-icon',{domProps:{\"textContent\":_vm._s(item.icon)}})],1),_c('v-list-item-content',[_c('v-list-item-title',{domProps:{\"textContent\":_vm._s(item.text)}})],1)],1)}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport {Component, Prop, Ref, Provide} from 'vue-property-decorator'\r\n\r\n@Component({name:'Account',components:{}})\r\nexport default class Account extends Vue{\r\n\r\n     items= [\r\n        {\r\n          icon: 'mdi-heart',\r\n          text: '我的收藏',\r\n        },\r\n        {\r\n          icon: 'mdi-file-edit',\r\n          text: '个人资料',\r\n        },\r\n        {\r\n          icon: 'mdi-link',\r\n          text: '绑定账号',\r\n        },\r\n      ]\r\n      model:boolean = false\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=6dcf52c4&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=ts&\"\nexport * from \"./index.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6dcf52c4\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VListGroup } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemIcon } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\ninstallComponents(component, {VContainer,VIcon,VListGroup,VListItem,VListItemContent,VListItemIcon,VListItemTitle})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticStyle:{\"padding\":\"0px\"},attrs:{\"fluid\":\"\"}},[_c('v-tabs',{attrs:{\"centered\":\"\",\"optional\":\"\",\"grow\":\"\",\"background-color\":\"teal lighten-1\"},model:{value:(_vm.tab),callback:function ($$v) {_vm.tab=$$v},expression:\"tab\"}},_vm._l((_vm.items),function(item){return _c('v-tab',{key:item.tab},[_vm._v(\" \"+_vm._s(item.content)+\" \")])}),1),_c('v-tabs-items',{model:{value:(_vm.tab),callback:function ($$v) {_vm.tab=$$v},expression:\"tab\"}},[_c('v-tab-item',{key:\"One\"},[_c('v-card',{attrs:{\"tile\":\"\",\"dark\":\"\",\"elevation\":\"0\",\"color\":\"teal lighten-1\"}},[_c('v-card-title',[_vm._v(\"1\")])],1)],1),_c('v-tab-item',{key:\"Two\"},[_c('v-row',[_c('v-expansion-panels',{attrs:{\"accordion\":\"\"}},[_c('v-expansion-panel',[_c('v-expansion-panel-header',{attrs:{\"color\":\"cyan darken-2 white--text\"}},[_vm._v(\"魔方底色:\"+_vm._s(_vm.bottom))]),_c('v-expansion-panel-content',[_c('v-row',{attrs:{\"no-gutters\":\"\",\"dark\":\"\"}},[_vm._l((_vm.bottomlist),function(bottomlayer,index){return _c('v-col',{key:index,attrs:{\"cols\":\"2\"}},[_c('v-card',{staticClass:\"pa-2 d-flex bottomlayercolor\",attrs:{\"dark\":\"\",\"elevation-0\":\"\",\"tileindex\":\"\",\"color\":bottomlayer.color},on:{\"click\":function($event){return _vm.setbottomlayer(bottomlayer.name)}}},[_c('v-list-item-title',{staticClass:\"caption\"},[_vm._v(_vm._s(bottomlayer.name))])],1)],1)}),_c('v-col',{staticClass:\"bottombtn\",attrs:{\"cols\":\"12\"}},[_c('v-btn',{attrs:{\"color\":\"success\"},on:{\"click\":_vm.saveThemeColors}},[_vm._v(\"确定\")]),_c('v-btn',{attrs:{\"color\":\"error\"},on:{\"click\":_vm.resetThemeColors}},[_vm._v(\"重置\")])],1)],2)],1)],1),_c('v-expansion-panel',[_c('v-expansion-panel-header',{attrs:{\"color\":\"purple darken-2 white--text\"}},[_vm._v(\"配色模板\")]),_c('v-expansion-panel-content',[_c('v-row',{attrs:{\"no-gutters\":\"\"}},[_c('v-col',{attrs:{\"cols\":\"2\"}},[_c('p',{staticClass:\"title \",staticStyle:{\"line-height\":\"100px\"}},[_vm._v(\"自定义\")])]),_c('v-col',{attrs:{\"cols\":\"10\"}},[_c('v-row',{attrs:{\"no-gutters\":\"\"}},_vm._l((_vm.colorlist),function(bottomlayer,index){return _c('v-col',{key:index,attrs:{\"cols\":\"2\"}},[_c('v-card',{staticClass:\"pa-2 d-flex bottomlayercolor\",attrs:{\"dark\":\"\",\"elevation-0\":\"\",\"tile\":\"\",\"color\":bottomlayer.color},on:{\"click\":function($event){return _vm.opencolorselect(index)}}},[_c('v-list-item-subtitle',{staticClass:\"caption\"},[_vm._v(_vm._s(bottomlayer.name))])],1)],1)}),1)],1),_c('v-col',{staticClass:\"preset\",attrs:{\"cols\":\"12\"}},[_c('span',[_vm._v(\"预设\")]),_c('v-btn',{attrs:{\"small\":\"\",\"color\":\"success\"},on:{\"click\":_vm.saveThemeColors}},[_vm._v(\"确定\")]),_c('v-btn',{attrs:{\"small\":\"\",\"color\":\"error\"},on:{\"click\":_vm.resetThemeColors}},[_vm._v(\"重置\")])],1),_c('v-row',{attrs:{\"no-gutters\":\"\"}},[_c('v-col',{attrs:{\"clos\":\"6\"}},[_c('v-row',{attrs:{\"no-gutters\":\"\"}},_vm._l((_vm.stylelist),function(style,index){return _c('v-col',{key:index,staticClass:\"colorset\",attrs:{\"cols\":\"12\"},on:{\"click\":function($event){return _vm.setcolorset($event,style)}}},[_c('v-row',{attrs:{\"no-gutters\":\"\"}},_vm._l((_vm.facelist),function(face,index){return _c('v-col',{key:index,attrs:{\"cols\":\"2\"}},[_c('v-card',{staticClass:\"pa-2 d-flex facecolor\",attrs:{\"dark\":\"\",\"elevation-0\":\"\",\"tile\":\"\",\"color\":face.color+style}},[_c('v-list-item-subtitle',{staticClass:\"caption\"},[_vm._v(_vm._s(face.name))])],1)],1)}),1)],1)}),1)],1),_c('v-col',{attrs:{\"clos\":\"6\"}},[_c('v-row',{attrs:{\"no-gutters\":\"\"}},_vm._l((_vm.stylelist),function(style,index){return _c('v-col',{key:index+1231231,staticClass:\"colorset\",attrs:{\"cols\":\"12\"},on:{\"click\":function($event){return _vm.setcolorset($event,style)}}},[_c('v-row',{attrs:{\"no-gutters\":\"\"}},_vm._l((_vm.facelist2),function(face,index){return _c('v-col',{key:index,attrs:{\"cols\":\"2\"}},[_c('v-card',{staticClass:\"pa-2 d-flex facecolor\",attrs:{\"dark\":\"\",\"elevation-0\":\"\",\"tile\":\"\",\"color\":face.color+style}},[_c('v-list-item-subtitle',{staticClass:\"caption\"},[_vm._v(_vm._s(face.name))])],1)],1)}),1)],1)}),1)],1)],1)],1)],1)],1)],1)],1)],1),_c('v-tab-item',{key:\"Three\"},[_c('v-card',{attrs:{\"tile\":\"\",\"dark\":\"\",\"elevation\":\"0\",\"color\":\"teal lighten-1\"}},[_c('v-card-title',[_vm._v(\"3\")])],1)],1)],1),_c('v-snackbar',{attrs:{\"timeout\":_vm.timeout,\"color\":\"success\",\"left\":\"\",\"bottom\":\"\"},model:{value:(_vm.snackbar),callback:function ($$v) {_vm.snackbar=$$v},expression:\"snackbar\"}},[_vm._v(\" \"+_vm._s(_vm.message)+\" \"),_c('v-btn',{attrs:{\"color\":\"white\",\"text\":\"\"},on:{\"click\":function($event){_vm.snackbar = false}}},[_vm._v(\" Close \")])],1),_c('v-bottom-sheet',{attrs:{\"dark\":\"\",\"inset\":\"\"},model:{value:(_vm.colord),callback:function ($$v) {_vm.colord=$$v},expression:\"colord\"}},[_c('v-card',{staticStyle:{\"margin\":\"auto\",\"touch-action\":\"none\",\"user-select\":\"none\"},attrs:{\"flat\":\"\"}},[_c('v-container',{style:({width:Math.min(_vm.size * 8, _vm.width) + 'px'}),attrs:{\"fluid\":\"\",\"grid-list-md\":\"\",\"text-xs-center\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},_vm._l((_vm.palette),function(item){return _c('v-flex',{key:item,style:({padding:_vm.size * 0.06 + 'px'}),attrs:{\"xs2\":\"\"}},[_c('v-btn',{staticStyle:{\"min-width\":\"0%\",\"min-height\":\"0%\",\"margin\":\"0%\",\"padding\":\"0%\"},attrs:{\"color\":item,\"block\":\"\",\"depressed\":\"\",\"height\":_vm.size},on:{\"click\":function($event){return _vm.setcolor(item);}}})],1)}),1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export enum FACE {\r\n  L,\r\n  R,\r\n  D,\r\n  U,\r\n  B,\r\n  F,\r\n}\r\n\r\nexport var COLORS: { [key: string]: string } = {\r\n  R: \"#B71C1C\",\r\n  L: \"#FF6D00\",\r\n  U: \"#FFFFFF\",\r\n  D: \"#FFD600\",\r\n  F: \"#00A020\",\r\n  B: \"#0D47A1\",\r\n  Core: \"#202020\",\r\n  High: \"#FF4081\",\r\n  Gray: \"#606060\"\r\n};\r\n\r\nexport var COLORS_R: { [key: string]: string } = {\r\n  D: \"#B71C1C\",\r\n  U: \"#FF6D00\",\r\n  R: \"#FFFFFF\",\r\n  L: \"#FFD600\",\r\n  F: \"#00A020\",\r\n  B: \"#0D47A1\",\r\n  Core: \"#202020\",\r\n  High: \"#FF4081\",\r\n  Gray: \"#606060\"\r\n};\r\n\r\nexport var COLORS_O: { [key: string]: string } = {\r\n  U: \"#B71C1C\",\r\n  D: \"#FF6D00\",\r\n  L: \"#FFFFFF\",\r\n  R: \"#FFD600\",\r\n  F: \"#00A020\",\r\n  B: \"#0D47A1\",\r\n  Core: \"#202020\",\r\n  High: \"#FF4081\",\r\n  Gray: \"#606060\"\r\n};\r\n\r\n\r\n\r\n\r\nexport var COLORS_G: { [key: string]: string } = {\r\n  R: \"#B71C1C\",\r\n  L: \"#FF6D00\",\r\n  F: \"#FFFFFF\",\r\n  B: \"#FFD600\",\r\n  D: \"#00A020\",\r\n  U: \"#0D47A1\",\r\n  Core: \"#202020\",\r\n  High: \"#FF4081\",\r\n  Gray: \"#606060\"\r\n};\r\n\r\nexport var COLORS_B: { [key: string]: string } = {\r\n  R: \"#B71C1C\",\r\n  L: \"#FF6D00\",\r\n  B: \"#FFFFFF\",\r\n  F: \"#FFD600\",\r\n  U: \"#00A020\",\r\n  D: \"#0D47A1\",\r\n  Core: \"#202020\",\r\n  High: \"#FF4081\",\r\n  Gray: \"#606060\"\r\n};\r\n\r\n\r\n\r\nexport var COLORS_Y: { [key: string]: string } = {\r\n  R: \"#B71C1C\",\r\n  L: \"#FF6D00\",\r\n  U: \"#FFFFFF\",\r\n  D: \"#FFD600\",\r\n  F: \"#00A020\",\r\n  B: \"#0D47A1\",\r\n  Core: \"#202020\",\r\n  High: \"#FF4081\",\r\n  Gray: \"#606060\"\r\n};\r\n\r\n\r\n\r\nexport var COLORS_W: { [key: string]: string } = {\r\n  L: \"#B71C1C\",\r\n  R: \"#FF6D00\",\r\n  D: \"#FFFFFF\",\r\n  U: \"#FFD600\",\r\n  F: \"#00A020\",\r\n  B: \"#0D47A1\",\r\n  Core: \"#202020\",\r\n  High: \"#FF4081\",\r\n  Gray: \"#606060\"\r\n};\r\n\r\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport {Component, Prop, Ref, Provide, Watch, Emit} from 'vue-property-decorator'\r\nimport {COLORS,COLORS_R,COLORS_O,COLORS_G,COLORS_B,COLORS_Y,COLORS_W} from '../../plugins/v4/cuber/define'\r\n\r\n\r\n@Component({name:'Account',components:{}})\r\nexport default class Account extends Vue{\r\n    width: number = 0;\r\n    height: number = 0;\r\n    size: number = 0;\r\n\r\n\r\n    tab:string = ''\r\n    colord: boolean = false\r\n    items =  [\r\n                { tab: 'One', content: '外观' },\r\n                { tab: 'Two', content: '配色' },\r\n                { tab: 'Three', content: '计时' }\r\n            ]\r\n    // 确定点击的是哪一个颜色\r\n    clickcolorindex: number = null\r\n    bottomlist = [\r\n        {name:'蓝',value:'blue',color:'indigo'},\r\n        {name:'绿',value:'green',color:'green'},\r\n        {name:'黄',value:'yellow',color:'yellow'},\r\n        {name:'白',value:'white',color:'grey lighten-1'},\r\n        {name:'橙',value:'orange',color:'orange'},\r\n        {name:'红',value:'red',color:'red'}\r\n        ]\r\n    colorlist = [\r\n        {name:'蓝',value:'blue',color:'indigo'},\r\n        {name:'绿',value:'green',color:'green'},\r\n        {name:'黄',value:'yellow',color:'yellow'},\r\n        {name:'白',value:'white',color:'grey lighten-1'},\r\n        {name:'橙',value:'orange',color:'orange'},\r\n        {name:'红',value:'red',color:'red'}\r\n        ]\r\n    bottom: string = ''\r\n\r\n    facelist = [\r\n        {name:'蓝',value:'blue',color:'indigo'},\r\n        {name:'绿',value:'green',color:'green'},\r\n        {name:'黄',value:'yellow',color:'yellow'},\r\n        {name:'白',value:'white',color:'white'},\r\n        {name:'橙',value:'orange',color:'orange'},\r\n        {name:'红',value:'red',color:'red'}\r\n        ]\r\n    facelist2 = [\r\n        {name:'蓝',value:'blue',color:'blue'},\r\n        {name:'绿',value:'green',color:'light-green'},\r\n        {name:'黄',value:'yellow',color:'amber'},\r\n        {name:'白',value:'white',color:'grey'},\r\n        {name:'橙',value:'orange',color:'orange'},\r\n        {name:'红',value:'red',color:'pink'}\r\n        ]\r\n\r\n    stylelist = [\r\n        ' lighten-4',\r\n        ' lighten-3',\r\n        ' lighten-2',\r\n        ' lighten-1',\r\n        ' ',\r\n        ' darken-1',\r\n        ' darken-2',\r\n        ' darken-3',\r\n        ' darken-4',\r\n    ]\r\n\r\n    palette: string[] = [\r\n        // YELLOW\r\n        \"#FFD600\",\r\n        \"#FFFF00\",\r\n        \"#FFFF8D\",\r\n        \"#FEFE00\",\r\n        \"#FDD835\",\r\n        \"#FFC107\",\r\n        // ORANGE\r\n        \"#FF6D00\",\r\n        \"#FFA100\",\r\n        \"#FB8C00\",\r\n        \"#F57C00\",\r\n        \"#EF6C00\",\r\n        \"#E65100\",\r\n        // RED\r\n        \"#B71C1C\",\r\n        \"#FF0000\",\r\n        \"#EE0000\",\r\n        \"#DD0000\",\r\n        \"#CC0000\",\r\n        \"#BF360C\",\r\n        // BLUE\r\n        \"#0D47A1\",\r\n        \"#0000FF\",\r\n        \"#88DDFF\",\r\n        \"#03A9F4\",\r\n        \"#1976D2\",\r\n        \"#1A237E\",\r\n        // GREEN\r\n        \"#00A020\",\r\n        \"#00FF00\",\r\n        \"#76FF03\",\r\n        \"#00D800\",\r\n        \"#00A000\",\r\n        \"#006600\",\r\n        // P\r\n        \"#FF4081\",\r\n        \"#EEE8AA\",\r\n        \"#FF99FF\",\r\n        \"#A83DD9\",\r\n        \"#607D8B\",\r\n        \"#885500\",\r\n        // WB\r\n        \"#202020\",\r\n        \"#000000\",\r\n        \"#606060\",\r\n        \"#A0A0A0\",\r\n        \"#D0D0D0\",\r\n        \"#FFFFFF\",\r\n  ];\r\n\r\n    snackbar: boolean = false\r\n    message: string = ''\r\n    timeout = 2000\r\n\r\n    @Emit('setsponsorindex')\r\n    setSponsorIndex(value){\r\n        return {\r\n            data : value\r\n        }\r\n    }\r\n\r\n    @Emit('switch2cubesample')\r\n    Switch2CubeSample(){\r\n        return true\r\n    }\r\n\r\n    @Emit('setthemecolor')\r\n    setthemecolor(data){\r\n        return data\r\n    }\r\n\r\n    @Emit('resetthemecolors')\r\n    resetThemeColors(){\r\n        this.getlocalstoragecolors()\r\n        this.snackbar = true\r\n        this.message = `重置成功`\r\n        return true\r\n    }\r\n\r\n    @Emit('savethemecolors')\r\n    saveThemeColors(){\r\n        this.snackbar = true\r\n        this.message = `设置颜色成功`\r\n        return true\r\n    }\r\n\r\n\r\n    @Watch('tab')\r\n    onTabChange(){\r\n\r\n        // 如果tab有值就将sponsor模块的页面切换到第一页\r\n        // this.setSponsorIndex(0)\r\n\r\n        // 不使用sponsor 切换到 示例魔方页面\r\n        this.Switch2CubeSample()\r\n    }\r\n\r\n    resize() {\r\n        this.width = window.innerWidth;\r\n        this.height = window.innerHeight;\r\n        this.size = Math.ceil(Math.min(this.width / 6, this.height / 12));\r\n        }\r\n\r\n    mounted(){\r\n        this.bottom = window.localStorage.getItem('bottomlayer')\r\n        this.resize()\r\n        this.getlocalstoragecolors()\r\n\r\n    }\r\n    setbottomlayer(layername){\r\n        window.localStorage.setItem('bottomlayer', layername)\r\n        this.bottom = layername\r\n        switch(layername){\r\n            case '蓝':\r\n                this.setthemecolor(COLORS_B)\r\n                break\r\n            case '绿':\r\n                this.setthemecolor(COLORS_G)\r\n                break\r\n            case '黄':\r\n                this.setthemecolor(COLORS_Y)\r\n                break\r\n            case '白':\r\n                this.setthemecolor(COLORS_W)\r\n                break\r\n            case '橙':\r\n                this.setthemecolor(COLORS_O)\r\n                break\r\n            case '红':\r\n                this.setthemecolor(COLORS_R)\r\n                break\r\n            default:\r\n                break\r\n        }\r\n\r\n\r\n\r\n        // this.snackbar = true\r\n        // this.message = `将魔方底色设置为${layername}色`\r\n    }\r\n\r\n    opencolorselect(index){\r\n        this.colord = true\r\n        this.clickcolorindex = index\r\n    }\r\n\r\n    getlocalstoragecolors(){\r\n        let themecolor = JSON.parse(window.localStorage.getItem('cubeconfig:casegroup')).themeconfig.colors        \r\n        this.colorlist[0].color = themecolor.B\r\n        this.colorlist[1].color = themecolor.F\r\n        this.colorlist[2].color = themecolor.U\r\n        this.colorlist[3].color = themecolor.D\r\n        this.colorlist[4].color = themecolor.L\r\n        this.colorlist[5].color = themecolor.R\r\n    }\r\n\r\n    setcolor(color){\r\n        this.colorlist[this.clickcolorindex].color = color\r\n        switch(this.clickcolorindex){\r\n            case 0:\r\n                this.setthemecolor({B:color})\r\n                break\r\n            case 1:\r\n                this.setthemecolor({F:color})\r\n                break\r\n            case 2:\r\n                this.setthemecolor({U:color})\r\n                break\r\n            case 3:\r\n                this.setthemecolor({D:color})\r\n                break\r\n            case 4:\r\n                this.setthemecolor({R:color})\r\n                break\r\n            case 5:\r\n                this.setthemecolor({L:color})\r\n                break\r\n            default:\r\n                break\r\n        }\r\n        this.colord = false\r\n    }\r\n\r\n    \r\n\r\n    // 选择一种颜色预设\r\n    setcolorset(el,oneset){\r\n        let eles = el.currentTarget.getElementsByClassName('facecolor')\r\n        let colors = []\r\n        for (let ele of eles){\r\n            let color = window.getComputedStyle(ele).backgroundColor\r\n            colors.push(color)\r\n        }\r\n\r\n        for(let index in colors){\r\n            this.colorlist[index].color = colors[index]\r\n        }\r\n\r\n        let colorsobj = {\r\n            B: colors[0],\r\n            F: colors[1],\r\n            U: colors[2],\r\n            D: colors[3],\r\n            L: colors[4],\r\n            R: colors[5]\r\n        }   \r\n        this.setthemecolor(colorsobj) \r\n\r\n    }\r\n\r\n}\r\n\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=1c6a05e3&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=ts&\"\nexport * from \"./index.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=1c6a05e3&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1c6a05e3\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBottomSheet } from 'vuetify/lib/components/VBottomSheet';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VExpansionPanel } from 'vuetify/lib/components/VExpansionPanel';\nimport { VExpansionPanelContent } from 'vuetify/lib/components/VExpansionPanel';\nimport { VExpansionPanelHeader } from 'vuetify/lib/components/VExpansionPanel';\nimport { VExpansionPanels } from 'vuetify/lib/components/VExpansionPanel';\nimport { VFlex } from 'vuetify/lib/components/VGrid';\nimport { VLayout } from 'vuetify/lib/components/VGrid';\nimport { VListItemSubtitle } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSnackbar } from 'vuetify/lib/components/VSnackbar';\nimport { VTab } from 'vuetify/lib/components/VTabs';\nimport { VTabItem } from 'vuetify/lib/components/VTabs';\nimport { VTabs } from 'vuetify/lib/components/VTabs';\nimport { VTabsItems } from 'vuetify/lib/components/VTabs';\ninstallComponents(component, {VBottomSheet,VBtn,VCard,VCardTitle,VCol,VContainer,VExpansionPanel,VExpansionPanelContent,VExpansionPanelHeader,VExpansionPanels,VFlex,VLayout,VListItemSubtitle,VListItemTitle,VRow,VSnackbar,VTab,VTabItem,VTabs,VTabsItems})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticStyle:{\"padding\":\"0px\"},attrs:{\"fluid\":\"\"}},[_c('Render',{ref:\"render\",attrs:{\"worldin\":_vm.world,\"cubeconfig\":_vm.cubeconfig,\"cubesize\":_vm.cubesize}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"cube\",staticStyle:{\"text-align\":\"center\"},on:{\"mouseenter\":_vm.hoverin,\"mouseleave\":_vm.hoverout,\"touchstart\":_vm.hoverin,\"touchend\":_vm.hoverout}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export class TouchAction {\r\n  type: string;\r\n  x: number;\r\n  y: number;\r\n  constructor(type: string, x: number, y: number) {\r\n    this.type = type;\r\n    this.x = x;\r\n    this.y = y;\r\n  }\r\n}\r\n\r\nexport default class Toucher {\r\n  private offsetX: number = 0\r\n  private offsetY: number = 0\r\n\r\n  init(dom: HTMLElement, callback: Function) {\r\n    this.dom = dom;\r\n    this.callback = callback;\r\n    dom.addEventListener(\"touchstart\", this.touch);\r\n    dom.addEventListener(\"touchmove\", this.touch);\r\n    dom.addEventListener(\"touchend\", this.touch);\r\n    dom.addEventListener(\"touchcancel\", this.touch);\r\n\r\n    dom.addEventListener(\"mousedown\", this.mouse);\r\n    dom.addEventListener(\"mousemove\", this.mouse);\r\n    dom.addEventListener(\"mouseup\", this.mouse);\r\n    dom.addEventListener(\"mouseout\", this.mouse);\r\n  }\r\n  dom: HTMLElement;\r\n  callback: Function;\r\n\r\n\r\n  setoffset = (canvas: HTMLCanvasElement)=>{\r\n    // 不需要计算scroll值，只需要在scroll事件发生的时候重新计算一次即可\r\n    [this.offsetX,this.offsetY] =  [canvas.getBoundingClientRect().left,canvas.getBoundingClientRect().top]\r\n  }\r\n\r\n  mouse = (event: MouseEvent) => {\r\n    this.dom.tabIndex = 1;\r\n    this.dom.focus();\r\n    let action = new TouchAction(event.type, event.clientX - this.offsetX, event.clientY- this.offsetY);\r\n    this.callback(action);\r\n    event.returnValue = false;\r\n    return false;\r\n  };\r\n\r\n  touch = (event: TouchEvent) => {\r\n    this.dom.tabIndex = 1;\r\n    this.dom.focus();\r\n    let touches = event.changedTouches;\r\n    let first = touches[0];\r\n    let action = new TouchAction(event.type, first.clientX- this.offsetX, first.clientY- this.offsetY);\r\n    this.callback(action);\r\n    event.preventDefault();\r\n    return true;\r\n  };\r\n}\r\n","export class Tween {\r\n  begin: number;\r\n  end: number;\r\n  duration: number;\r\n  callback: Function;\r\n  value: number;\r\n  delta: number;\r\n  constructor(begin: number, end: number, duration: number, callback: Function) {\r\n    this.begin = begin;\r\n    this.end = end;\r\n    this.duration = duration;\r\n    this.callback = callback;\r\n    this.value = 0;\r\n    this.delta = 1;\r\n  }\r\n\r\n  speedup() {\r\n    this.delta = 4;\r\n  }\r\n\r\n  finish() {\r\n    this.callback(this.end);\r\n  }\r\n\r\n  update() {\r\n    this.value = this.value + this.delta;\r\n    let elapsed = this.value / this.duration;\r\n    elapsed = elapsed > 1 ? 1 : elapsed;\r\n    elapsed = elapsed < 0 ? 0 : elapsed;\r\n    elapsed = elapsed - 1;\r\n    let value = 1 - elapsed * elapsed;\r\n    if (value == 1) {\r\n      this.callback(this.end);\r\n      return false;\r\n    }\r\n    this.callback(this.begin + (this.end - this.begin) * value);\r\n    return true;\r\n  }\r\n}\r\n\r\nexport class Tweener {\r\n  tweens: Tween[];\r\n\r\n  get length() {\r\n    return this.tweens.length;\r\n  }\r\n\r\n  constructor() {\r\n    this.tweens = [];\r\n    this.loop();\r\n  }\r\n\r\n  loop() {\r\n    requestAnimationFrame(this.loop.bind(this));\r\n    this.update();\r\n  }\r\n\r\n  tween(begin: number, end: number, duration: number, update: Function) {\r\n    this.tweens.push(new Tween(begin, end, duration, update));\r\n  }\r\n\r\n  update() {\r\n    if (this.tweens.length === 0) return false;\r\n    var i = 0;\r\n    while (i < this.tweens.length) {\r\n      if (this.tweens[i].update()) {\r\n        i++;\r\n      } else {\r\n        this.tweens.splice(i, 1);\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  speedup() {\r\n    for (const tween of this.tweens) {\r\n      tween.speedup();\r\n    }\r\n  }\r\n\r\n  finish() {\r\n    let tweens = this.tweens.splice(0, this.tweens.length);\r\n    for (const tween of tweens) {\r\n      tween.finish();\r\n    }\r\n  }\r\n}\r\n\r\nlet tweener = new Tweener();\r\nexport default tweener;\r\n","import tweener from \"./tweener\";\r\nimport World from \"./world\";\r\n\r\nexport default class Twister {\r\n  world: World;\r\n  queue: TwistAction[];\r\n  constructor(world: World) {\r\n    this.world = world;\r\n    this.queue = [];\r\n    this.world.callbacks.push(() => {\r\n      this.update();\r\n    });\r\n  }\r\n\r\n  static shuffle(order: number) {\r\n    let result = \"\";\r\n    let exps = [];\r\n    let last = -1;\r\n    let actions = [\"Uw\", \"Dw\", \"Rw\", \"Lw\", \"Fw\", \"Bw\"];\r\n    let axis = -1;\r\n    for (let i = 0; i < 3 * 3 * order; i++) {\r\n      let exp = [];\r\n      while (axis == last) {\r\n        axis = Math.floor(Math.random() * 3);\r\n      }\r\n      let side = Math.floor(Math.random() * 2);\r\n      let action = actions[axis * 2 + side];\r\n      let prefix = Math.ceil(Math.random() * Math.floor(order / 2));\r\n      if (prefix === 1) {\r\n        action = action[0];\r\n      }\r\n      if (prefix > 2) {\r\n        exp.push(prefix);\r\n      }\r\n      exp.push(action);\r\n      let suffix = Math.random();\r\n      if (suffix < 0.2) {\r\n        exp.push(\"2\");\r\n      } else if (suffix < 0.6) {\r\n        exp.push(\"'\");\r\n      }\r\n      exps.push(exp.join(\"\"));\r\n      last = axis;\r\n    }\r\n    result = exps.join(\" \");\r\n    return result;\r\n  }\r\n\r\n  get length() {\r\n    return this.queue.length;\r\n  }\r\n\r\n  finish() {\r\n    for (const action of this.queue) {\r\n      action.fast = true;\r\n    }\r\n    tweener.finish();\r\n  }\r\n\r\n  twist(exp: string, reverse = false, times = 1, fast = false, callback: Function | null = null) {\r\n    if (this.queue.length > 0) {\r\n      tweener.finish();\r\n      this.update();\r\n    }\r\n    tweener.speedup();\r\n    let node = new TwistNode(exp, reverse, times);\r\n    let list = node.parse();\r\n    for (let element of list) {\r\n      element.fast = fast;\r\n      this.queue.push(element);\r\n    }\r\n\r\n    // 如果传参有callback就把callback挂载在list的最后一个action上\r\n    // 这样就实现了，最后一步执行完之后调用callback\r\n    if(callback){\r\n      list[list.length-1].callback = callback\r\n    }\r\n    this.update();\r\n  }\r\n\r\n  push(action: TwistAction) {\r\n    this.queue.push(action);\r\n    this.update();\r\n  }\r\n\r\n  update() {\r\n    if (this.queue.length === 0) {\r\n      return;\r\n    }\r\n    if (this.world.cube.lock) {\r\n      return;\r\n    }\r\n    let twist = this.queue.shift();\r\n    if (undefined == twist) {\r\n      return;\r\n    }\r\n    this.start(twist);\r\n  }\r\n\r\n  start(action: TwistAction) {\r\n    if (action.group == \"#\") {\r\n      this.world.cube.reset();\r\n      this.world.cube.dirty = true;\r\n      this.world.cube.history.clear();\r\n      this.world.callback();\r\n      return;\r\n    }\r\n    if (action.group == \"*\") {\r\n      this.world.cube.reset();\r\n      this.world.cube.dirty = true;\r\n      let exp = Twister.shuffle(this.world.cube.order);\r\n      this.twist(exp, false, 1, true);\r\n      this.world.cube.history.clear();\r\n      this.world.cube.history.init = exp;\r\n      return;\r\n    }\r\n    let angle = -Math.PI / 2;\r\n    if (action.reverse) {\r\n      angle = -angle;\r\n    }\r\n    if (action.times) {\r\n      angle = angle * action.times;\r\n    }\r\n    let part = this.world.cube.groups.get(action.group);\r\n    if (part === undefined) {\r\n      this.update();\r\n      return;\r\n    }\r\n    part.angle = 0;\r\n    part.hold();\r\n\r\n    if (action.fast) {\r\n      part.angle = angle;\r\n    }\r\n    part.twist(angle);\r\n\r\n    // 如果这个action上挂载有callback就执行\r\n    setTimeout(() => {\r\n      if(action.callback){\r\n        action.callback()\r\n      }\r\n      return;\r\n    }, 800);\r\n    return;\r\n  }\r\n\r\n  undo() {\r\n    if (this.world.cube.history.length == 0) {\r\n      return;\r\n    }\r\n    this.finish();\r\n    if (this.world.cube.history.length == 0) {\r\n      return;\r\n    }\r\n    let last = this.world.cube.history.last;\r\n    let action = new TwistAction(last.group, !last.reverse, last.times);\r\n    this.push(action);\r\n  }\r\n}\r\n\r\nexport class TwistAction {\r\n  group: string;\r\n  reverse: boolean;\r\n  times: number;\r\n  fast: boolean;\r\n  callback: Function | null\r\n  constructor(exp: string, reverse: boolean = false, times: number = 1, fast: boolean = false,callback: Function | null = null) {\r\n    this.group = exp;\r\n    this.reverse = reverse;\r\n    this.times = times;\r\n    this.fast = fast;\r\n  }\r\n\r\n  get value() {\r\n    let times = this.times;\r\n    let reverse = this.reverse;\r\n    if (times === 3) {\r\n      times = 1;\r\n      reverse = !reverse;\r\n    }\r\n    if (times === 2) {\r\n      reverse = false;\r\n    }\r\n    return times == 0 ? \"\" : this.group + (reverse ? \"'\" : \"\") + (times == 1 ? \"\" : String(times));\r\n  }\r\n}\r\n\r\nexport class TwistNode {\r\n  static AFFIX = \"'Ww0123456789-\";\r\n  children: TwistNode[];\r\n  twist: TwistAction;\r\n  static SPLIT_SEGMENT(exp: string) {\r\n    let list = [];\r\n    let buffer = \"\";\r\n    let stack = 0;\r\n    let ready = false;\r\n    let note = false;\r\n    for (let i = 0; i < exp.length; i++) {\r\n      let c = exp.charAt(i);\r\n      if (c === \" \" && buffer.length == 0) {\r\n        continue;\r\n      }\r\n      if (c === \"/\" && exp.charAt(i + 1) === \"/\") {\r\n        i++;\r\n        note = true;\r\n        continue;\r\n      }\r\n      if (c === \"\\n\") {\r\n        note = false;\r\n        continue;\r\n      }\r\n      if (note) {\r\n        continue;\r\n      }\r\n      // 后缀可以持续增加\r\n      if (TwistNode.AFFIX.indexOf(c) >= 0) {\r\n        buffer = buffer.concat(c);\r\n        continue;\r\n      }\r\n      // 非后缀检查是否可以中断\r\n      if (buffer.length > 0 && stack == 0 && ready) {\r\n        list.push(buffer);\r\n        buffer = \"\";\r\n        i--;\r\n        ready = false;\r\n        continue;\r\n      }\r\n      //  如果有括号 记录stack\r\n      if (c === \"(\" || c === \"[\") {\r\n        buffer = buffer.concat(c);\r\n        stack++;\r\n        continue;\r\n      }\r\n      if (c === \")\" || c === \"]\") {\r\n        buffer = buffer.concat(c);\r\n        stack--;\r\n        continue;\r\n      }\r\n      ready = true;\r\n      buffer = buffer.concat(c);\r\n    }\r\n    if (buffer.length > 0) {\r\n      list.push(buffer);\r\n    }\r\n    return list;\r\n  }\r\n\r\n  static SPLIT_BRACKET(exp: string) {\r\n    let list = [];\r\n    let buffer = \"\";\r\n    let stack = 0;\r\n    for (let i = 0; i < exp.length; i++) {\r\n      let c = exp.charAt(i);\r\n      // 非后缀检查是否可以中断\r\n      if (stack == 0 && (c === \",\" || c === \":\")) {\r\n        list.push(buffer);\r\n        list.push(c);\r\n        buffer = \"\";\r\n        continue;\r\n      }\r\n      //  如果有括号 记录stack\r\n      if (c === \"(\" || c === \"[\") {\r\n        buffer = buffer.concat(c);\r\n        stack++;\r\n        continue;\r\n      }\r\n      if (c === \")\" || c === \"]\") {\r\n        buffer = buffer.concat(c);\r\n        stack--;\r\n        continue;\r\n      }\r\n      buffer = buffer.concat(c);\r\n    }\r\n    if (buffer.length > 0) {\r\n      list.push(buffer);\r\n    }\r\n    return list;\r\n  }\r\n\r\n  constructor(exp: string, reverse = false, times = 1) {\r\n    // 合法性校验\r\n    this.children = [];\r\n    this.twist = new TwistAction(exp, reverse, times);\r\n    // 不用解析场景\r\n    if (exp.match(/^[0123456789-]*[\\*~.#xyzbsfdeulmr][w]*$/gi)) {\r\n      if (/[XYZ]/.test(this.twist.group)) {\r\n        this.twist.group = this.twist.group.toLowerCase();\r\n      }\r\n      return;\r\n    }\r\n    let list = TwistNode.SPLIT_SEGMENT(exp);\r\n    for (let item of list) {\r\n      let values;\r\n      // 只有[]\r\n      values = item.match(/^\\[(.+[:|,].+)\\]$/i);\r\n      if (values) {\r\n        values = TwistNode.SPLIT_BRACKET(values[1]);\r\n        switch (values[1]) {\r\n          case \",\":\r\n            this.children.push(new TwistNode(values[0], false, 1));\r\n            this.children.push(new TwistNode(values[2], false, 1));\r\n            this.children.push(new TwistNode(values[0], true, 1));\r\n            this.children.push(new TwistNode(values[2], true, 1));\r\n            break;\r\n          case \":\":\r\n            this.children.push(new TwistNode(values[0], false, 1));\r\n            this.children.push(new TwistNode(values[2], false, 1));\r\n            this.children.push(new TwistNode(values[0], true, 1));\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        continue;\r\n      }\r\n      // []'2\r\n      values = item.match(/^(\\[.+[:|,].+\\])('?)(\\d*)('?)$/i);\r\n      if (values === null) {\r\n        // 拆解括号\r\n        values = item.match(/^\\((.+)\\)('?)(\\d*)('?)$/i);\r\n      }\r\n      // 无括号\r\n      if (values === null) {\r\n        values = item.match(/([0123456789-]*[\\*\\#~.xyzbsfdeulmr][w]*)('?)(\\d*)('?)/i);\r\n      }\r\n      // 异常情况\r\n      if (null === values) {\r\n        return;\r\n      }\r\n      let reverse = (values[2] + values[4]).length == 1;\r\n      let times = values[3].length == 0 ? 1 : parseInt(values[3]);\r\n      this.children.push(new TwistNode(values[1], reverse, times));\r\n    }\r\n  }\r\n\r\n  parse(reverse = false) {\r\n    reverse = this.twist.reverse !== reverse;\r\n    let _result: TwistAction[] = [];\r\n    if (0 !== this.children.length) {\r\n      for (var i = 0; i < this.twist.times; i++) {\r\n        for (var j = 0; j < this.children.length; j++) {\r\n          var n;\r\n          if (reverse) {\r\n            n = this.children[this.children.length - j - 1];\r\n          } else {\r\n            n = this.children[j];\r\n          }\r\n          var list = n.parse(reverse);\r\n          for (let element of list) {\r\n            _result.push(element);\r\n          }\r\n        }\r\n      }\r\n    } else if (this.twist.group != \"\") {\r\n      let action = new TwistAction(this.twist.group, reverse, this.twist.times);\r\n      _result.push(action);\r\n    }\r\n    return _result;\r\n  }\r\n\r\n  get value() {\r\n    return this.twist.value;\r\n  }\r\n}\r\n","import Cubelet from \"./cubelet\";\r\nimport { TwistAction } from \"./twister\";\r\nimport Cube from \"./cube\";\r\nimport * as THREE from \"three\";\r\nimport tweener from \"./tweener\";\r\n\r\nexport default class CubeGroup extends THREE.Group {\r\n  public static frames: number = 30;\r\n  cube: Cube;\r\n  cubelets: Cubelet[];\r\n  name: string;\r\n  indices: number[];\r\n  axis: THREE.Vector3;\r\n\r\n  _angle: number;\r\n  set angle(angle) {\r\n    this.setRotationFromAxisAngle(this.axis, angle);\r\n    this._angle = angle;\r\n    this.updateMatrix();\r\n    this.cube.dirty = true;\r\n  }\r\n  get angle() {\r\n    return this._angle;\r\n  }\r\n\r\n  constructor(cube: Cube, name: string, indices: number[], axis: THREE.Vector3) {\r\n    super();\r\n    this.cube = cube;\r\n    this._angle = 0;\r\n    this.cubelets = [];\r\n    this.name = name;\r\n    this.indices = indices;\r\n    this.axis = axis;\r\n    this.matrixAutoUpdate = false;\r\n    this.updateMatrix();\r\n  }\r\n\r\n  static AXIS_TABLE: { [key: string]: string } = {\r\n    x: \"R\",\r\n    y: \"U\",\r\n    z: \"F\",\r\n    \"-x\": \"L\",\r\n    \"-y\": \"D\",\r\n    \"-z\": \"B\",\r\n  };\r\n\r\n  static MES_TABLE: { [key: string]: string } = {\r\n    R: \"M'\",\r\n    U: \"E'\",\r\n    F: \"S\",\r\n    L: \"M\",\r\n    D: \"E\",\r\n    B: \"S'\",\r\n  };\r\n\r\n  exp(reverse: boolean, times: number) {\r\n    let group = this.name;\r\n    let values = this.name.match(/(^-?[xyz]):(\\d*):(\\d*$)/i);\r\n    if (values?.length == 4) {\r\n      let axis = values[1];\r\n      let from = Number(values[2]);\r\n      let to = Number(values[3]);\r\n      let half = (this.cube.order + 1) / 2;\r\n\r\n      // 找到哪个离得远\r\n      if (Math.abs(from - half) < Math.abs(to - half)) {\r\n        [from, to] = [to, from];\r\n      }\r\n      if (axis.length == 1 && from < half) {\r\n        axis = \"-\" + axis;\r\n        reverse = !reverse;\r\n      } else if (axis.length == 2 && from > half) {\r\n        axis = axis[1];\r\n        reverse = !reverse;\r\n      }\r\n      if (axis.length == 1) {\r\n        from = this.cube.order - from + 1;\r\n        to = this.cube.order - to + 1;\r\n      }\r\n      group = CubeGroup.AXIS_TABLE[axis];\r\n      if (from == to) {\r\n        if (from === half) {\r\n          group = CubeGroup.MES_TABLE[group].toUpperCase();\r\n          if (group.length == 2) {\r\n            group = group[0];\r\n            reverse = !reverse;\r\n          }\r\n        } else {\r\n          group = (from === 1 ? \"\" : String(from)) + group;\r\n        }\r\n      } else {\r\n        if (from === 1 && to === this.cube.order) {\r\n          // xyz\r\n          group = axis;\r\n          if (group.length == 2) {\r\n            group = group[1];\r\n            reverse = !reverse;\r\n          }\r\n        } else if (from === 2 && to === this.cube.order - 1) {\r\n          // mes\r\n          group = CubeGroup.MES_TABLE[group].toLowerCase();\r\n          if (group.length == 2) {\r\n            group = group[0];\r\n            reverse = !reverse;\r\n          }\r\n        } else if (from === 1) {\r\n          group = (to > 2 ? String(to) : \"\") + group + \"w\";\r\n        } else {\r\n          group = String(from) + \"-\" + String(to) + group + \"w\";\r\n        }\r\n      }\r\n    }\r\n    return new TwistAction(group, reverse, times);\r\n  }\r\n\r\n  hold() {\r\n    this.angle = 0;\r\n    for (let i of this.indices) {\r\n      let cubelet = this.cube.cubelets[i];\r\n      this.cubelets.push(cubelet);\r\n      this.cube.remove(cubelet);\r\n      this.add(cubelet);\r\n    }\r\n    this.cube.lock = true;\r\n  }\r\n\r\n  drop() {\r\n    this.angle = Math.round(this.angle / (Math.PI / 2)) * (Math.PI / 2);\r\n    while (true) {\r\n      let cubelet = this.cubelets.pop();\r\n      if (undefined === cubelet) {\r\n        break;\r\n      }\r\n      this.rotate(cubelet);\r\n      this.remove(cubelet);\r\n      this.cube.add(cubelet);\r\n      this.cube.cubelets[cubelet.index] = cubelet;\r\n    }\r\n    this.cube.lock = false;\r\n    if (this.angle != 0) {\r\n      this.cube.update();\r\n    }\r\n    this.angle = 0;\r\n  }\r\n\r\n  twist(angle = this.angle) {\r\n    angle = Math.round(angle / (Math.PI / 2)) * (Math.PI / 2);\r\n    let reverse = angle > 0;\r\n    let times = Math.round(Math.abs(angle) / (Math.PI / 2));\r\n    if (times != 0) {\r\n      this.cube.record(this.exp(reverse, times));\r\n    }\r\n    let delta = angle - this.angle;\r\n    if (delta === 0) {\r\n      this.drop();\r\n    } else {\r\n      let d = Math.abs(delta) / (Math.PI / 2);\r\n      var duration = CubeGroup.frames * (2 - 2 / (d + 1));\r\n      tweener.tween(this.angle, angle, duration, (value: number) => {\r\n        this.angle = value;\r\n        if (Math.abs(this.angle - angle) < 1e-6) {\r\n          this.drop();\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  rotate(cubelet: Cubelet) {\r\n    cubelet.rotateOnWorldAxis(this.axis, this.angle);\r\n    cubelet.vector = cubelet.vector.applyAxisAngle(this.axis, this.angle);\r\n    cubelet.updateMatrix();\r\n  }\r\n}\r\n\r\nexport class GroupTable {\r\n  private order: number;\r\n  private groups: Map<string, CubeGroup> = new Map();\r\n\r\n  public static FORMAT(axis: string, from: number, to: number) {\r\n    return axis + \":\" + from + \":\" + to;\r\n  }\r\n\r\n  public static readonly AXIS_VECTOR: { [key: string]: THREE.Vector3 } = {\r\n    a: new THREE.Vector3(1, 1, 1),\r\n    x: new THREE.Vector3(1, 0, 0),\r\n    y: new THREE.Vector3(0, 1, 0),\r\n    z: new THREE.Vector3(0, 0, 1),\r\n    \"-x\": new THREE.Vector3(-1, 0, 0),\r\n    \"-y\": new THREE.Vector3(0, -1, 0),\r\n    \"-z\": new THREE.Vector3(0, 0, -1),\r\n  };\r\n  constructor(cube: Cube) {\r\n    this.order = cube.order;\r\n    // 根据魔方阶数生成所有正向group\r\n    for (let axis of [\"x\", \"y\", \"z\"]) {\r\n      for (let from = 1; from <= this.order; from++) {\r\n        for (let to = from; to <= this.order; to++) {\r\n          let name = GroupTable.FORMAT(axis, from, to);\r\n          this.groups.set(name, new CubeGroup(cube, name, [], GroupTable.AXIS_VECTOR[axis]));\r\n        }\r\n      }\r\n    }\r\n    // 块类型group\r\n    for (let type of [\"center\", \"edge\", \"corner\"]) {\r\n      this.groups.set(type, new CubeGroup(cube, type, [], GroupTable.AXIS_VECTOR[\"a\"]));\r\n    }\r\n    // 将每个块索引放入x y z的每层中\r\n    for (const cubelet of cube.initials) {\r\n      let index = cubelet.initial;\r\n      let axis;\r\n      let layer;\r\n      let group;\r\n      let faces = 0;\r\n\r\n      axis = \"x\";\r\n      layer = (index % this.order) + 1;\r\n      if (layer == 1 || layer == this.order) {\r\n        faces++;\r\n      }\r\n      group = this.groups.get(GroupTable.FORMAT(axis, layer, layer));\r\n      if (!group) {\r\n        throw Error();\r\n      }\r\n      group.indices.push(cubelet.index);\r\n\r\n      axis = \"y\";\r\n      layer = Math.floor((index % (this.order * this.order)) / this.order) + 1;\r\n      if (layer == 1 || layer == this.order) {\r\n        faces++;\r\n      }\r\n      group = this.groups.get(GroupTable.FORMAT(axis, layer, layer));\r\n      if (!group) {\r\n        throw Error();\r\n      }\r\n      group.indices.push(cubelet.index);\r\n      axis = \"z\";\r\n      layer = Math.floor(index / (this.order * this.order)) + 1;\r\n      if (layer == 1 || layer == this.order) {\r\n        faces++;\r\n      }\r\n      group = this.groups.get(GroupTable.FORMAT(axis, layer, layer));\r\n      if (!group) {\r\n        throw Error();\r\n      }\r\n      group.indices.push(cubelet.index);\r\n\r\n      group = this.groups.get([\"\", \"center\", \"edge\", \"corner\"][faces]);\r\n      if (group) {\r\n        group.indices.push(cubelet.index);\r\n      }\r\n    }\r\n    // x y z的多层\r\n    for (let axis of [\"x\", \"y\", \"z\"]) {\r\n      for (let from = 1; from <= this.order; from++) {\r\n        for (let to = from + 1; to <= this.order; to++) {\r\n          let dst = this.groups.get(GroupTable.FORMAT(axis, from, to));\r\n          if (!dst) {\r\n            throw Error();\r\n          }\r\n          for (let i = from; i <= to; i++) {\r\n            let src = this.groups.get(GroupTable.FORMAT(axis, i, i));\r\n            if (!src) {\r\n              throw Error();\r\n            }\r\n            dst.indices.push(...src.indices);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // 通过正向group拷贝反向group\r\n    for (let axis of [\"-x\", \"-y\", \"-z\"]) {\r\n      for (let from = 1; from <= this.order; from++) {\r\n        for (let to = from; to <= this.order; to++) {\r\n          let template = this.groups.get(GroupTable.FORMAT(axis.replace(\"-\", \"\"), from, to));\r\n          if (!template) {\r\n            throw Error();\r\n          }\r\n          let name = GroupTable.FORMAT(axis, from, to);\r\n          this.groups.set(name, new CubeGroup(cube, name, template.indices, GroupTable.AXIS_VECTOR[axis]));\r\n        }\r\n      }\r\n    }\r\n    // 特殊处理整体旋转\r\n    for (let axis of [\"x\", \"y\", \"z\"]) {\r\n      let template = this.groups.get(GroupTable.FORMAT(axis.replace(\"-\", \"\"), 1, this.order));\r\n      if (!template) {\r\n        throw Error();\r\n      }\r\n      this.groups.set(axis, new CubeGroup(cube, axis, template.indices, GroupTable.AXIS_VECTOR[axis]));\r\n    }\r\n    for (const group of this.groups.values()) {\r\n      cube.add(group);\r\n    }\r\n    this.groups.set(\".\", new CubeGroup(cube, name, [], GroupTable.AXIS_VECTOR[\"a\"]));\r\n    this.groups.set(\"~\", new CubeGroup(cube, name, [], GroupTable.AXIS_VECTOR[\"a\"]));\r\n  }\r\n\r\n  private static AXIS_MAP: { [key: string]: string } = {\r\n    R: \"x\",\r\n    L: \"-x\",\r\n    U: \"y\",\r\n    D: \"-y\",\r\n    F: \"z\",\r\n    B: \"-z\",\r\n    M: \"-x\",\r\n    E: \"-y\",\r\n    S: \"z\",\r\n  };\r\n\r\n  get(name: string) {\r\n    let axis: string = \"\";\r\n    let from: number = 0;\r\n    let to: number = 0;\r\n    if (this.groups.get(name)) {\r\n      return this.groups.get(name);\r\n    }\r\n    if (name.match(/.[Ww]/)) {\r\n      name = name.toLowerCase().replace(\"w\", \"\");\r\n    }\r\n    if (/[XYZ]/.test(name)) {\r\n      name = name.toLowerCase();\r\n    }\r\n    if (name.length === 1) {\r\n      switch (name) {\r\n        case \"x\":\r\n        case \"y\":\r\n        case \"z\":\r\n          return this.groups.get(name);\r\n        case \"R\":\r\n        case \"L\":\r\n        case \"U\":\r\n        case \"D\":\r\n        case \"F\":\r\n        case \"B\":\r\n          axis = GroupTable.AXIS_MAP[name];\r\n          from = axis.length == 2 ? 1 : this.order;\r\n          to = from;\r\n          break;\r\n        case \"r\":\r\n        case \"l\":\r\n        case \"u\":\r\n        case \"d\":\r\n        case \"f\":\r\n        case \"b\":\r\n          axis = GroupTable.AXIS_MAP[name.toUpperCase()];\r\n          from = axis.length == 2 ? 1 : this.order;\r\n          to = axis.length == 2 ? 2 : this.order - 1;\r\n          break;\r\n        case \"E\":\r\n        case \"M\":\r\n        case \"S\":\r\n          axis = GroupTable.AXIS_MAP[name];\r\n          from = Math.floor((this.order + 1) / 2);\r\n          to = Math.ceil((this.order + 1) / 2);\r\n          break;\r\n        case \"e\":\r\n        case \"m\":\r\n        case \"s\":\r\n          axis = GroupTable.AXIS_MAP[name.toUpperCase()];\r\n          from = 2;\r\n          to = this.order - 1;\r\n          break;\r\n      }\r\n    } else {\r\n      let list = name.match(/([0123456789]*)(-?)([0123456789]*)([lrudfb])/i);\r\n      if (list == null) {\r\n        return undefined;\r\n      }\r\n      from = Number(list[1]);\r\n      to = Number(list[3]);\r\n      if (to === NaN || to === 0) {\r\n        if (/[lrudfb]/.test(list[4])) {\r\n          to = 1;\r\n        } else {\r\n          to = from;\r\n        }\r\n      }\r\n      axis = GroupTable.AXIS_MAP[list[4].toUpperCase()];\r\n      from = axis.length == 2 ? from : this.order - from + 1;\r\n      to = axis.length == 2 ? to : this.order - to + 1;\r\n    }\r\n    if (from > to) {\r\n      [from, to] = [to, from];\r\n    }\r\n    return this.groups.get(GroupTable.FORMAT(axis, from, to));\r\n  }\r\n}\r\n","import { FACE, COLORS } from \"./define\";\r\nimport * as THREE from \"three\";\r\n\r\nclass Frame extends THREE.Geometry {\r\n  private static readonly _INDICES = [\r\n    [0, 2, 1],\r\n    [0, 3, 2],\r\n    [4, 6, 5],\r\n    [4, 7, 6],\r\n    [8, 10, 9],\r\n    [8, 11, 10],\r\n    [12, 14, 13],\r\n    [12, 15, 14],\r\n    [16, 18, 17],\r\n    [16, 19, 18],\r\n    [20, 22, 21],\r\n    [20, 23, 22],\r\n    [1, 6, 7],\r\n    [0, 1, 7],\r\n    [3, 0, 10],\r\n    [11, 3, 10],\r\n    [17, 2, 3],\r\n    [16, 17, 3],\r\n    [23, 20, 1],\r\n    [2, 23, 1],\r\n    [5, 12, 13],\r\n    [4, 5, 13],\r\n    [9, 13, 14],\r\n    [8, 9, 14],\r\n    [22, 15, 12],\r\n    [21, 22, 12],\r\n    [19, 14, 15],\r\n    [18, 19, 15],\r\n    [7, 4, 9],\r\n    [10, 7, 9],\r\n    [11, 8, 19],\r\n    [16, 11, 19],\r\n    [23, 17, 18],\r\n    [22, 23, 18],\r\n    [20, 21, 5],\r\n    [6, 20, 5],\r\n    [20, 6, 1],\r\n    [10, 0, 7],\r\n    [21, 12, 5],\r\n    [13, 9, 4],\r\n    [23, 2, 17],\r\n    [11, 16, 3],\r\n    [22, 18, 15],\r\n    [8, 14, 19],\r\n  ];\r\n\r\n  constructor(size: number, border: number) {\r\n    super();\r\n    const _O = size / 2;\r\n    const _I = _O - border;\r\n    const _verts = [\r\n      //0: F Face\r\n      [-_I, +_I, +_O],\r\n      [+_I, +_I, +_O],\r\n      [+_I, -_I, +_O],\r\n      [-_I, -_I, +_O],\r\n      //4: U Face\r\n      [-_I, +_O, -_I],\r\n      [+_I, +_O, -_I],\r\n      [+_I, +_O, +_I],\r\n      [-_I, +_O, +_I],\r\n      //8: L Face\r\n      [-_O, -_I, -_I],\r\n      [-_O, +_I, -_I],\r\n      [-_O, +_I, +_I],\r\n      [-_O, -_I, +_I],\r\n      //12: B Face\r\n      [+_I, +_I, -_O],\r\n      [-_I, +_I, -_O],\r\n      [-_I, -_I, -_O],\r\n      [+_I, -_I, -_O],\r\n      //16: D Face\r\n      [-_I, -_O, +_I],\r\n      [+_I, -_O, +_I],\r\n      [+_I, -_O, -_I],\r\n      [-_I, -_O, -_I],\r\n      //20: R Face\r\n      [+_O, +_I, +_I],\r\n      [+_O, +_I, -_I],\r\n      [+_O, -_I, -_I],\r\n      [+_O, -_I, +_I],\r\n    ];\r\n\r\n    for (let i = 0; i < _verts.length; i++) {\r\n      let _vert = _verts[i];\r\n      this.vertices.push(new THREE.Vector3(_vert[0], _vert[1], _vert[2]));\r\n    }\r\n    for (let i = 0; i < Frame._INDICES.length; i++) {\r\n      let _indice = Frame._INDICES[i];\r\n      let _face = new THREE.Face3(_indice[0], _indice[1], _indice[2]);\r\n      this.faces.push(_face);\r\n    }\r\n    this.computeFaceNormals();\r\n  }\r\n}\r\n\r\nclass Sticker extends THREE.ExtrudeGeometry {\r\n  constructor(size: number, depth: number) {\r\n    size = size / 2;\r\n    let left = -size;\r\n    let bottom = size;\r\n    let top = -size;\r\n    let right = size;\r\n    let radius = size / 4;\r\n\r\n    let shape = new THREE.Shape();\r\n    shape.moveTo(left, top + radius);\r\n    shape.lineTo(left, bottom - radius);\r\n    shape.quadraticCurveTo(left, bottom, left + radius, bottom);\r\n    shape.lineTo(right - radius, bottom);\r\n    shape.quadraticCurveTo(right, bottom, right, bottom - radius);\r\n    shape.lineTo(right, top + radius);\r\n    shape.quadraticCurveTo(right, top, right - radius, top);\r\n    shape.lineTo(left + radius, top);\r\n    shape.quadraticCurveTo(left, top, left, top + radius);\r\n    shape.closePath();\r\n\r\n    super(shape, { bevelEnabled: false, depth: depth });\r\n  }\r\n}\r\n\r\nclass Mirror extends THREE.ShapeGeometry {\r\n  constructor(size: number) {\r\n    size = size / 2;\r\n    let left = -size;\r\n    let bottom = size;\r\n    let top = -size;\r\n    let right = size;\r\n    let radius = size / 4;\r\n\r\n    let shape = new THREE.Shape();\r\n    shape.moveTo(left, top + radius);\r\n    shape.lineTo(left, bottom - radius);\r\n    shape.quadraticCurveTo(left, bottom, left + radius, bottom);\r\n    shape.lineTo(right - radius, bottom);\r\n    shape.quadraticCurveTo(right, bottom, right, bottom - radius);\r\n    shape.lineTo(right, top + radius);\r\n    shape.quadraticCurveTo(right, top, right - radius, top);\r\n    shape.lineTo(left + radius, top);\r\n    shape.quadraticCurveTo(left, top, left, top + radius);\r\n    shape.closePath();\r\n\r\n    super(shape);\r\n  }\r\n}\r\n\r\nexport default class Cubelet extends THREE.Group {\r\n  public static readonly SIZE: number = 64;\r\n  private static readonly _BORDER_WIDTH: number = 3;\r\n  private static readonly _STICKER_DEPTH: number = 3;\r\n  private static readonly _FRAME: Frame = new Frame(Cubelet.SIZE, Cubelet._BORDER_WIDTH);\r\n  private static readonly _STICKER: Sticker = new Sticker(\r\n    Cubelet.SIZE - 2 * Cubelet._BORDER_WIDTH - Cubelet._STICKER_DEPTH,\r\n    Cubelet._STICKER_DEPTH\r\n  );\r\n  private static readonly _MIRROR: Mirror = new Mirror(\r\n    Cubelet.SIZE - 2 * Cubelet._BORDER_WIDTH - Cubelet._STICKER_DEPTH\r\n  );\r\n\r\n  public static LAMBERS = (() => {\r\n    let result: { [key: string]: THREE.MeshLambertMaterial } = {};\r\n    for (const key in COLORS) {\r\n      let color = COLORS[key];\r\n      result[key] = new THREE.MeshLambertMaterial({ color: color });\r\n    }\r\n    return result;\r\n  })();\r\n\r\n  public static PHONG = new THREE.MeshPhongMaterial({\r\n    color: COLORS.Core,\r\n    specular: 0x808080,\r\n    shininess: 8,\r\n  });\r\n\r\n  public static DEPTH = new THREE.MeshDepthMaterial({});\r\n\r\n  public static BASICS = (() => {\r\n    let result: { [key: string]: THREE.MeshBasicMaterial } = {};\r\n    for (const key in COLORS) {\r\n      let color = COLORS[key];\r\n      result[key] = new THREE.MeshBasicMaterial({ color: color });\r\n    }\r\n    return result;\r\n  })();\r\n\r\n  _vector: THREE.Vector3;\r\n\r\n  set vector(vector) {\r\n    let half = (this.order - 1) / 2;\r\n    let x = Math.round(vector.x * 2) / 2;\r\n    let y = Math.round(vector.y * 2) / 2;\r\n    let z = Math.round(vector.z * 2) / 2;\r\n    this._vector.set(x, y, z);\r\n    x = Math.round(x + half);\r\n    y = Math.round(y + half);\r\n    z = Math.round(z + half);\r\n    this._index = z * this.order * this.order + y * this.order + x;\r\n    this.position.x = Cubelet.SIZE * this._vector.x;\r\n    this.position.y = Cubelet.SIZE * this._vector.y;\r\n    this.position.z = Cubelet.SIZE * this._vector.z;\r\n  }\r\n  get vector() {\r\n    return this._vector;\r\n  }\r\n\r\n  _index: number;\r\n\r\n  set index(index) {\r\n    let half = (this.order - 1) / 2;\r\n    let _x = (index % this.order) - half;\r\n    let _y = Math.floor((index % (this.order * this.order)) / this.order) - half;\r\n    let _z = Math.floor(index / (this.order * this.order)) - half;\r\n    this.vector = new THREE.Vector3(_x, _y, _z);\r\n  }\r\n\r\n  get index(): number {\r\n    return this._index;\r\n  }\r\n\r\n  mirrors: THREE.Mesh[];\r\n  lamberts: (THREE.MeshLambertMaterial | undefined)[];\r\n  basics: (THREE.MeshBasicMaterial | undefined)[];\r\n  set mirror(value: boolean) {\r\n    if (value) {\r\n      for (let i = 0; i < 6; i++) {\r\n        if (this.mirrors[i] instanceof THREE.Mesh && this.children.indexOf(this.mirrors[i]) < 0) {\r\n          this.add(this.mirrors[i]);\r\n        }\r\n      }\r\n    } else {\r\n      for (let i = 0; i < 6; i++) {\r\n        if (this.mirrors[i] instanceof THREE.Mesh && this.children.indexOf(this.mirrors[i]) >= 0) {\r\n          this.remove(this.mirrors[i]);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  set cloud(value: boolean) {\r\n    if (this.frame instanceof THREE.Mesh) {\r\n      if (value) {\r\n        this.frame.material = Cubelet.DEPTH;\r\n      } else {\r\n        this.frame.material = Cubelet.PHONG;\r\n      }\r\n    }\r\n  }\r\n\r\n  set wireframe(value: boolean) {\r\n    if (value) {\r\n      if (this.box && this.children.indexOf(this.box) < 0) {\r\n        this.add(this.box);\r\n      }\r\n    } else {\r\n      if (this.box && this.children.indexOf(this.box) >= 0) {\r\n        this.remove(this.box);\r\n      }\r\n    }\r\n  }\r\n\r\n  set hollow(value: boolean) {\r\n    if (value) {\r\n      if (this.frame && this.children.indexOf(this.frame) >= 0) {\r\n        this.remove(this.frame);\r\n      }\r\n    } else {\r\n      if (this.frame && this.children.indexOf(this.frame) < 0) {\r\n        this.add(this.frame);\r\n      }\r\n    }\r\n  }\r\n\r\n  getColor(face: FACE) {\r\n    let position = new THREE.Vector3(0, 0, 0);\r\n    switch (face) {\r\n      case FACE.L:\r\n        position.x = -1;\r\n        break;\r\n      case FACE.R:\r\n        position.x = 1;\r\n        break;\r\n      case FACE.D:\r\n        position.y = -1;\r\n        break;\r\n      case FACE.U:\r\n        position.y = 1;\r\n        break;\r\n      case FACE.B:\r\n        position.z = -1;\r\n        break;\r\n      case FACE.F:\r\n        position.z = 1;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    this._quaternion.copy(this.quaternion);\r\n    position.applyQuaternion(this._quaternion.inverse());\r\n    let x = Math.round(position.x);\r\n    let y = Math.round(position.y);\r\n    let z = Math.round(position.z);\r\n    let color = 0;\r\n    if (x < 0) {\r\n      color = FACE.L;\r\n    } else if (x > 0) {\r\n      color = FACE.R;\r\n    } else if (y < 0) {\r\n      color = FACE.D;\r\n    } else if (y > 0) {\r\n      color = FACE.U;\r\n    } else if (z < 0) {\r\n      color = FACE.B;\r\n    } else if (z > 0) {\r\n      color = FACE.F;\r\n    }\r\n    return color;\r\n  }\r\n\r\n  initial: number;\r\n  stickers: THREE.Mesh[];\r\n  _quaternion: THREE.Quaternion;\r\n  frame: THREE.Mesh;\r\n  box: THREE.BoxHelper;\r\n  order: number;\r\n\r\n  constructor(order: number, index: number) {\r\n    super();\r\n    this.order = order;\r\n    this.initial = index;\r\n    this._vector = new THREE.Vector3();\r\n    this.index = index;\r\n    this.stickers = [];\r\n    this._quaternion = new THREE.Quaternion();\r\n    this.mirrors = [];\r\n\r\n    let xx = this.position.x * this.position.x;\r\n    let yy = this.position.y * this.position.y;\r\n    let zz = this.position.z * this.position.z;\r\n    let d = xx + yy + zz - Math.min(xx, yy, zz);\r\n    d = Math.sqrt(d) + (Math.sqrt(2) * Cubelet.SIZE) / 2 - (order * Cubelet.SIZE) / 2;\r\n    if (d < 0) {\r\n      return;\r\n    }\r\n    let half = (order - 1) / 2;\r\n\r\n    this.lamberts = [\r\n      this.vector.x == -half ? Cubelet.LAMBERS.L : undefined,\r\n      this.vector.x == half ? Cubelet.LAMBERS.R : undefined,\r\n      this.vector.y == -half ? Cubelet.LAMBERS.D : undefined,\r\n      this.vector.y == half ? Cubelet.LAMBERS.U : undefined,\r\n      this.vector.z == -half ? Cubelet.LAMBERS.B : undefined,\r\n      this.vector.z == half ? Cubelet.LAMBERS.F : undefined,\r\n    ];\r\n\r\n    this.basics = [\r\n      this.vector.x == -half ? Cubelet.BASICS.L : undefined,\r\n      this.vector.x == half ? Cubelet.BASICS.R : undefined,\r\n      this.vector.y == -half ? Cubelet.BASICS.D : undefined,\r\n      this.vector.y == half ? Cubelet.BASICS.U : undefined,\r\n      this.vector.z == -half ? Cubelet.BASICS.B : undefined,\r\n      this.vector.z == half ? Cubelet.BASICS.F : undefined,\r\n    ];\r\n\r\n    this.frame = new THREE.Mesh(Cubelet._FRAME, Cubelet.PHONG);\r\n    this.add(this.frame);\r\n    this.box = new THREE.BoxHelper(this.frame, new THREE.Color(COLORS.Gray));\r\n\r\n    for (let i = 0; i < 6; i++) {\r\n      if (this.lamberts[i] != undefined) {\r\n        let _sticker = new THREE.Mesh(Cubelet._STICKER, this.lamberts[i]);\r\n        _sticker.name = FACE[i];\r\n        switch (i) {\r\n          case FACE.L:\r\n            _sticker.rotation.y = -Math.PI / 2;\r\n            _sticker.position.x = -Cubelet.SIZE / 2;\r\n            break;\r\n          case FACE.R:\r\n            _sticker.rotation.y = Math.PI / 2;\r\n            _sticker.position.x = Cubelet.SIZE / 2;\r\n            break;\r\n          case FACE.D:\r\n            _sticker.rotation.x = Math.PI / 2;\r\n            _sticker.position.y = -Cubelet.SIZE / 2;\r\n            break;\r\n          case FACE.U:\r\n            _sticker.rotation.x = -Math.PI / 2;\r\n            _sticker.position.y = Cubelet.SIZE / 2;\r\n            break;\r\n          case FACE.B:\r\n            _sticker.rotation.x = Math.PI;\r\n            _sticker.position.z = -Cubelet.SIZE / 2;\r\n            break;\r\n          case FACE.F:\r\n            _sticker.rotation.x = 2 * Math.PI;\r\n            _sticker.position.z = Cubelet.SIZE / 2;\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        this.add(_sticker);\r\n        this.stickers[i] = _sticker;\r\n        let _mirror = new THREE.Mesh(Cubelet._MIRROR, this.basics[i]);\r\n        _mirror.rotation.x = _sticker.rotation.x == 0 ? 0 : _sticker.rotation.x + Math.PI;\r\n        _mirror.rotation.y = _sticker.rotation.y == 0 ? 0 : _sticker.rotation.y + Math.PI;\r\n        _mirror.rotation.z = _sticker.rotation.z == 0 ? 0 : _sticker.rotation.z + Math.PI;\r\n        if (_mirror.rotation.x + _mirror.rotation.y + _mirror.rotation.z == 0) {\r\n          _mirror.rotation.y = Math.PI;\r\n        }\r\n\r\n        _mirror.position.x = _sticker.position.x * 3;\r\n        _mirror.position.y = _sticker.position.y * 3;\r\n        _mirror.position.z = _sticker.position.z * 3;\r\n        this.add(_mirror);\r\n        this.mirrors[i] = _mirror;\r\n      }\r\n    }\r\n    this.matrixAutoUpdate = false;\r\n    this.updateMatrix();\r\n  }\r\n\r\n  stick(face: number, value: string) {\r\n    let lamber;\r\n    let basic;\r\n    if (this.stickers[face] === undefined) {\r\n      return;\r\n    }\r\n    if (value == \"remove\") {\r\n      this.stickers[face].visible = false;\r\n      return;\r\n    }\r\n    this.stickers[face].visible = true;\r\n    if (value == \"cloud\") {\r\n      lamber = Cubelet.DEPTH;\r\n      basic = Cubelet.DEPTH;\r\n    } else if (value && value.length > 0) {\r\n      lamber = Cubelet.LAMBERS[value];\r\n      basic = Cubelet.LAMBERS[value];\r\n    } else {\r\n      lamber = this.lamberts[face];\r\n      basic = this.basics[face];\r\n    }\r\n    if (lamber === undefined || basic === undefined) {\r\n      return;\r\n    }\r\n    this.stickers[face].material = lamber;\r\n    if (this.mirrors[face] instanceof THREE.Mesh) {\r\n      this.mirrors[face].material = basic;\r\n    }\r\n  }\r\n}\r\n","import { TwistAction } from \"./twister\";\r\n\r\nexport default class History {\r\n  list: TwistAction[] = [];\r\n  init: string = \"\";\r\n  exp: string = \"\";\r\n  constructor() {}\r\n\r\n  record(action: TwistAction) {\r\n    if (this.list.length == 0) {\r\n      action.times = action.times % 4;\r\n      if (action.times != 0) {\r\n        this.list.push(action);\r\n        this.exp = this.exp + \" \" + action.value;\r\n      }\r\n    } else {\r\n      let last = this.list[this.list.length - 1];\r\n      if (last.group == action.group) {\r\n        last.times = last.times + action.times * (last.reverse == action.reverse ? 1 : -1);\r\n        last.times = last.times % 4;\r\n        this.exp = this.exp.substring(0, this.exp.lastIndexOf(\" \"));\r\n        if (last.times == 0) {\r\n          this.list.pop();\r\n        } else {\r\n          this.exp = this.exp + \" \" + last.value;\r\n        }\r\n      } else {\r\n        this.list.push(action);\r\n        this.exp = this.exp + \" \" + action.value;\r\n      }\r\n    }\r\n  }\r\n\r\n  clear() {\r\n    this.list = [];\r\n    this.init = \"\";\r\n    this.exp = \"\";\r\n  }\r\n\r\n  get last() {\r\n    return this.list[this.list.length - 1];\r\n  }\r\n\r\n  get length() {\r\n    return this.list.length;\r\n  }\r\n\r\n  get moves() {\r\n    let length = this.length;\r\n    for (const twist of this.list) {\r\n      if (twist.group == \"x\" || twist.group == \"y\" || twist.group == \"z\") {\r\n        length--;\r\n      }\r\n    }\r\n    return length;\r\n  }\r\n}\r\n","import { GroupTable } from \"./group\";\r\nimport Cubelet from \"./cubelet\";\r\nimport { FACE, COLORS } from \"./define\";\r\nimport { Group, Euler } from \"three\";\r\nimport { TwistAction } from \"./twister\";\r\nimport History from \"./history\";\r\n\r\nexport default class Cube extends Group {\r\n  public dirty: boolean = true;\r\n  public lock: boolean = false;\r\n  public cubelets: Cubelet[] = [];\r\n  public initials: Cubelet[] = [];\r\n  public groups: GroupTable;\r\n  public complete: boolean = false;\r\n  public order: number;\r\n  public callback: Function;\r\n  public history: History;\r\n\r\n  constructor(order: number, callback: Function) {\r\n    super();\r\n    this.order = order;\r\n    this.callback = callback;\r\n    this.scale.set(3 / order, 3 / order, 3 / order);\r\n    for (var i = 0; i < order * order * order; i++) {\r\n      let cubelet = new Cubelet(order, i);\r\n      this.cubelets.push(cubelet);\r\n      this.initials.push(cubelet);\r\n      this.add(cubelet);\r\n    }\r\n    this.history = new History();\r\n    this.groups = new GroupTable(this);\r\n    this.matrixAutoUpdate = false;\r\n    this.updateMatrix();\r\n  }\r\n\r\n  record(action: TwistAction) {\r\n    this.history.record(action);\r\n  }\r\n\r\n  update() {\r\n    let complete = [FACE.U, FACE.D, FACE.L, FACE.R, FACE.F, FACE.B].every((face) => {\r\n      let group = this.groups.get(FACE[face]);\r\n      if (!group) {\r\n        throw Error();\r\n      }\r\n      let color = this.cubelets[group.indices[0]].getColor(face);\r\n      let same = group.indices.every((idx) => {\r\n        return color == this.cubelets[idx].getColor(face);\r\n      });\r\n      return same;\r\n    });\r\n    this.complete = complete;\r\n    this.callback();\r\n  }\r\n\r\n  index(value: number) {\r\n    return this.initials[value].index;\r\n  }\r\n\r\n  reset() {\r\n    for (let cubelet of this.cubelets) {\r\n      cubelet.setRotationFromEuler(new Euler(0, 0, 0));\r\n      cubelet.index = cubelet.initial;\r\n      cubelet.updateMatrix();\r\n    }\r\n    this.cubelets.sort((left, right) => {\r\n      return left.index - right.index;\r\n    });\r\n  }\r\n\r\n  stick(index: number, face: number, value: string) {\r\n    let cubelet = this.initials[index];\r\n    if (!cubelet) {\r\n      throw Error(\"invalid cubelet index: \" + index);\r\n    }\r\n    cubelet.stick(face, value);\r\n    this.dirty = true;\r\n  }\r\n\r\n  strip(strip: { [face: string]: number[] | undefined }) {\r\n    for (const face of [FACE.L, FACE.R, FACE.D, FACE.U, FACE.B, FACE.F]) {\r\n      let key = FACE[face];\r\n      let group = this.groups.get(key);\r\n      if (!group) {\r\n        throw Error();\r\n      }\r\n      for (const index of group.indices) {\r\n        this.initials[index].stick(face, \"\");\r\n      }\r\n      let indexes = strip[key];\r\n      if (indexes == undefined) {\r\n        continue;\r\n      }\r\n      for (const index of indexes) {\r\n        let cubelet = this.initials[index];\r\n        if (!cubelet) {\r\n          throw Error(\"invalid cubelet index: \" + index);\r\n        }\r\n        cubelet.stick(face, \"remove\");\r\n      }\r\n    }\r\n    this.dirty = true;\r\n  }\r\n\r\n  //                +------------+\r\n  //                | U1  U2  U3 |\r\n  //                |            |\r\n  //                | U4  U5  U6 |\r\n  //                |            |\r\n  //                | U7  U8  U9 |\r\n  //   +------------+------------+------------+------------+\r\n  //   | L1  L2  L3 | F1  F2  F3 | R1  R2  R3 | B1  B2  B3 |\r\n  //   |            |            |            |            |\r\n  //   | L4  L5  L6 | F4  F5  F6 | R4  R5  R6 | B4  B5  B6 |\r\n  //   |            |            |            |            |\r\n  //   | L7  L8  L9 | F7  F8  F9 | R7  R8  R9 | B7  B8  B9 |\r\n  //   +------------+------------+------------+------------+\r\n  //                | D1  D2  D3 |\r\n  //                |            |\r\n  //                | D4  D5  D6 |\r\n  //                |            |\r\n  //                | D7  D8  D9 |\r\n  //                +------------+\r\n  get state() {\r\n    let result = [];\r\n    for (let face of [FACE.U, FACE.R, FACE.F, FACE.D, FACE.L, FACE.B]) {\r\n      let group = this.groups.get(FACE[face]);\r\n      if (!group) {\r\n        throw Error();\r\n      }\r\n      for (let i of group.indices) {\r\n        result.push(this.cubelets[i].getColor(face));\r\n      }\r\n    }\r\n    return result.join(\"\");\r\n  }\r\n}\r\n","import { FACE } from \"./define\";\r\nimport Cubelet from \"./cubelet\";\r\nimport CubeGroup, { GroupTable } from \"./group\";\r\nimport { TouchAction } from \"../common/toucher\";\r\nimport { Vector3, Plane, Ray, Vector2, Matrix4 } from \"three\";\r\nimport World from \"./world\";\r\nimport tweener from \"./tweener\";\r\n\r\nexport class Holder {\r\n  public vector: Vector3;\r\n  public index: number;\r\n  public plane: Plane;\r\n  constructor() {\r\n    this.vector = new Vector3();\r\n  }\r\n}\r\n\r\nexport default class Controller {\r\n  public dragging = false;\r\n  public rotating = false;\r\n  public angle = 0;\r\n  public taps: Function[];\r\n  public ray = new Ray();\r\n  public down = new Vector2(0, 0);\r\n  public move = new Vector2(0, 0);\r\n  public matrix = new Matrix4();\r\n  public holder = new Holder();\r\n  public vector = new Vector3();\r\n  public group: CubeGroup | undefined;\r\n  public planes = [\r\n    new Plane(new Vector3(1, 0, 0), (-Cubelet.SIZE * 3) / 2),\r\n    new Plane(new Vector3(0, 1, 0), (-Cubelet.SIZE * 3) / 2),\r\n    new Plane(new Vector3(0, 0, 1), (-Cubelet.SIZE * 3) / 2),\r\n  ];\r\n  public _lock: boolean = false;\r\n  get lock() {\r\n    return this._lock;\r\n  }\r\n  set lock(value) {\r\n    this.handleUp();\r\n    this._lock = value;\r\n  }\r\n\r\n  public _disable: boolean = false;\r\n  get disable() {\r\n    return this._disable;\r\n  }\r\n  set disable(value) {\r\n    this.handleUp();\r\n    this._disable = value;\r\n  }\r\n\r\n  world: World;\r\n  sensitivity: number = 1;\r\n  constructor(world: World) {\r\n    this.world = world;\r\n    this.taps = [];\r\n    this.loop();\r\n  }\r\n\r\n  loop() {\r\n    requestAnimationFrame(this.loop.bind(this));\r\n    this.update();\r\n  }\r\n\r\n  update() {\r\n    if (this.rotating && this.group) {\r\n      if (this.group.angle != this.angle) {\r\n        let delta = (this.angle - this.group.angle) / 2;\r\n        this.group.angle += delta;\r\n        this.world.dirty = true;\r\n      }\r\n    }\r\n  }\r\n\r\n  match() {\r\n    let g: CubeGroup | undefined;\r\n    if (this.holder.index === -1) {\r\n      for (let ax of [\"x\", \"y\", \"z\"]) {\r\n        g = this.world.cube.groups.get(ax);\r\n        if (g?.axis.dot(this.holder.plane.normal) === 0) {\r\n          return g;\r\n        }\r\n      }\r\n    } else {\r\n      const plane = this.holder.plane.normal;\r\n      const finger = this.holder.vector;\r\n      const index = this.holder.index;\r\n      const order = this.world.cube.order;\r\n      for (let axis of [\"x\", \"y\", \"z\"]) {\r\n        let vector = GroupTable.AXIS_VECTOR[axis];\r\n        if (vector.dot(plane) === 0 && vector.dot(finger) === 0) {\r\n          let layer = 0;\r\n          switch (axis) {\r\n            case \"x\":\r\n              layer = index % order;\r\n              break;\r\n            case \"y\":\r\n              layer = Math.floor((index % (order * order)) / order);\r\n              break;\r\n            case \"z\":\r\n              layer = Math.floor(index / (order * order));\r\n              break;\r\n          }\r\n          layer = layer + 1;\r\n          return this.world.cube.groups.get(GroupTable.FORMAT(axis, layer, layer));\r\n        }\r\n      }\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  intersect(point: Vector2, plane: Plane) {\r\n    var x = (point.x / this.world.width) * 2 - 1;\r\n    var y = -(point.y / this.world.height) * 2 + 1;\r\n    this.ray.origin.setFromMatrixPosition(this.world.camera.matrixWorld);\r\n    this.ray.direction.set(x, y, 0.5).unproject(this.world.camera).sub(this.ray.origin).normalize();\r\n    this.ray.applyMatrix4(this.matrix.identity().getInverse(this.world.scene.matrix));\r\n    var result = new Vector3(Infinity, Infinity, Infinity);\r\n    this.ray.intersectPlane(plane, result);\r\n    return result;\r\n  }\r\n\r\n  handleDown() {\r\n    if (this.disable) {\r\n      return;\r\n    }\r\n    if (this.dragging || this.rotating) {\r\n      this.handleUp();\r\n    }\r\n    this.dragging = true;\r\n    this.holder.index = -1;\r\n    tweener.speedup();\r\n    let distance = 0;\r\n    this.planes.forEach((plane) => {\r\n      var point = this.intersect(this.down, plane);\r\n      if (point !== null) {\r\n        var x = point.x / Cubelet.SIZE / 3;\r\n        var y = point.y / Cubelet.SIZE / 3;\r\n        var z = point.z / Cubelet.SIZE / 3;\r\n        if (Math.abs(x) <= 0.5 && Math.abs(y) <= 0.5 && Math.abs(z) <= 0.5) {\r\n          let d =\r\n            Math.pow(point.x - this.ray.origin.x, 2) +\r\n            Math.pow(point.y - this.ray.origin.y, 2) +\r\n            Math.pow(point.z - this.ray.origin.z, 2);\r\n          if (distance == 0 || d < distance) {\r\n            this.holder.plane = plane;\r\n            let order = this.world.cube.order;\r\n            x = Math.ceil((x + 0.5) * order) - 1;\r\n            y = Math.ceil((y + 0.5) * order) - 1;\r\n            z = Math.ceil((z + 0.5) * order) - 1;\r\n            this.holder.index = z * order * order + y * order + x;\r\n            distance = d;\r\n            return;\r\n          }\r\n        }\r\n      }\r\n      return;\r\n    }, this);\r\n  }\r\n\r\n  handleMove() {\r\n    if (this.disable) {\r\n      return;\r\n    }\r\n    if (this.dragging) {\r\n      var dx = this.move.x - this.down.x;\r\n      var dy = this.move.y - this.down.y;\r\n      var d = Math.sqrt(dx * dx + dy * dy);\r\n      if (Math.min(this.world.width, this.world.height) / d > 128) {\r\n        return true;\r\n      }\r\n      tweener.finish();\r\n      if (this.world.cube.lock) {\r\n        this.dragging = false;\r\n        this.rotating = false;\r\n        return true;\r\n      }\r\n      this.dragging = false;\r\n      this.rotating = true;\r\n      if (this.holder.index === -1) {\r\n        if (dx * dx > dy * dy) {\r\n          this.group = this.world.cube.groups.get(\"y\");\r\n        } else {\r\n          let vector = new Vector3((Cubelet.SIZE * 3) / 2, 0, (Cubelet.SIZE * 3) / 2);\r\n          vector.applyMatrix4(this.world.scene.matrix).project(this.world.camera);\r\n          let half = this.world.width / 2;\r\n          let x = Math.round(vector.x * half + half);\r\n          if (this.down.x < x) {\r\n            this.group = this.world.cube.groups.get(\"x\");\r\n          } else {\r\n            this.group = this.world.cube.groups.get(\"z\");\r\n          }\r\n        }\r\n      } else {\r\n        var start = this.intersect(this.down, this.holder.plane);\r\n        var end = this.intersect(this.move, this.holder.plane);\r\n        this.vector.subVectors(end, start);\r\n        var x = this.vector.x;\r\n        var y = this.vector.y;\r\n        var z = this.vector.z;\r\n        var max = Math.max(Math.abs(x), Math.abs(y), Math.abs(z));\r\n        x = Math.abs(x) === max ? x : 0;\r\n        y = Math.abs(y) === max ? y : 0;\r\n        z = Math.abs(z) === max ? z : 0;\r\n        this.vector.set(x, y, z);\r\n        this.holder.vector.copy(this.vector.multiply(this.vector).normalize());\r\n\r\n        this.group = this.match();\r\n        this.vector.crossVectors(this.holder.vector, this.holder.plane.normal);\r\n        this.holder.vector.multiplyScalar(this.vector.x + this.vector.y + this.vector.z);\r\n      }\r\n      this.group?.hold();\r\n    }\r\n    if (this.rotating && this.group) {\r\n      if (this.holder.index === -1) {\r\n        var dx = this.move.x - this.down.x;\r\n        var dy = this.move.y - this.down.y;\r\n        if (this.group === this.world.cube.groups.get(\"y\")) {\r\n          this.angle = (((dx / Cubelet.SIZE) * Math.PI) / 6) * this.sensitivity;\r\n        } else if (this.group === this.world.cube.groups.get(\"x\")) {\r\n          this.angle = (((dy / Cubelet.SIZE) * Math.PI) / 6) * this.sensitivity;\r\n        } else if (this.group === this.world.cube.groups.get(\"z\")) {\r\n          this.angle = (((-dy / Cubelet.SIZE) * Math.PI) / 6) * this.sensitivity;\r\n        }\r\n      } else {\r\n        var start = this.intersect(this.down, this.holder.plane);\r\n        var end = this.intersect(this.move, this.holder.plane);\r\n        this.vector.subVectors(end, start).multiply(this.holder.vector);\r\n        this.angle =\r\n          ((((-(this.vector.x + this.vector.y + this.vector.z) *\r\n            (this.group.axis.x + this.group.axis.y + this.group.axis.z)) /\r\n            Cubelet.SIZE) *\r\n            Math.PI) /\r\n            6) *\r\n          this.sensitivity;\r\n      }\r\n    }\r\n  }\r\n\r\n  handleUp() {\r\n    if (this.dragging) {\r\n      let face = null;\r\n      switch (this.holder.plane) {\r\n        case this.planes[0]:\r\n          face = FACE.R;\r\n          break;\r\n        case this.planes[1]:\r\n          face = FACE.U;\r\n          break;\r\n        case this.planes[2]:\r\n          face = FACE.F;\r\n          break;\r\n      }\r\n      for (let tap of this.taps) {\r\n        tap(this.holder.index, face);\r\n      }\r\n    }\r\n    if (this.rotating) {\r\n      if (this.group && this.group !== null) {\r\n        if (!this.lock) {\r\n          if (Math.abs(this.angle) < Math.PI / 4) {\r\n            let tick = new Date().getTime();\r\n            let speed = Math.abs(this.angle) / (tick - this.tick);\r\n            if (speed > 0.001) {\r\n              this.angle = this.angle == 0 ? 0 : ((this.angle / Math.abs(this.angle)) * Math.PI) / 2;\r\n            }\r\n          }\r\n          this.group.twist(this.angle);\r\n        } else {\r\n          this.group.twist(0);\r\n        }\r\n      }\r\n    }\r\n    this.holder.index = -1;\r\n    this.dragging = false;\r\n    this.rotating = false;\r\n    this.world.dirty = true;\r\n  }\r\n\r\n  tick: number = new Date().getTime();\r\n  hover: number = -1;\r\n  touch = (action: TouchAction) => {\r\n    switch (action.type) {\r\n      case \"touchstart\":\r\n      case \"mousedown\":\r\n        this.down.x = action.x;\r\n        this.down.y = action.y;\r\n        this.tick = new Date().getTime();\r\n        this.handleDown();\r\n        break;\r\n      case \"mousemove\":\r\n      case \"touchmove\":\r\n        this.move.x = action.x;\r\n        this.move.y = action.y;\r\n        this.handleMove();\r\n        break;\r\n      case \"touchend\":\r\n      case \"touchcancel\":\r\n      case \"mouseup\":\r\n      case \"mouseout\":\r\n        this.handleUp();\r\n        break;\r\n      default:\r\n        return false;\r\n    }\r\n    return true;\r\n  };\r\n}\r\n","import Cube from \"./cube\";\r\nimport Cubelet from \"./cubelet\";\r\nimport { Scene, PerspectiveCamera, AmbientLight, DirectionalLight } from \"three\";\r\nimport Twister from \"./twister\";\r\nimport Controller from \"./controller\";\r\nimport { COLORS } from \"./define\";\r\n\r\nexport default class World {\r\n  public width: number = 1;\r\n  public height: number = 1;\r\n  public dirty: boolean = false;\r\n\r\n  public scene: Scene;\r\n  public camera: PerspectiveCamera;\r\n\r\n  public cube: Cube;\r\n\r\n  public ambient: AmbientLight;\r\n  public directional: DirectionalLight;\r\n\r\n  private cubes: Cube[] = [];\r\n  public callbacks: Function[] = [];\r\n\r\n  public twister: Twister;\r\n  public controller: Controller;\r\n\r\n  constructor() {\r\n    this.scene = new Scene();\r\n    this.scene.rotation.x = Math.PI / 6;\r\n    this.scene.rotation.y = -Math.PI / 4 + Math.PI / 16;\r\n\r\n    this.ambient = new AmbientLight(0xffffff, 0.8);\r\n    this.scene.add(this.ambient);\r\n    this.directional = new DirectionalLight(0xffffff, 0.2);\r\n    this.directional.position.set(Cubelet.SIZE, Cubelet.SIZE * 3, Cubelet.SIZE * 2);\r\n    this.scene.add(this.directional);\r\n\r\n    this.camera = new PerspectiveCamera(50, 1, 1, Cubelet.SIZE * 32);\r\n    this.camera.position.x = 0;\r\n    this.camera.position.y = 0;\r\n    this.camera.position.z = 0;\r\n\r\n    this.twister = new Twister(this);\r\n    this.controller = new Controller(this);\r\n    this.order = 3;\r\n  }\r\n\r\n  set order(value: number) {\r\n    this.scene.remove(this.cube);\r\n    if (this.cubes[value] == undefined) {\r\n      this.cubes[value] = new Cube(value, this.callback);\r\n    }\r\n    this.cube = this.cubes[value];\r\n    this.scene.add(this.cube);\r\n    this.dirty = true;\r\n  }\r\n\r\n  get order() {\r\n    return this.cube.order;\r\n  }\r\n\r\n  callback = () => {\r\n    for (let callback of this.callbacks) {\r\n      callback();\r\n    }\r\n  };\r\n\r\n  scale: number = 1;\r\n  perspective: number = 5;\r\n  resize() {\r\n    let min = this.height / Math.min(this.width, this.height) / this.scale / this.perspective;\r\n    let fov = (2 * Math.atan(min) * 180) / Math.PI;\r\n\r\n    this.camera.aspect = this.width / this.height;\r\n    this.camera.fov = fov;\r\n    let distance = Cubelet.SIZE * 3 * this.perspective;\r\n    this.camera.position.z = distance;\r\n    this.camera.near = distance - Cubelet.SIZE * 3;\r\n    this.camera.far = distance + Cubelet.SIZE * 8;\r\n    this.camera.lookAt(this.scene.position);\r\n    this.camera.updateProjectionMatrix();\r\n    this.dirty = true;\r\n  }\r\n}\r\n","import CubeGroup from \"./group\";\r\nimport World from \"./world\";\r\n\r\n\r\n\r\nexport default class Preferance {\r\n    private world: World;\r\n    constructor(world: World) {\r\n    this.world = world;\r\n    }\r\n    private data = {\r\n    version: \"0.1\",\r\n    scale: 50,\r\n    perspective: 50,\r\n    angle: 60,\r\n    gradient: 65,\r\n    frames: 20,\r\n    sensitivity: 3,\r\n    mirror: false,\r\n    hollow: false,\r\n    shadow: true,\r\n    };\r\n\r\n    load(value: string) {\r\n    let data = JSON.parse(value);\r\n    if (data.version === this.data.version) {\r\n        this.data = data;\r\n    }\r\n    }\r\n    get value() {\r\n    return JSON.stringify(this.data);\r\n    }\r\n\r\n    refresh() {\r\n    this.scale = this.data.scale;\r\n    this.perspective = this.data.perspective;\r\n    this.angle = this.data.angle;\r\n    this.gradient = this.data.gradient;\r\n    this.shadow = this.data.shadow;\r\n    this.frames = this.data.frames;\r\n    this.mirror = this.data.mirror;\r\n    this.hollow = this.data.hollow;\r\n    }\r\n\r\n    get scale() {\r\n    return this.data.scale;\r\n    }\r\n    set scale(value) {\r\n    if (this.data.scale != value) {\r\n        this.data.scale = value;\r\n    }\r\n    this.world.scale = value / 100 + 0.5;\r\n    this.world.resize();\r\n    }\r\n\r\n    get perspective() {\r\n    return this.data.perspective;\r\n    }\r\n    set perspective(value) {\r\n    if (this.data.perspective != value) {\r\n        this.data.perspective = value;\r\n    }\r\n    this.world.perspective = (100.1 / (value + 0.01)) * 4 - 3;\r\n    this.world.resize();\r\n    }\r\n\r\n    get angle() {\r\n    return this.data.angle;\r\n    }\r\n    set angle(value) {\r\n    if (this.data.angle != value) {\r\n        this.data.angle = value;\r\n    }\r\n    this.world.scene.rotation.y = ((value / 100 - 1) * Math.PI) / 2;\r\n    this.world.dirty = true;\r\n    }\r\n\r\n    get gradient() {\r\n    return this.data.gradient;\r\n    }\r\n    set gradient(value) {\r\n    if (this.data.gradient != value) {\r\n        this.data.gradient = value;\r\n    }\r\n    this.world.scene.rotation.x = ((1 - value / 100) * Math.PI) / 2;\r\n    this.world.dirty = true;\r\n    }\r\n\r\n    get shadow() {\r\n    return this.data.shadow;\r\n    }\r\n    set shadow(value) {\r\n    if (this.data.shadow != value) {\r\n        this.data.shadow = value;\r\n    }\r\n    if (value) {\r\n        this.world.ambient.intensity = 0.8;\r\n        this.world.directional.intensity = 0.2;\r\n    } else {\r\n        this.world.ambient.intensity = 1;\r\n        this.world.directional.intensity = 0;\r\n    }\r\n    this.world.dirty = true;\r\n    }\r\n\r\n    get frames() {\r\n    return this.data.frames;\r\n    }\r\n    set frames(value) {\r\n    if (this.data.frames != value) {\r\n        this.data.frames = value;\r\n    }\r\n    CubeGroup.frames = value;\r\n    }\r\n\r\n    get sensitivity() {\r\n    return this.data.sensitivity;\r\n    }\r\n    set sensitivity(value) {\r\n    if (this.data.sensitivity != value) {\r\n        this.data.sensitivity = value;\r\n    }\r\n    let i = (value - 3) / 2;\r\n    i = 2 ** i;\r\n    this.world.controller.sensitivity = i;\r\n    }\r\n\r\n    get mirror() {\r\n    return this.data.mirror;\r\n    }\r\n    set mirror(value) {\r\n    if (this.data.mirror != value) {\r\n        this.data.mirror = value;\r\n    }\r\n    for (let cubelet of this.world.cube.cubelets) {\r\n        cubelet.mirror = value;\r\n    }\r\n    this.world.dirty = true;\r\n    }\r\n\r\n    get hollow() {\r\n    return this.data.hollow;\r\n    }\r\n    set hollow(value: boolean) {\r\n    if (this.data.hollow != value) {\r\n        this.data.hollow = value;\r\n    }\r\n    for (let cubelet of this.world.cube.cubelets) {\r\n        cubelet.hollow = value;\r\n    }\r\n    this.world.dirty = true;\r\n    }\r\n}","import World from './world';\r\nimport { COLORS } from \"./define\";\r\nimport vm from \"../../../main\";\r\nimport Cubelet from \"./cubelet\";\r\n\r\nexport class Theme {\r\n    private world: World;\r\n    private default: string;\r\n    constructor(world: World) {\r\n      this.world = world;\r\n      this.default = JSON.stringify(COLORS);\r\n    }\r\n    private data: { version: string; dark: boolean; colors: { [key: string]: string } } = {\r\n      version: \"0.2\",\r\n      dark: false,\r\n      colors: {},\r\n    };\r\n  \r\n    load(value: string) {\r\n      let data = JSON.parse(value);\r\n      if (data.version === this.data.version) {\r\n        this.data = data;\r\n      }\r\n    }\r\n    get value() {\r\n      return JSON.stringify(this.data);\r\n    }\r\n  \r\n    refresh() {\r\n      this.dark = this.data.dark;\r\n      for (const key in this.data.colors) {\r\n        let value = this.data.colors[key];\r\n        if (value) {\r\n          COLORS[key] = value;\r\n          Cubelet.LAMBERS[key].color.set(value);\r\n          Cubelet.BASICS[key].color.set(value);\r\n          if (key == \"Core\") {\r\n            Cubelet.PHONG.color.set(value);\r\n          }\r\n        }\r\n      }\r\n      this.world.dirty = true;\r\n    }\r\n  \r\n    color(key: string, value: string) {\r\n      this.data.colors[key] = value;\r\n      COLORS[key] = value;\r\n      Cubelet.LAMBERS[key].color.set(value);\r\n      Cubelet.BASICS[key].color.set(value);\r\n      if (key == \"Core\") {\r\n        Cubelet.PHONG.color.set(value);\r\n      }\r\n      this.world.dirty = true;\r\n    }\r\n  \r\n    reset() {\r\n      this.data.colors = JSON.parse(this.default);\r\n      this.refresh();\r\n      this.data.colors = {};\r\n    }\r\n  \r\n    get dark() {\r\n      return this.data.dark;\r\n    }\r\n    set dark(value) {\r\n      if (this.data.dark != value) {\r\n        this.data.dark = value;\r\n      }\r\n      // vm.$vuetify.theme.dark = value;\r\n    }\r\n  }","\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport { Component, Inject,Prop, Ref, Watch } from \"vue-property-decorator\";\r\nimport { WebGLRenderer } from \"three\";\r\nimport { COLORS } from \"../../cuber/define\";\r\nimport Toucher from \"../../common/toucher\";\r\nimport World from \"../../cuber/world\";\r\nimport Preferance from '../../cuber/preferance';\r\nimport {Theme} from '../../cuber/theme';\r\nimport { CubeCongfig , Themeconfig, RenderConfig, Playerconfig, PreferanceConfig} from '../../cuber/interfaces';\r\nimport { random } from '../../../../../../cubing.js/src/puzzle-geometry/Perm';\r\nimport Cubelet from '../../cuber/cubelet';\r\nconst CubeStageMask = require('../../cuber/strip.json')\r\n\r\n\r\n@Component({name:'Render',components:{}})\r\nexport default class Render extends Vue{\r\n\r\n    // @Inject('world')\r\n    // 传入的cube\r\n    @Prop()\r\n    worldin: World\r\n\r\n    // 配置信息\r\n    @Prop()\r\n    cubeconfig: CubeCongfig\r\n\r\n\r\n    // 魔方大小\r\n    @Prop()\r\n    cubesize: number[]\r\n\r\n    // 画布所在的div\r\n    @Ref('cube')  canvasdiv: HTMLDivElement\r\n\r\n\r\n    world: World\r\n    // 渲染配置\r\n    renderconfig: RenderConfig = {}\r\n    \r\n    //属性配置\r\n    preferanceconfig: PreferanceConfig  = {}\r\n\r\n    // 动画播放配置\r\n    playerconfig: Playerconfig = {}\r\n    \r\n    // 主题配置\r\n    themeconfig: Themeconfig = {}\r\n    \r\n    // 魔方主要参数\r\n    preferance: Preferance;\r\n\r\n    // 魔方主题\r\n    theme: Theme\r\n\r\n    // 魔方名字\r\n    cubename: string\r\n\r\n    // 画布\r\n    canvas: HTMLCanvasElement\r\n\r\n    // 画布大小\r\n    size: number[]\r\n\r\n    //操控控制器\r\n    toucher: Toucher\r\n\r\n    //封面是否是图片\r\n    CoverImgOn: boolean\r\n    \r\n    // 封面图片\r\n    coverimg: HTMLImageElement\r\n    \r\n    // 动画action \r\n    action: string\r\n\r\n    // 渲染器\r\n    renderer: WebGLRenderer;\r\n\r\n    // loop记录\r\n    loop_id: number\r\n\r\n    // 循环播放公式记录settimeout的key值\r\n    looplay_id\r\n\r\n    // 保证同一时刻只有一个 loopplay函数执行\r\n    looplayRunning: boolean = false\r\n    // 自动播放公式 \r\n    autoplay_id\r\n\r\n    @Watch('cubesize')\r\n    onSizeChange(){\r\n        this.size = this.cubesize\r\n        if(this.CoverImgOn){\r\n            this.coverimg.style.width = `${this.size[0]}px`\r\n        }else{  \r\n            this.resize(this.size[0],this.size[1])\r\n        }\r\n    }\r\n\r\n    @Watch('cubeconfig')\r\n    onCubeConfigChange(){\r\n        this.loadCubeConfig()\r\n    }\r\n\r\n    constructor(){\r\n                super()\r\n                // 生成一个魔方\r\n                this.world = this.worldin ? this.worldin : new World()\r\n                this.preferance = new Preferance(this.world)\r\n                this.theme = new Theme(this.world)\r\n                // 读取总体模板\r\n                if(this.cubeconfig.model){\r\n                    try{\r\n                        let config: CubeCongfig = JSON.parse(window.localStorage.getItem(`cubeconfig:${this.cubeconfig.model}`))\r\n                        this.renderconfig = config.renderconfig\r\n                        this.playerconfig = config.playerconfig\r\n                        this.preferanceconfig = config.preferanceconfig\r\n                        this.themeconfig = config.themeconfig\r\n                    }catch{\r\n                        let config: CubeCongfig = JSON.parse(window.localStorage.getItem(`cubeconfig:casegroup`))\r\n                        this.renderconfig = config.renderconfig\r\n                        this.playerconfig = config.playerconfig\r\n                        this.preferanceconfig = config.preferanceconfig\r\n                        this.themeconfig = config.themeconfig\r\n                    }\r\n                }\r\n                // 读取render模板\r\n                if(this.cubeconfig.renderModelName){\r\n                    try{\r\n                        let config: RenderConfig = JSON.parse(window.localStorage.getItem(`render:${this.cubeconfig.renderModelName}`))\r\n                        this.renderconfig = config\r\n                    }catch{\r\n                        let config: RenderConfig = JSON.parse(window.localStorage.getItem(`render:casegroup`))\r\n                        this.renderconfig = config\r\n                    }\r\n                }\r\n\r\n                \r\n                // 读取preferance模板\r\n                if(this.cubeconfig.preferanceModelName){\r\n                    try{\r\n                        let config: PreferanceConfig = JSON.parse(window.localStorage.getItem(`preferance:${this.cubeconfig.preferanceModelName}`))\r\n                        this.preferanceconfig = config\r\n                    }catch{\r\n                        let config: PreferanceConfig = JSON.parse(window.localStorage.getItem(`preferance:casegroup`))\r\n                        this.preferanceconfig = config\r\n                    }\r\n                }\r\n\r\n                // 读取theme模板\r\n                if(this.cubeconfig.themeModelName){\r\n                    try{\r\n                        let config: Themeconfig = JSON.parse(window.localStorage.getItem(`theme:${this.cubeconfig.themeModelName}`))\r\n                        this.themeconfig = config\r\n                    }catch{\r\n                        let config: Themeconfig = JSON.parse(window.localStorage.getItem(`theme:casegroup`))\r\n                        this.themeconfig = config\r\n                    }\r\n                }\r\n\r\n\r\n                // 读取单独配置的renderconfig和preferanceconfig和playerconfig和themeconfig\r\n                for(let param in this.cubeconfig.renderconfig){\r\n                    this.renderconfig[param] = this.cubeconfig.renderconfig[param]\r\n                }\r\n\r\n                for(let param in this.cubeconfig.preferanceconfig){\r\n                    this.preferanceconfig[param] = this.cubeconfig.preferanceconfig[param]\r\n                }\r\n\r\n                for(let param in this.cubeconfig.playerconfig){\r\n                    this.playerconfig[param] = this.cubeconfig.playerconfig[param]\r\n                }\r\n\r\n                for(let param in this.cubeconfig.themeconfig){\r\n                    this.themeconfig[param] = this.cubeconfig.themeconfig[param]\r\n                }\r\n\r\n                // 保存主要配置\r\n                this.size = this.cubesize ? this.cubesize : (this.renderconfig.size || [200,200])\r\n                this.cubename = this.cubeconfig.cubename\r\n                this.CoverImgOn = this.renderconfig.coverImgNotModel\r\n                this.world.order = this.renderconfig.order || 3\r\n\r\n                // 不能再阶数选择之前\r\n                this.preferance.load(JSON.stringify(this.preferanceconfig))\r\n                this.preferance.refresh()\r\n\r\n                this.theme.load(JSON.stringify(this.themeconfig))\r\n                this.theme.refresh()\r\n\r\n                \r\n\r\n\r\n                // 设置遮罩层\r\n                if(this.world.order==3 && this.renderconfig.masktype){\r\n                    try{\r\n                        const strip = CubeStageMask[this.renderconfig.masktype].strip\r\n                        if(strip){\r\n                            this.world.cube.strip(strip)\r\n                        }\r\n                    }catch{\r\n\r\n                    }\r\n                    \r\n                }\r\n\r\n                this.world.cube.dirty = true\r\n\r\n                // 设置初始action\r\n                this.action = this.renderconfig.scene == \"^\" ? \"(\" + this.renderconfig.alg + \")'\" : this.renderconfig.alg\r\n\r\n                if(this.action){\r\n                    this.world.twister.finish();\r\n                    this.world.twister.twist(\"#\");\r\n                    this.world.twister.twist(this.action, false, 1, true);\r\n                    this.world.cube.history.clear();\r\n                }\r\n\r\n                // 魔方是否锁定，用controler 不能用 cube\r\n                this.world.controller.lock = this.playerconfig.lock\r\n    }\r\n\r\n\r\n    loadCubeConfig(){\r\n        console.log('load again')\r\n        if(this.cubeconfig){\r\n            // 读取总体模板\r\n                if(this.cubeconfig.model){\r\n                    try{\r\n                        let config: CubeCongfig = JSON.parse(window.localStorage.getItem(`cubeconfig:${this.cubeconfig.model}`))\r\n                        this.renderconfig = config.renderconfig\r\n                        this.playerconfig = config.playerconfig\r\n                        this.preferanceconfig = config.preferanceconfig\r\n                        this.themeconfig = config.themeconfig\r\n                    }catch{\r\n                        let config: CubeCongfig = JSON.parse(window.localStorage.getItem(`cubeconfig:casegroup`))\r\n                        this.renderconfig = config.renderconfig\r\n                        this.playerconfig = config.playerconfig\r\n                        this.preferanceconfig = config.preferanceconfig\r\n                        this.themeconfig = config.themeconfig\r\n                    }\r\n                }\r\n                // 读取render模板\r\n                if(this.cubeconfig.renderModelName){\r\n                    try{\r\n                        let config: RenderConfig = JSON.parse(window.localStorage.getItem(`render:${this.cubeconfig.renderModelName}`))\r\n                        this.renderconfig = config\r\n                    }catch{\r\n                        let config: RenderConfig = JSON.parse(window.localStorage.getItem(`render:casegroup`))\r\n                        this.renderconfig = config\r\n                    }\r\n                }\r\n\r\n                \r\n                // 读取preferance模板\r\n                if(this.cubeconfig.preferanceModelName){\r\n                    try{\r\n                        let config: PreferanceConfig = JSON.parse(window.localStorage.getItem(`preferance:${this.cubeconfig.preferanceModelName}`))\r\n                        this.preferanceconfig = config\r\n                    }catch{\r\n                        let config: PreferanceConfig = JSON.parse(window.localStorage.getItem(`preferance:casegroup`))\r\n                        this.preferanceconfig = config\r\n                    }\r\n                }\r\n\r\n                // 读取theme模板\r\n                if(this.cubeconfig.themeModelName){\r\n                    try{\r\n                        let config: Themeconfig = JSON.parse(window.localStorage.getItem(`theme:${this.cubeconfig.themeModelName}`))\r\n                        this.themeconfig = config\r\n                    }catch{\r\n                        let config: Themeconfig = JSON.parse(window.localStorage.getItem(`theme:casegroup`))\r\n                        this.themeconfig = config\r\n                    }\r\n                }\r\n\r\n\r\n                // 读取单独配置的renderconfig和preferanceconfig和playerconfig和themeconfig\r\n                for(let param in this.cubeconfig.renderconfig){\r\n                    this.renderconfig[param] = this.cubeconfig.renderconfig[param]\r\n                }\r\n\r\n                for(let param in this.cubeconfig.preferanceconfig){\r\n                    this.preferanceconfig[param] = this.cubeconfig.preferanceconfig[param]\r\n                }\r\n\r\n                for(let param in this.cubeconfig.playerconfig){\r\n                    this.playerconfig[param] = this.cubeconfig.playerconfig[param]\r\n                }\r\n\r\n                for(let param in this.cubeconfig.themeconfig){\r\n                    this.themeconfig[param] = this.cubeconfig.themeconfig[param]\r\n                }\r\n\r\n                // 保存主要配置\r\n                this.size = this.cubesize ? this.cubesize : (this.renderconfig.size || [200,200])\r\n                this.cubename = this.cubeconfig.cubename\r\n                this.CoverImgOn = this.renderconfig.coverImgNotModel\r\n                this.world.order = this.renderconfig.order || 3\r\n\r\n                // 不能再阶数选择之前\r\n                this.preferance.load(JSON.stringify(this.preferanceconfig))\r\n                this.preferance.refresh()\r\n\r\n                this.theme.load(JSON.stringify(this.themeconfig))\r\n                this.theme.refresh()\r\n\r\n                \r\n\r\n\r\n                // 设置遮罩层\r\n                if(this.world.order==3 && this.renderconfig.masktype){\r\n                    try{\r\n                        const strip = CubeStageMask[this.renderconfig.masktype].strip\r\n                        if(strip){\r\n                            this.world.cube.strip(strip)\r\n                        }\r\n                    }catch{\r\n\r\n                    }\r\n                    \r\n                }\r\n\r\n                this.world.cube.dirty = true\r\n\r\n                // 设置初始action\r\n                this.action = this.renderconfig.scene == \"^\" ? \"(\" + this.renderconfig.alg + \")'\" : this.renderconfig.alg\r\n\r\n                if(this.action){\r\n                    this.world.twister.finish();\r\n                    this.world.twister.twist(\"#\");\r\n                    this.world.twister.twist(this.action, false, 1, true);\r\n                    this.world.cube.history.clear();\r\n                }\r\n\r\n                // 魔方是否锁定，用controler 不能用 cube\r\n                this.world.controller.lock = this.playerconfig.lock\r\n        }\r\n    }\r\n\r\n    setThemeColors(config){\r\n        for(let con in config){\r\n        this.themeconfig.colors[con] = config[con]\r\n        }\r\n        const datajson = JSON.stringify(this.themeconfig)\r\n        this.theme.load(datajson)\r\n        this.theme.refresh()\r\n    }\r\n\r\n    resetThemeColors(){\r\n\r\n        if(this.cubeconfig.model){\r\n            let name = 'cubeconfig:' + this.cubeconfig.model\r\n            let cubeconfig =JSON.parse(window.localStorage.getItem(name))\r\n            this.themeconfig = cubeconfig.themeconfig \r\n        }\r\n        if(this.cubeconfig.themeModelName){\r\n            let name = 'theme:' + this.cubeconfig.themeModelName\r\n            let themeconfig =JSON.parse(window.localStorage.getItem(name))\r\n            this.themeconfig = themeconfig \r\n        }\r\n        this.theme.load(JSON.stringify(this.themeconfig))\r\n        this.theme.refresh()\r\n    }\r\n\r\n    saveThemeColors(){\r\n        const datajson = JSON.stringify(this.themeconfig)\r\n        if(this.cubeconfig.model){\r\n            let name = 'cubeconfig:' + this.cubeconfig.model\r\n            let cubeconfig =JSON.parse(window.localStorage.getItem(name))\r\n            cubeconfig.themeconfig = this.themeconfig\r\n            window.localStorage.setItem(name,JSON.stringify(cubeconfig))\r\n        }\r\n        if(this.cubeconfig.themeModelName){\r\n            let name = 'theme:' + this.cubeconfig.themeModelName\r\n            window.localStorage.setItem(name,datajson)\r\n        }\r\n    }\r\n\r\n    resize(width: number, height: number) {\r\n            this.world.width = width;\r\n            this.world.height = height;\r\n            this.world.resize();\r\n            this.renderer.setSize(width, height, true);\r\n            // let view = this.canvasdiv;\r\n            // if (view instanceof HTMLElement) {\r\n            //     view.style.width = width + \"px\";\r\n            //     view.style.height = height + \"px\";\r\n            //     }\r\n            this.world.dirty = true;\r\n    }\r\n\r\n    mounted() {\r\n        // 初始化画布\r\n        this.createrender()\r\n        // 封面是否渲染为图片\r\n        if(this.CoverImgOn){\r\n            // 根据渲染模型生成缩略图\r\n            const content = this.renderer.domElement.toDataURL(\"image/png\");\r\n            this.coverimg = document.createElement('img')\r\n            this.coverimg.style.objectFit = 'contain'\r\n            this.coverimg.style.width = this.size[0] + 'px'\r\n            this.coverimg.src = content\r\n            this.canvasdiv.appendChild(this.coverimg)\r\n            this.removerender()\r\n        }\r\n\r\n        if(this.playerconfig.autoplay && this.CoverImgOn== false){\r\n            this.autoplay()\r\n        }\r\n\r\n        this.loop()\r\n    }\r\n\r\n    // 绘制一帧画面\r\n    draw() {\r\n        if (this.world.dirty || this.world.cube.dirty) {\r\n        this.renderer.clear();\r\n        this.renderer.render(this.world.scene, this.world.camera);\r\n        this.world.dirty = false;\r\n        this.world.cube.dirty = false;\r\n        return true;\r\n        }\r\n        console.log('ininin')\r\n        return false;\r\n    }\r\n\r\n    //  设置操控偏移\r\n    setoffset(canvas: HTMLCanvasElement = this.canvas){\r\n        this.toucher.setoffset(canvas)\r\n    }\r\n\r\n\r\n\r\n    // 生成render、画第一帧、设置偏移\r\n    createrender(){\r\n         // 初始化画布\r\n        this.canvas = document.createElement(\"canvas\")\r\n        this.canvas.style.outline = \"none\";\r\n         // 初始化touch\r\n        this.toucher = new Toucher();\r\n        this.toucher.init(this.canvas, this.world.controller.touch);\r\n\r\n        this.renderer = new WebGLRenderer({\r\n            canvas: this.canvas,\r\n            antialias: true,\r\n            alpha: true,\r\n        });\r\n\r\n        this.renderer.autoClear = false;\r\n        this.renderer.setClearColor(COLORS.WHITE, 0);\r\n        this.renderer.setPixelRatio(window.devicePixelRatio);\r\n\r\n        // 画出canvas\r\n        this.canvasdiv.appendChild(this.renderer.domElement)\r\n        // 调整画布大小\r\n        this.resize(this.size[0],this.size[1])\r\n        // 画一帧\r\n        this.draw()\r\n        // 设置偏移\r\n        this.setoffset()\r\n    }\r\n\r\n    // 移除canvas 销毁render\r\n    removerender(){\r\n        // 销毁和清除renderer\r\n        this.renderer.clear()\r\n        this.renderer.dispose()\r\n        this.renderer = null\r\n\r\n        // 删除canvas 添加图片标签\r\n        this.canvasdiv.removeChild(this.canvas)\r\n        this.canvas = null\r\n    }\r\n\r\n    // 魔方回到初始状态\r\n    initcube(){\r\n         // 快速结束\r\n            this.world.twister.finish();\r\n            // 魔方复原\r\n            this.world.twister.twist(\"#\");\r\n            // 回到初始态\r\n            this.world.twister.twist(this.action, false, 1, true);\r\n            // 清除记录\r\n            this.world.cube.history.clear();\r\n    }\r\n\r\n    // 魔方循环播放\r\n    loopplay(){\r\n        if(this.looplayRunning==false){\r\n            this.looplayRunning = true\r\n            this.world.twister.twist(this.renderconfig.alg, false, 1, false, ()=>{\r\n                this.initcube()\r\n                this.looplay_id = setTimeout(() => {\r\n                    this.looplayRunning = false\r\n                    this.loopplay()\r\n                }, 2000);\r\n            })\r\n        }\r\n        \r\n    }\r\n\r\n    // 魔方循环播放\r\n    autoplay(){\r\n        this.world.twister.twist(this.renderconfig.alg, false, 1, false, ()=>{\r\n            this.initcube()\r\n            this.autoplay_id = setTimeout(() => {\r\n                this.autoplay()\r\n            }, 2000);\r\n        })\r\n    }\r\n\r\n\r\n    hoverin(){\r\n        \r\n        if(this.playerconfig.autoplay==false){\r\n            if(this.CoverImgOn){\r\n            // 生成render和重绘\r\n            this.coverimg.style.display = 'none'\r\n            this.createrender()\r\n            // 清除图片\r\n        }\r\n        if(this.playerconfig.hoverplay){\r\n            if(this.playerconfig.loop){\r\n                this.loopplay()\r\n            }else{\r\n                this.world.twister.twist(this.renderconfig.alg, false, 1, false);\r\n            }\r\n        }\r\n        this.loop()\r\n        }\r\n        \r\n    }\r\n\r\n    hoverout(){\r\n        if(this.playerconfig.autoplay==false){\r\n            // 重回起始状态\r\n            if(this.playerconfig.hoverplay){\r\n                if(this.playerconfig.loop){\r\n                    clearTimeout(this.looplay_id)\r\n                }\r\n                this.initcube()\r\n                this.looplayRunning = false\r\n            }\r\n\r\n            if(this.CoverImgOn){\r\n                // 绘制\r\n                // 没有这个魔方会节能，从而导致截图出现黑屏\r\n                this.world.dirty = true\r\n                this.draw()\r\n                // 根据渲染模型生成缩略图\r\n                const content = this.renderer.domElement.toDataURL(\"image/png\");\r\n                // 移除render\r\n                this.removerender()\r\n                // 修改图片属性\r\n                this.coverimg.style.display = ''\r\n                this.coverimg.style.objectFit = 'contain'\r\n                this.coverimg.src = content\r\n                cancelAnimationFrame(this.loop_id)\r\n            }else{\r\n\r\n            }\r\n            \r\n        }\r\n    }\r\n\r\n    loop() {\r\n        // 刷新\r\n        this.loop_id = requestAnimationFrame(this.loop.bind(this));\r\n        // 是否呼吸\r\n        if(this.playerconfig.breath){\r\n            let tick = new Date().getTime();\r\n            tick = (tick / 2000) * Math.PI;\r\n            tick = Math.sin(tick) / 32;\r\n            this.world.cube.position.y = tick * Cubelet.SIZE;\r\n            this.world.cube.rotation.y = (tick / 12) * Math.PI;\r\n            this.world.cube.updateMatrix();\r\n        }\r\n\r\n        // 是否自旋\r\n        if(this.playerconfig.autorotate){\r\n            let tick = new Date().getTime();\r\n            tick = (tick / 2000) * Math.PI;\r\n            this.world.cube.rotation.y = (tick / 12) * Math.PI;\r\n            this.world.cube.updateMatrix();\r\n        }\r\n        try{    \r\n            this.world.cube.dirty = true;\r\n            this.draw();\r\n        }catch{\r\n            cancelAnimationFrame(this.loop_id)\r\n        }\r\n        \r\n    }\r\n\r\n    touchin(da){\r\n        console.log('ininin',da)\r\n    }\r\n\r\n}\r\n\r\n\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=7836a0de&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=ts&\"\nexport * from \"./index.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7836a0de\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport {Component, Prop, Ref, Provide, Watch} from 'vue-property-decorator'\r\nimport Render from '../plugins/v4/vue/Render/index.vue';\r\nimport { CubeCongfig } from '../plugins/v4/cuber/interfaces'\r\nimport World from '../plugins/v4/cuber/world';\r\n\r\n@Component({name:'CubeSample',components:{Render}})\r\nexport default class CubeSample extends Vue{\r\n    constructor(){\r\n    super()\r\n    }\r\n\r\n    @Ref('render') render: Render\r\n\r\n    world: World = new World()\r\n\r\n    cubeconfig: CubeCongfig =  {\r\n            cubename : 'cubesample',\r\n            model: 'casegroup',\r\n            renderconfig:{\r\n                order:  3,\r\n                coverImgNotModel: false\r\n            },\r\n            playerconfig: {\r\n                hoverplay: false,\r\n                autoplay: false,\r\n                breath: true,\r\n                lock:true,\r\n                loop:false,\r\n                autorotate:true\r\n            }\r\n            }\r\n    cubesize: number[] = [400,400]\r\n\r\n    mounted(){\r\n      \r\n    }\r\n\r\n}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./v4cubesample.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./v4cubesample.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./v4cubesample.vue?vue&type=template&id=0a341536&scoped=true&\"\nimport script from \"./v4cubesample.vue?vue&type=script&lang=ts&\"\nexport * from \"./v4cubesample.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0a341536\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VContainer } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VContainer})\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue';\r\nimport {Component, Prop, Ref, Provide, Watch} from 'vue-property-decorator'\r\nimport {\r\n  State,\r\n  Getter,\r\n  Action,\r\n  Mutation,\r\n  namespace\r\n} from 'vuex-class'\r\n// import { CubeCongfig } from './plugins/v3/cuber/interfaces';\r\nimport { CubeCongfig } from './plugins/v4/cuber/interfaces';\r\nimport './plugins/icon.css'\r\nimport Statistic from './components/statistic.vue'\r\nimport Sponsor from './components/sponsor.vue'\r\nimport Hot from './components/hot.vue'\r\nimport Account from './components/account/index.vue'\r\nimport Vscube from './components/vscube/index.vue'\r\nimport Cubesample from './components/v4cubesample.vue'\r\n\r\n\r\n\r\n@Component({name:'App',components:{Account,Cubesample,Hot,Vscube,Sponsor,Statistic}})\r\nexport default class App extends Vue{\r\n  constructor(){\r\n    super()\r\n  }\r\n\r\n  @State Navigation\r\n  @Action setNavigation\r\n\r\n\r\n  @Ref('stats') statistic: Statistic  \r\n  @Ref('vscube') vscube: Vscube  \r\n  @Ref('cubesample') cubesample: Cubesample\r\n\r\n  // -1 means cycle model\r\n  sponsorindex: number = -1\r\n  showcubesample: boolean = false\r\n\r\n\r\n  activeBtn: number = 1\r\n  drawer:boolean = false\r\n  select:boolean = null\r\n  items = []\r\n  search = null\r\n  loading:boolean = null\r\n  config:boolean =  true\r\n  show2dOr3d:boolean = false\r\n  usephoneLayout: boolean = false\r\n  windowSize = { x: 0,y:0}\r\n  githuburl:string = 'https://github.com/kirahan/vue-ts-algdb-player'\r\n  \r\n\r\n  @Watch('drawer')\r\n  onDrawerChange(newvalue){\r\n    if(newvalue){\r\n      this.statistic.gsapdata()\r\n      this.showcubesample = false\r\n    }else{\r\n      // 折叠vscode的设置面板\r\n      this.vscube.tab = ''\r\n    }\r\n  }\r\n\r\n  //设置sponsor页面的index\r\n  setSponsorIndex(command){\r\n        this.sponsorindex = command.data\r\n    }\r\n\r\n  gotoMain(){\r\n      this.$router.push('/')\r\n    }\r\n  onresize(){\r\n      this.windowSize =  { x: window.innerWidth, y: window.innerHeight }\r\n      this.usephoneLayout = this.windowSize.x <600 ? true : false\r\n  }\r\n  created(){\r\n    this.windowSize =  { x: window.innerWidth, y: window.innerHeight }\r\n    this.usephoneLayout = this.windowSize.x <600 ? true : false\r\n    const nav: object[] = []\r\n    this.setNavigation(nav)\r\n    this.$vuetify.theme.dark = false\r\n  }\r\n\r\n  initlocalstorage(){\r\n     let temp: CubeCongfig = {\r\n            model: 'casegroup',\r\n            renderModelName: 'casegroup',\r\n            renderconfig:{\r\n                order: 3,\r\n                size: [300,300],\r\n                coverImgNotModel: true,\r\n                scene:'',\r\n                alg: \"\",\r\n                masktype: ''\r\n            },\r\n            preferanceModelName: 'casegroup',\r\n            preferanceconfig: {\r\n                    version: \"0.1\",\r\n                    scale: 50,\r\n                    perspective: 50,\r\n                    angle: 60,\r\n                    gradient: 65,\r\n                    frames: 20,\r\n                    sensitivity: 3,\r\n                    mirror: false,\r\n                    hollow: false,\r\n                    shadow: true,\r\n                },\r\n            playerconfig: {\r\n                autoplay: false,\r\n                loop: false,\r\n                hoverplay: true,\r\n                lock: true,\r\n                breath: false,\r\n                autorotate:false\r\n            },\r\n            themeModelName : 'casegroup',\r\n            themeconfig:{\r\n              version: \"0.2\",\r\n              dark: false,\r\n              colors: {\r\n                    L: \"#B71C1C\",\r\n                    R: \"#FF6D00\",\r\n                    D: \"#FFFFFF\",\r\n                    U: \"#FFD600\",\r\n                    F: \"#00A020\",\r\n                    B: \"#0D47A1\",\r\n                    Core: \"#202020\",\r\n                    High: \"#FF4081\",\r\n                    Gray: \"#606060\"\r\n              }\r\n            }\r\n            \r\n        }\r\n\r\n      let ren = JSON.stringify(temp.renderconfig)\r\n      let pre = JSON.stringify(temp.preferanceconfig)\r\n      let the = JSON.stringify(temp.themeconfig)\r\n      let caseg = JSON.stringify(temp)\r\n\r\n      if(!window.localStorage.getItem('theme:casegroup')){\r\n        window.localStorage.setItem('theme:casegroup', the)\r\n      }\r\n      if(!window.localStorage.getItem('render:casegroup')){\r\n        window.localStorage.setItem('render:casegroup', ren)\r\n      }\r\n      if(!window.localStorage.getItem('preferance:casegroup')){\r\n        window.localStorage.setItem('preferance:casegroup', pre)\r\n      }\r\n      if(!window.localStorage.getItem('cubeconfig:casegroup')){\r\n        window.localStorage.setItem('cubeconfig:casegroup', caseg)\r\n      }\r\n  }\r\n\r\n  mounted(){\r\n   this.initlocalstorage()\r\n  }\r\n\r\n\r\n  setThemeColors(config){\r\n      this.cubesample.render.setThemeColors(config)\r\n  }\r\n\r\n  resetThemeColors(){\r\n      this.cubesample.render.resetThemeColors()\r\n  }\r\n\r\n  saveThemeColors(){\r\n    this.cubesample.render.saveThemeColors()\r\n  }\r\n\r\n}\r\n\r\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=738f9c57&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\nimport { VAppBar } from 'vuetify/lib/components/VAppBar';\nimport { VAppBarNavIcon } from 'vuetify/lib/components/VAppBar';\nimport { VAutocomplete } from 'vuetify/lib/components/VAutocomplete';\nimport { VBadge } from 'vuetify/lib/components/VBadge';\nimport { VBottomNavigation } from 'vuetify/lib/components/VBottomNavigation';\nimport { VBreadcrumbs } from 'vuetify/lib/components/VBreadcrumbs';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VContent } from 'vuetify/lib/components/VContent';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VFooter } from 'vuetify/lib/components/VFooter';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAvatar } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VNavigationDrawer } from 'vuetify/lib/components/VNavigationDrawer';\nimport { VSubheader } from 'vuetify/lib/components/VSubheader';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VApp,VAppBar,VAppBarNavIcon,VAutocomplete,VBadge,VBottomNavigation,VBreadcrumbs,VBtn,VContent,VDivider,VFooter,VIcon,VList,VListItem,VListItemAvatar,VListItemContent,VListItemTitle,VNavigationDrawer,VSubheader,VToolbarTitle})\n\n\n/* vuetify-loader */\nimport installDirectives from \"!../node_modules/vuetify-loader/lib/runtime/installDirectives.js\"\nimport Resize from 'vuetify/lib/directives/resize'\ninstallDirectives(component, {Resize})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{directives:[{name:\"resize\",rawName:\"v-resize\",value:(_vm.onresize),expression:\"onresize\"}],attrs:{\"fluid\":\"\"}},[_c('v-row',{staticClass:\"home\"},[_c('v-col',{attrs:{\"cols\":\"8\",\"offset\":\"2\"}},[_c('v-card',{attrs:{\"elevation\":\"10\"}},[_c('v-card-title',{staticClass:\"display-1 font-weight-black justify-center align-center\"},[_vm._v(\" Puzzles \")])],1)],1),_c('v-col',{attrs:{\"cols\":\"8\",\"offset\":\"2\"}},[_c('v-row',_vm._l((_vm.data),function(puzzle,index){return _c('v-col',{key:index,attrs:{\"cols\":\"12\",\"sm\":\"6\"}},[_c('v-hover',{attrs:{\"open-delay\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar hover = ref.hover;\nreturn [_c('v-card',{staticClass:\"mx-auto\",attrs:{\"max-width\":\"350\",\"elevation\":hover ? 18 : 5,\"d-inline\":\"\"},on:{\"click\":function($event){return _vm.gotopage(puzzle.shortName)}}},[_c('Render',{attrs:{\"cubeconfig\":_vm.cubeconfig[index],\"cubesize\":_vm.cubesize}}),_c('v-card-title',{staticClass:\"display-1 font-weight-black justify-center align-center\"},[_vm._v(_vm._s(puzzle.name))])],1)]}}],null,true)})],1)}),1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n// @ is an alias to /src\r\nimport Vue from 'vue'\r\nimport {\r\n  State,\r\n  Getter,\r\n  Action,\r\n  Mutation,\r\n  namespace\r\n} from 'vuex-class'\r\nimport { Ref,Component } from 'vue-property-decorator'\r\n// import VisualCube from '../plugins/cubestack/vue/Algplayer/index.vue'\r\nimport Render from '../plugins/v4/vue/Render/index.vue';\r\nimport { CubeCongfig } from '../plugins/v4/cuber/interfaces'\r\n\r\n\r\n@Component({\r\n  name : 'HOME',\r\n  components: {\r\n    Render\r\n  }\r\n})\r\nexport default class Puzzles extends Vue{\r\n  constructor(){\r\n    super()\r\n  }\r\n  cubesize = []\r\n  cubeconfig: CubeCongfig[] = []\r\n  data = []\r\n\r\n  @State Navigation\r\n  @Action setNavigation\r\n  \r\n\r\n  async fetch(){\r\n    const res22 = await this.$http.get('algdb/puzzles/222')\r\n    const res33 = await this.$http.get('algdb/puzzles/333')\r\n    this.data = [res22.data,res33.data]\r\n    for(let _cube of this.data){\r\n          this.cubeconfig.push({\r\n            cubename : _cube.name,\r\n            model: 'home',\r\n            renderconfig: {\r\n              order: _cube.shortName == '222'? 2: 3,\r\n              coverImgNotModel: false,\r\n              alg: \"(RUR'U')6\"\r\n            },\r\n\r\n            playerconfig: {\r\n              autoplay: false,\r\n              loop: false,\r\n              hoverplay: true,\r\n              breath: true,\r\n              lock: true\r\n            }\r\n          })\r\n    }\r\n\r\n    console.log(this.cubeconfig)\r\n  \r\n  }\r\n\r\n\r\n  onresize(){\r\n    const width = window.innerWidth\r\n          // let size = []\r\n          if(width<600){\r\n                  this.cubesize = [150,150]\r\n              }else if(width<960){\r\n                  this.cubesize = [200,200]\r\n              }else if(width<1264){\r\n                  this.cubesize = [250,250]\r\n              }else if(width<1904){\r\n                  this.cubesize = [300,300]\r\n              }else{\r\n                  this.cubesize = [350,350]\r\n              }\r\n    }\r\n\r\n\r\n  gotopage(puzzleshortname: string){\r\n    this.$router.push(`/puzzle/${puzzleshortname}`)\r\n  }\r\n  created(){\r\n    this.fetch()\r\n    const nav: object[] = []\r\n    this.setNavigation(nav)\r\n  }\r\n}\r\n\r\n\r\n\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=28665c2a&\"\nimport script from \"./Home.vue?vue&type=script&lang=ts&\"\nexport * from \"./Home.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VHover } from 'vuetify/lib/components/VHover';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VCard,VCardTitle,VCol,VContainer,VHover,VRow})\n\n\n/* vuetify-loader */\nimport installDirectives from \"!../../node_modules/vuetify-loader/lib/runtime/installDirectives.js\"\nimport Resize from 'vuetify/lib/directives/resize'\ninstallDirectives(component, {Resize})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{directives:[{name:\"resize\",rawName:\"v-resize\",value:(_vm.onresize),expression:\"onresize\"}],attrs:{\"fluid\":\"\"}},[_c('v-row',{staticClass:\"setorsubset\"},[_c('v-col',{attrs:{\"cols\":\"6\",\"offset\":\"3\",\"sm\":\"8\",\"offset-sm\":\"2\",\"xs\":\"6\",\"offset-xs\":\"3\"}},[_c('v-card',{attrs:{\"elevation\":\"10\"}},[_c('v-card-title',{staticClass:\"display-1 font-weight-black justify-center align-center\"},[_vm._v(\" \"+_vm._s(_vm.shortname)+\" \")])],1)],1),_c('v-col',{attrs:{\"cols\":\"9\",\"offset\":\"1\",\"sm\":\"8\",\"offset-sm\":\"2\",\"xs\":\"12\"}},[_c('v-row',_vm._l((_vm.puzzleSets),function(puzzleSet,index){return _c('v-col',{key:index,attrs:{\"cols\":\"6\",\"lg\":\"3\",\"md\":\"4\",\"sm\":\"3\"}},[_c('v-hover',{attrs:{\"open-delay\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar hover = ref.hover;\nreturn [_c('v-card',{staticClass:\"mx-auto\",attrs:{\"max-width\":\"250\",\"elevation\":hover ? 18 : 5,\"d-inline\":\"\"},on:{\"click\":function($event){return _vm.gotopage(puzzleSet.shortName)}}},[_c('Render',{attrs:{\"cubeconfig\":_vm.cubeconfig[index],\"cubesize\":_vm.cubesize}}),_c('v-card-title',{staticClass:\"justify-center align-center font-weight-black\",style:(_vm.titlestyle)},[_vm._v(_vm._s(puzzleSet.name))])],1)]}}],null,true)})],1)}),1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport {\r\n  State,\r\n  Getter,\r\n  Action,\r\n  Mutation,\r\n  namespace\r\n} from 'vuex-class'\r\nimport {Component, Prop} from 'vue-property-decorator'\r\nimport { CubeCongfig } from '../plugins/v4/cuber/interfaces'\r\nimport Render from '../plugins/v4/vue/Render/index.vue';\r\n\r\n\r\n@Component({name:'showSetOrSubSet',components:{Render}})\r\nexport default class Puzzles extends Vue{\r\n  \r\n  \r\n  @Prop()\r\n  hassubset: boolean\r\n\r\n  @Prop()\r\n  shortname: string \r\n\r\n  @State Navigation\r\n  @Action setNavigation\r\n\r\n  puzzleSets = []\r\n  titlestyle = 'font-size:12px'\r\n  windowSize: any = { x: 0,y:0}\r\n\r\n\r\n  cubeconfig: CubeCongfig[] = []\r\n  cubesize: number[] \r\n\r\n  async fetch(){\r\n    if(this.hassubset){\r\n        const res = await this.$http.get(`algdb/puzzlesubset?set=${this.shortname}`)\r\n        this.puzzleSets = res.data.data\r\n    }else{\r\n       const res = await this.$http.get(`algdb/puzzleset?puzzle=${this.shortname}`)\r\n        this.puzzleSets = res.data.data\r\n    }\r\n    for(let puzzleset of this.puzzleSets){\r\n          this.cubeconfig.push({\r\n            cubename : puzzleset.name,\r\n            model: 'puzzleset',\r\n            renderconfig:{\r\n                order: puzzleset.puzzle == '222'? 2: 3,\r\n                scene:'^',\r\n                alg: puzzleset.genAlgs || '',\r\n                masktype: puzzleset.shortName\r\n            },\r\n            playerconfig: {\r\n              hoverplay: false,\r\n              breath: true\r\n            }\r\n        })\r\n    }\r\n\r\n    \r\n      const params = this.$route.path.split('/')\r\n      const nav: object[] = [{\r\n          text:'Home',\r\n          disabled:false,\r\n          to:'/',\r\n      }]\r\n      console.log(params)\r\n      if(params[1]=='puzzle'){\r\n          nav.push({\r\n          text: params[2],\r\n          disabled:true,\r\n          to:`/puzzle/${params[2]}`,\r\n        })\r\n      }else{\r\n          nav.push({\r\n          text: '333',\r\n          disabled:false,\r\n          to:`/puzzle/333`,\r\n        })\r\n        nav.push({\r\n          text: params[3],\r\n          disabled:true,\r\n          to:`/333/casegroup/${params[3]}`,\r\n        })\r\n      }\r\n      this.setNavigation(nav)\r\n    \r\n  }\r\n\r\n  gotopage(setname: string){\r\n    this.$router.push(`/${this.shortname}/casegroup/${setname}`)\r\n    this.$router.go(0)\r\n    // this.$nextTick(function(){\r\n    //     console.log('in nextTick')\r\n    // })\r\n  }\r\n\r\n\r\n  created(){\r\n    this.fetch()\r\n  }\r\n\r\n  onresize(){\r\n      this.windowSize =  { x: window.innerWidth, y: window.innerHeight }\r\n      this.refreshtitlestyle()\r\n      this.refreshcubesize()\r\n  }\r\n\r\n  refreshcubesize(){\r\n      const width = window.innerWidth\r\n          // let size = []\r\n          if(width<600){\r\n                  this.cubesize = [125,125]\r\n              }else if(width<960){\r\n                  this.cubesize = [100,100]\r\n              }else if(width<1264){\r\n                  this.cubesize = [150,150]\r\n              }else if(width<1904){\r\n                  this.cubesize = [200,200]\r\n              }else{\r\n                  this.cubesize = [250,250]\r\n              }\r\n    }\r\n\r\n  refreshtitlestyle (): string {\r\n            const width =  this.windowSize.x\r\n            \r\n            let titlestyle =  ''\r\n            if(width<600){\r\n                titlestyle = 'font-size:14px'\r\n            }else if(width<960){\r\n                titlestyle += 'font-size:12px;padding:1px'\r\n            }else if(width<1264){\r\n                titlestyle += 'font-size:18px'\r\n            }else if(width<1904){\r\n                titlestyle += 'font-size:24px'\r\n            }else{\r\n                titlestyle += 'font-size:30px'\r\n            }\r\n            this.titlestyle = titlestyle\r\n            return titlestyle\r\n        }\r\n}\r\n\r\n\r\n\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./v4showSetOrSubSet.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./v4showSetOrSubSet.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./v4showSetOrSubSet.vue?vue&type=template&id=03666c04&\"\nimport script from \"./v4showSetOrSubSet.vue?vue&type=script&lang=ts&\"\nexport * from \"./v4showSetOrSubSet.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VHover } from 'vuetify/lib/components/VHover';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VCard,VCardTitle,VCol,VContainer,VHover,VRow})\n\n\n/* vuetify-loader */\nimport installDirectives from \"!../../node_modules/vuetify-loader/lib/runtime/installDirectives.js\"\nimport Resize from 'vuetify/lib/directives/resize'\ninstallDirectives(component, {Resize})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.setisasubset)?_c('showSetOrSubSet',{attrs:{\"hassubset\":_vm.setisasubset,\"shortname\":_vm.setname}}):_c('v-container',{directives:[{name:\"resize\",rawName:\"v-resize\",value:(_vm.onresize),expression:\"onresize\"}],attrs:{\"fluid\":\"\"}},[_c('v-row',{staticClass:\"casegroup\"},[_c('v-col',{attrs:{\"cols\":\"6\",\"offset\":\"3\",\"sm\":\"8\",\"offset-sm\":\"2\",\"xs\":\"6\",\"offset-xs\":\"3\"}},[_c('v-card',{attrs:{\"elevation\":\"10\"}},[_c('v-card-title',{staticClass:\"display-1 font-weight-black justify-center align-center\"},[_vm._v(\" \"+_vm._s(_vm.title)+\" \")])],1)],1),_c('v-col',{attrs:{\"cols\":\"9\",\"offset\":\"1\",\"sm\":\"8\",\"offset-sm\":\"2\",\"xs\":\"12\"}},[_c('v-row',_vm._l((_vm.caseGroups),function(caseGroup,index){return _c('v-col',{key:index,attrs:{\"cols\":\"6\",\"lg\":\"3\",\"md\":\"4\",\"sm\":\"3\"}},[_c('v-hover',{attrs:{\"open-delay\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar hover = ref.hover;\nreturn [_c('v-card',{staticClass:\"mx-auto justify-center\",attrs:{\"max-width\":\"250\",\"elevation\":hover ? 18 : 5,\"d-inline\":\"\"},on:{\"click\":function($event){return _vm.gotopage(caseGroup.shortName)}}},[_c('Render',{attrs:{\"cubeconfig\":_vm.cubeconfig[index],\"cubesize\":_vm.cubesize}}),_c('v-card-title',{staticClass:\"justify-center align-center font-weight-black\",style:(_vm.titlestyle)},[_vm._v(_vm._s(caseGroup.name))])],1)]}}],null,true)})],1)}),1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export enum FACE {\r\n  L,\r\n  R,\r\n  D,\r\n  U,\r\n  B,\r\n  F\r\n}\r\n\r\n\r\n\r\n\r\nexport const DEFAULT_COLORS: { [key: string]: string } = {\r\n  R: \"#B71C1C\",\r\n  L: \"#FF6D00\",\r\n  U: \"#FFFFFF\",\r\n  D: \"#FFD600\",\r\n  F: \"#00A020\",\r\n  B: \"#0D47A1\",\r\n  Core: \"#202020\",\r\n  High: \"#FF4081\",\r\n  Gray: \"#606060\",\r\n};\r\n\r\nexport var COLORS: { [key: string]: string } = JSON.parse(JSON.stringify(DEFAULT_COLORS));\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{directives:[{name:\"resize\",rawName:\"v-resize\",value:(_vm.onresize),expression:\"onresize\"}],attrs:{\"fluid\":\"\"}},[_c('v-row',{staticClass:\"setorsubset\"},[_c('v-col',{attrs:{\"cols\":\"6\",\"offset\":\"3\",\"sm\":\"8\",\"offset-sm\":\"2\",\"xs\":\"6\",\"offset-xs\":\"3\"}},[_c('v-card',{attrs:{\"elevation\":\"10\"}},[_c('v-card-title',{staticClass:\"display-1 font-weight-black justify-center align-center\"},[_vm._v(\" \"+_vm._s(_vm.shortname)+\" \")])],1)],1),_c('v-col',{attrs:{\"cols\":\"9\",\"offset\":\"1\",\"sm\":\"8\",\"offset-sm\":\"2\",\"xs\":\"12\"}},[_c('v-row',_vm._l((_vm.puzzleSets),function(puzzleSet,index){return _c('v-col',{key:index,attrs:{\"cols\":\"6\",\"lg\":\"3\",\"md\":\"4\",\"sm\":\"3\"}},[_c('v-hover',{attrs:{\"open-delay\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar hover = ref.hover;\nreturn [_c('v-card',{staticClass:\"mx-auto\",attrs:{\"max-width\":\"250\",\"elevation\":hover ? 18 : 5,\"d-inline\":\"\"},on:{\"click\":function($event){return _vm.gotopage(puzzleSet.shortName)}}},[_c('Render',{attrs:{\"cubeconfig\":_vm.cubeconfig[index],\"cubesize\":_vm.cubesize}}),_c('v-card-title',{staticClass:\"justify-center align-center font-weight-black\",style:(_vm.titlestyle)},[_vm._v(_vm._s(puzzleSet.name))])],1)]}}],null,true)})],1)}),1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"cube\",staticStyle:{\"text-align\":\"center\"},on:{\"mouseenter\":_vm.hoverin,\"mouseleave\":_vm.hoverout,\"touchstart\":_vm.hoverin,\"touchend\":_vm.hoverout}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export class TouchAction {\r\n  type: string;\r\n  x: number;\r\n  y: number;\r\n  constructor(type: string, x: number, y: number) {\r\n    this.type = type;\r\n    this.x = x;\r\n    this.y = y;\r\n  }\r\n}\r\n\r\nexport default class Toucher {\r\n  private offsetX: number = 0\r\n  private offsetY: number = 0\r\n\r\n  init(canvas: HTMLCanvasElement, callback: Function) {\r\n    this.canvas = canvas;\r\n    this.callback = callback;\r\n    canvas.addEventListener(\"touchstart\", this.touch);\r\n    canvas.addEventListener(\"touchmove\", this.touch);\r\n    canvas.addEventListener(\"touchend\", this.touch);\r\n    canvas.addEventListener(\"touchcancel\", this.touch);\r\n\r\n    canvas.addEventListener(\"mousedown\", this.mouse);\r\n    canvas.addEventListener(\"mousemove\", this.mouse);\r\n    canvas.addEventListener(\"mouseup\", this.mouse);\r\n    canvas.addEventListener(\"mouseout\", this.mouse);\r\n  }\r\n  canvas: HTMLCanvasElement;\r\n  callback: Function;\r\n\r\n  setoffset = (canvas: HTMLCanvasElement)=>{\r\n    // 不需要计算scroll值，只需要在scroll事件发生的时候重新计算一次即可\r\n    [this.offsetX,this.offsetY] =  [canvas.getBoundingClientRect().left,canvas.getBoundingClientRect().top]\r\n  }\r\n\r\n  mouse = (event: MouseEvent) => {\r\n    this.canvas.tabIndex = 1;\r\n    this.canvas.focus();\r\n    let action = new TouchAction(event.type, event.clientX - this.offsetX, event.clientY- this.offsetY);\r\n    this.callback(action);\r\n    event.returnValue = false;\r\n    return false;\r\n  };\r\n\r\n  touch = (event: TouchEvent) => {\r\n    this.canvas.tabIndex = 1;\r\n    this.canvas.focus();\r\n    let touches = event.changedTouches;\r\n    let first = touches[0];\r\n    let action = new TouchAction(event.type, first.clientX- this.offsetX, first.clientY- this.offsetY);\r\n    this.callback(action);\r\n    event.preventDefault();\r\n    return true;\r\n  };\r\n}\r\n","export class Tween {\r\n  begin: number;\r\n  end: number;\r\n  duration: number;\r\n  callback: Function;\r\n  value: number;\r\n  delta: number;\r\n  constructor(begin: number, end: number, duration: number, callback: Function) {\r\n    this.begin = begin;\r\n    this.end = end;\r\n    this.duration = duration;\r\n    this.callback = callback;\r\n    this.value = 0;\r\n    this.delta = 1;\r\n  }\r\n\r\n  speedup() {\r\n    this.delta = 4;\r\n  }\r\n\r\n  finish() {\r\n    this.callback(this.end);\r\n  }\r\n\r\n  update() {\r\n    this.value = this.value + this.delta;\r\n    let elapsed = this.value / this.duration;\r\n    elapsed = elapsed > 1 ? 1 : elapsed;\r\n    elapsed = elapsed < 0 ? 0 : elapsed;\r\n    elapsed = elapsed - 1;\r\n    let value = 1 - elapsed * elapsed;\r\n    if (value == 1) {\r\n      this.callback(this.end);\r\n      return false;\r\n    }\r\n    this.callback(this.begin + (this.end - this.begin) * value);\r\n    return true;\r\n  }\r\n}\r\n\r\nexport class Tweener {\r\n  tweens: Tween[];\r\n\r\n  get length() {\r\n    return this.tweens.length;\r\n  }\r\n\r\n  constructor() {\r\n    this.tweens = [];\r\n    this.loop();\r\n  }\r\n\r\n  loop() {\r\n    requestAnimationFrame(this.loop.bind(this));\r\n    this.update();\r\n  }\r\n\r\n  tween(begin: number, end: number, duration: number, update: Function) {\r\n    this.tweens.push(new Tween(begin, end, duration, update));\r\n  }\r\n\r\n  update() {\r\n    if (this.tweens.length === 0) return false;\r\n    var i = 0;\r\n    while (i < this.tweens.length) {\r\n      if (this.tweens[i].update()) {\r\n        i++;\r\n      } else {\r\n        this.tweens.splice(i, 1);\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  speedup() {\r\n    for (const tween of this.tweens) {\r\n      tween.speedup();\r\n    }\r\n  }\r\n\r\n  finish() {\r\n    let tweens = this.tweens.splice(0, this.tweens.length);\r\n    for (const tween of tweens) {\r\n      tween.finish();\r\n    }\r\n  }\r\n}\r\n\r\nlet tweener = new Tweener();\r\nexport default tweener;\r\n","import tweener from \"./tweener\";\r\nimport World from \"./world\";\r\n\r\nexport default class Twister {\r\n  world: World;\r\n  queue: TwistAction[];\r\n  constructor(world: World) {\r\n    this.world = world;\r\n    this.queue = [];\r\n    this.world.callbacks.push(() => {\r\n      this.update();\r\n    });\r\n  }\r\n\r\n  static shuffle(order: number) {\r\n    let result = \"\";\r\n    let exps = [\"x2\"];\r\n    let last = -1;\r\n    let actions = [\"U\", \"D\", \"R\", \"L\", \"F\", \"B\"];\r\n    let axis = -1;\r\n    for (let i = 0; i < 3 * 3 * order; i++) {\r\n      let exp = [];\r\n      while (axis == last) {\r\n        axis = Math.floor(Math.random() * 3);\r\n      }\r\n      let prefix = Math.ceil(Math.random() * Math.floor(order / 2));\r\n      exp.push(prefix == 1 ? \"\" : prefix);\r\n      let side = Math.floor(Math.random() * 2);\r\n      exp.push(actions[axis * 2 + side]);\r\n      let suffix = Math.random();\r\n      if (suffix < 0.2) {\r\n        exp.push(\"2\");\r\n      } else if (suffix < 0.6) {\r\n        exp.push(\"'\");\r\n      }\r\n      exps.push(exp.join(\"\"));\r\n      last = axis;\r\n    }\r\n    result = exps.join(\" \");\r\n    return result;\r\n  }\r\n\r\n  get length() {\r\n    return this.queue.length;\r\n  }\r\n\r\n  finish() {\r\n    for (const action of this.queue) {\r\n      action.fast = true;\r\n    }\r\n    tweener.finish();\r\n  }\r\n\r\n  twist(exp: string, reverse = false, times = 1, fast = false, callback: Function | null = null) {\r\n    if (this.queue.length > 0) {\r\n      tweener.finish();\r\n      this.update();\r\n    }\r\n    tweener.speedup();\r\n    let node = new TwistNode(exp, reverse, times);\r\n    let list = node.parse();\r\n    for (let element of list) {\r\n      element.fast = fast;\r\n      this.queue.push(element);\r\n    }\r\n\r\n    // 如果传参有callback就把callback挂载在list的最后一个action上\r\n    // 这样就实现了，最后一步执行完之后调用callback\r\n    if(callback){\r\n      list[list.length-1].callback = callback\r\n    }\r\n    this.update();\r\n\r\n  }\r\n\r\n  // twist(\r\n  //   exp: string,\r\n  //   reverse: boolean = false,\r\n  //   times: number = 1,\r\n  //   callback: Function | null = null,\r\n  //   fast: boolean = false\r\n  // ) {\r\n  //   let list = new TwistNode(exp, reverse, times).parse();\r\n  //   if (fast) {\r\n  //     if (callback) {\r\n  //       callback();\r\n  //     }\r\n  //   } else {\r\n  //     list[list.length - 1].callback = callback;\r\n  //     list.forEach(function (element) {\r\n  //       this._queue.push(element);\r\n  //     }, this);\r\n  //   }\r\n  // }\r\n\r\n\r\n\r\n\r\n  push(action: TwistAction) {\r\n    this.queue.push(action);\r\n    this.update();\r\n  }\r\n\r\n  update() {\r\n    if (this.queue.length === 0) {\r\n      return;\r\n    }\r\n    if (this.world.cube.lock) {\r\n      return;\r\n    }\r\n    let twist = this.queue.shift();\r\n    if (undefined == twist) {\r\n      return;\r\n    }\r\n    this.start(twist);\r\n  }\r\n\r\n  start(action: TwistAction) {\r\n    if (action.exp == \"#\") {\r\n      this.world.cube.reset();\r\n      this.world.cube.dirty = true;\r\n      this.world.cube.history.clear();\r\n      this.world.callback();\r\n      return;\r\n    }\r\n    if (action.exp == \"*\") {\r\n      this.world.cube.reset();\r\n      this.world.cube.dirty = true;\r\n      let exp = Twister.shuffle(this.world.cube.order);\r\n      this.twist(exp, false, 1, true);\r\n      this.world.cube.history.clear();\r\n      this.world.cube.history.init = exp;\r\n      return;\r\n    }\r\n    let angle = -Math.PI / 2;\r\n    if (action.reverse) {\r\n      angle = -angle;\r\n    }\r\n    if (action.times) {\r\n      angle = angle * action.times;\r\n    }\r\n    let part = this.world.cube.groups.get(action.exp);\r\n    if (part === undefined) {\r\n      this.update();\r\n      return;\r\n    }\r\n    part.angle = 0;\r\n    part.hold();\r\n\r\n    if (action.fast) {\r\n      part.angle = angle;\r\n    }\r\n    part.twist(angle);\r\n\r\n    // 如果这个action上挂载有callback就执行\r\n    setTimeout(() => {\r\n      if(action.callback){\r\n        action.callback()\r\n      }\r\n      return;\r\n    }, 800);\r\n    \r\n  }\r\n\r\n  undo() {\r\n    if (this.world.cube.history.length == 0) {\r\n      return;\r\n    }\r\n    this.finish();\r\n    if (this.world.cube.history.length == 0) {\r\n      return;\r\n    }\r\n    let last = this.world.cube.history.last;\r\n    let action = new TwistAction(last.exp, !last.reverse, last.times);\r\n    this.push(action);\r\n  }\r\n}\r\n\r\nexport class TwistAction {\r\n  exp: string;\r\n  reverse: boolean;\r\n  times: number;\r\n  fast: boolean;\r\n  callback: Function | null\r\n  constructor(exp: string, reverse: boolean = false, times: number = 1, fast: boolean = false,callback: Function | null = null) {\r\n    this.exp = exp;\r\n    this.reverse = reverse;\r\n    this.times = times;\r\n    this.fast = fast;\r\n  }\r\n\r\n  get value() {\r\n    let times = this.times;\r\n    let reverse = this.reverse;\r\n    if (times === 3) {\r\n      times = 1;\r\n      reverse = !reverse;\r\n    }\r\n    if (times === 2) {\r\n      reverse = false;\r\n    }\r\n    return times == 0 ? \"\" : this.exp + (reverse ? \"'\" : \"\") + (times == 1 ? \"\" : String(times));\r\n  }\r\n}\r\n\r\nexport class TwistNode {\r\n  static AFFIX = \"'Ww0123456789-\";\r\n  children: TwistNode[];\r\n  twist: TwistAction;\r\n  static SPLIT_SEGMENT(exp: string) {\r\n    let list = [];\r\n    let buffer = \"\";\r\n    let stack = 0;\r\n    let ready = false;\r\n    let note = false;\r\n    for (let i = 0; i < exp.length; i++) {\r\n      let c = exp.charAt(i);\r\n      if (c === \" \" && buffer.length == 0) {\r\n        continue;\r\n      }\r\n      if (c === \"/\" && exp.charAt(i + 1) === \"/\") {\r\n        i++;\r\n        note = true;\r\n        continue;\r\n      }\r\n      if (c === \"\\n\") {\r\n        note = false;\r\n        continue;\r\n      }\r\n      if (note) {\r\n        continue;\r\n      }\r\n      // 后缀可以持续增加\r\n      if (TwistNode.AFFIX.indexOf(c) >= 0) {\r\n        buffer = buffer.concat(c);\r\n        continue;\r\n      }\r\n      // 非后缀检查是否可以中断\r\n      if (buffer.length > 0 && stack == 0 && ready) {\r\n        list.push(buffer);\r\n        buffer = \"\";\r\n        i--;\r\n        ready = false;\r\n        continue;\r\n      }\r\n      //  如果有括号 记录stack\r\n      if (c === \"(\" || c === \"[\") {\r\n        buffer = buffer.concat(c);\r\n        stack++;\r\n        continue;\r\n      }\r\n      if (c === \")\" || c === \"]\") {\r\n        buffer = buffer.concat(c);\r\n        stack--;\r\n        continue;\r\n      }\r\n      ready = true;\r\n      buffer = buffer.concat(c);\r\n    }\r\n    if (buffer.length > 0) {\r\n      list.push(buffer);\r\n    }\r\n    return list;\r\n  }\r\n\r\n  static SPLIT_BRACKET(exp: string) {\r\n    let list = [];\r\n    let buffer = \"\";\r\n    let stack = 0;\r\n    for (let i = 0; i < exp.length; i++) {\r\n      let c = exp.charAt(i);\r\n      // 非后缀检查是否可以中断\r\n      if (stack == 0 && (c === \",\" || c === \":\")) {\r\n        list.push(buffer);\r\n        list.push(c);\r\n        buffer = \"\";\r\n        continue;\r\n      }\r\n      //  如果有括号 记录stack\r\n      if (c === \"(\" || c === \"[\") {\r\n        buffer = buffer.concat(c);\r\n        stack++;\r\n        continue;\r\n      }\r\n      if (c === \")\" || c === \"]\") {\r\n        buffer = buffer.concat(c);\r\n        stack--;\r\n        continue;\r\n      }\r\n      buffer = buffer.concat(c);\r\n    }\r\n    if (buffer.length > 0) {\r\n      list.push(buffer);\r\n    }\r\n    return list;\r\n  }\r\n\r\n  constructor(exp: string, reverse = false, times = 1) {\r\n    // 合法性校验\r\n    this.children = [];\r\n    this.twist = new TwistAction(exp, reverse, times);\r\n    // 不用解析场景\r\n    if (exp.match(/^[0123456789-]*[\\*~.#xyzbsfdeulmr][w]*$/gi)) {\r\n      if (/[XYZ]/.test(this.twist.exp)) {\r\n        this.twist.exp = this.twist.exp.toLowerCase();\r\n      }\r\n      return;\r\n    }\r\n    let list = TwistNode.SPLIT_SEGMENT(exp);\r\n    for (let item of list) {\r\n      let values;\r\n      // 只有[]\r\n      values = item.match(/^\\[(.+[:|,].+)\\]$/i);\r\n      if (values) {\r\n        values = TwistNode.SPLIT_BRACKET(values[1]);\r\n        switch (values[1]) {\r\n          case \",\":\r\n            this.children.push(new TwistNode(values[0], false, 1));\r\n            this.children.push(new TwistNode(values[2], false, 1));\r\n            this.children.push(new TwistNode(values[0], true, 1));\r\n            this.children.push(new TwistNode(values[2], true, 1));\r\n            break;\r\n          case \":\":\r\n            this.children.push(new TwistNode(values[0], false, 1));\r\n            this.children.push(new TwistNode(values[2], false, 1));\r\n            this.children.push(new TwistNode(values[0], true, 1));\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        continue;\r\n      }\r\n      // []'2\r\n      values = item.match(/^(\\[.+[:|,].+\\])('?)(\\d*)('?)$/i);\r\n      if (values === null) {\r\n        // 拆解括号\r\n        values = item.match(/^\\((.+)\\)('?)(\\d*)('?)$/i);\r\n      }\r\n      // 无括号\r\n      if (values === null) {\r\n        values = item.match(/([0123456789-]*[\\*\\#~.xyzbsfdeulmr][w]*)('?)(\\d*)('?)/i);\r\n      }\r\n      // 异常情况\r\n      if (null === values) {\r\n        return;\r\n      }\r\n      let reverse = (values[2] + values[4]).length == 1;\r\n      let times = values[3].length == 0 ? 1 : parseInt(values[3]);\r\n      this.children.push(new TwistNode(values[1], reverse, times));\r\n    }\r\n  }\r\n\r\n  parse(reverse = false) {\r\n    reverse = this.twist.reverse !== reverse;\r\n    let _result: TwistAction[] = [];\r\n    if (0 !== this.children.length) {\r\n      for (var i = 0; i < this.twist.times; i++) {\r\n        for (var j = 0; j < this.children.length; j++) {\r\n          var n;\r\n          if (reverse) {\r\n            n = this.children[this.children.length - j - 1];\r\n          } else {\r\n            n = this.children[j];\r\n          }\r\n          var list = n.parse(reverse);\r\n          for (let element of list) {\r\n            _result.push(element);\r\n          }\r\n        }\r\n      }\r\n    } else if (this.twist.exp != \"\") {\r\n      let action = new TwistAction(this.twist.exp, reverse, this.twist.times);\r\n      _result.push(action);\r\n    }\r\n    return _result;\r\n  }\r\n\r\n  get value() {\r\n    return this.twist.value;\r\n  }\r\n}\r\n","import Cubelet from \"./cubelet\";\r\nimport { TwistAction } from \"./twister\";\r\nimport Cube from \"./cube\";\r\nimport { Group, Vector3 } from \"three\";\r\nimport tweener from \"./tweener\";\r\n\r\nexport default class CubeGroup extends Group {\r\n  public static frames: number = 30;\r\n  cube: Cube;\r\n  cubelets: Cubelet[];\r\n  name: string;\r\n  indices: number[];\r\n  axis: Vector3;\r\n\r\n  _angle: number;\r\n  set angle(angle) {\r\n    this.setRotationFromAxisAngle(this.axis, angle);\r\n    this._angle = angle;\r\n    this.updateMatrix();\r\n    this.cube.dirty = true;\r\n  }\r\n  get angle() {\r\n    return this._angle;\r\n  }\r\n\r\n  constructor(cube: Cube, name: string, indices: number[], axis: Vector3) {\r\n    super();\r\n    this.cube = cube;\r\n    this._angle = 0;\r\n    this.cubelets = [];\r\n    this.name = name;\r\n    this.indices = indices;\r\n    this.axis = axis;\r\n    this.matrixAutoUpdate = false;\r\n    this.updateMatrix();\r\n  }\r\n\r\n  exp(reverse: boolean, times: number) {\r\n    let exp = this.name;\r\n    let values = this.name.match(/(^-?[xyz]):(\\d*):(\\d*$)/i);\r\n    if (values?.length == 4) {\r\n      let axis = values[1];\r\n      let layer = Number(values[2]);\r\n      if (layer == Number(values[3])) {\r\n        let half = (this.cube.order + 1) / 2;\r\n        if (axis.length == 1 && layer < half) {\r\n          axis = \"-\" + axis;\r\n          reverse = !reverse;\r\n        } else if (axis.length == 2 && layer > half) {\r\n          axis = axis[1];\r\n          reverse = !reverse;\r\n        }\r\n        if (axis.length == 1) {\r\n          layer = this.cube.order - layer + 1;\r\n        }\r\n        switch (axis) {\r\n          case \"x\":\r\n            exp = layer === half ? \"M'\" : \"R\";\r\n            break;\r\n          case \"y\":\r\n            exp = layer === half ? \"E'\" : \"U\";\r\n            break;\r\n          case \"z\":\r\n            exp = layer === half ? \"S\" : \"F\";\r\n            break;\r\n          case \"-x\":\r\n            exp = layer === half ? \"M\" : \"L\";\r\n            break;\r\n          case \"-y\":\r\n            exp = layer === half ? \"E\" : \"D\";\r\n            break;\r\n          case \"-z\":\r\n            exp = layer === half ? \"S'\" : \"B\";\r\n            break;\r\n        }\r\n        if (exp.length == 2) {\r\n          exp = exp[0];\r\n          reverse = !reverse;\r\n        }\r\n        exp = (layer === 1 || layer === half ? \"\" : String(layer)) + exp;\r\n      }\r\n    }\r\n    return new TwistAction(exp, reverse, times);\r\n  }\r\n\r\n  hold() {\r\n    this.angle = 0;\r\n    for (let i of this.indices) {\r\n      let cubelet = this.cube.cubelets[i];\r\n      this.cubelets.push(cubelet);\r\n      this.cube.remove(cubelet);\r\n      this.add(cubelet);\r\n    }\r\n    this.cube.lock = true;\r\n  }\r\n\r\n  drop() {\r\n    this.angle = Math.round(this.angle / (Math.PI / 2)) * (Math.PI / 2);\r\n    while (true) {\r\n      let cubelet = this.cubelets.pop();\r\n      if (undefined === cubelet) {\r\n        break;\r\n      }\r\n      this.rotate(cubelet);\r\n      this.remove(cubelet);\r\n      this.cube.add(cubelet);\r\n      this.cube.cubelets[cubelet.index] = cubelet;\r\n    }\r\n    this.cube.lock = false;\r\n    if (this.angle != 0) {\r\n      this.cube.update();\r\n    }\r\n    this.angle = 0;\r\n  }\r\n\r\n  twist(angle = this.angle) {\r\n    angle = Math.round(angle / (Math.PI / 2)) * (Math.PI / 2);\r\n    let reverse = angle > 0;\r\n    let times = Math.round(Math.abs(angle) / (Math.PI / 2));\r\n    if (times != 0) {\r\n      this.cube.record(this.exp(reverse, times));\r\n    }\r\n    let delta = angle - this.angle;\r\n    if (delta === 0) {\r\n      this.drop();\r\n    } else {\r\n      let d = Math.abs(delta) / (Math.PI / 2);\r\n      var duration = CubeGroup.frames * (2 - 2 / (d + 1));\r\n      tweener.tween(this.angle, angle, duration, (value: number) => {\r\n        this.angle = value;\r\n        if (Math.abs(this.angle - angle) < 1e-6) {\r\n          this.drop();\r\n        }\r\n      });\r\n    }\r\n\r\n    \r\n  }\r\n\r\n  rotate(cubelet: Cubelet) {\r\n    cubelet.rotateOnWorldAxis(this.axis, this.angle);\r\n    cubelet.vector = cubelet.vector.applyAxisAngle(this.axis, this.angle);\r\n    cubelet.updateMatrix();\r\n  }\r\n}\r\n\r\nexport class GroupTable {\r\n  private order: number;\r\n  private groups: Map<string, CubeGroup> = new Map();\r\n\r\n  public static FORMAT(axis: string, from: number, to: number) {\r\n    return axis + \":\" + from + \":\" + to;\r\n  }\r\n\r\n  public static readonly AXIS_VECTOR: { [key: string]: Vector3 } = {\r\n    a: new Vector3(1, 1, 1),\r\n    x: new Vector3(1, 0, 0),\r\n    y: new Vector3(0, 1, 0),\r\n    z: new Vector3(0, 0, 1),\r\n    \"-x\": new Vector3(-1, 0, 0),\r\n    \"-y\": new Vector3(0, -1, 0),\r\n    \"-z\": new Vector3(0, 0, -1),\r\n  };\r\n  constructor(cube: Cube) {\r\n    this.order = cube.order;\r\n    // 根据魔方阶数生成所有正向group\r\n    for (let axis of [\"x\", \"y\", \"z\"]) {\r\n      for (let from = 1; from <= this.order; from++) {\r\n        for (let to = from; to <= this.order; to++) {\r\n          let name = GroupTable.FORMAT(axis, from, to);\r\n          this.groups.set(name, new CubeGroup(cube, name, [], GroupTable.AXIS_VECTOR[axis]));\r\n        }\r\n      }\r\n    }\r\n    // 块类型group\r\n    for (let type of [\"center\", \"edge\", \"corner\"]) {\r\n      this.groups.set(type, new CubeGroup(cube, type, [], GroupTable.AXIS_VECTOR[\"a\"]));\r\n    }\r\n    // 将每个块索引放入x y z的每层中\r\n    for (const cubelet of cube.initials) {\r\n      let index = cubelet.initial;\r\n      let axis;\r\n      let layer;\r\n      let group;\r\n      let faces = 0;\r\n\r\n      axis = \"x\";\r\n      layer = (index % this.order) + 1;\r\n      if (layer == 1 || layer == this.order) {\r\n        faces++;\r\n      }\r\n      group = this.groups.get(GroupTable.FORMAT(axis, layer, layer));\r\n      if (!group) {\r\n        throw Error();\r\n      }\r\n      group.indices.push(cubelet.index);\r\n\r\n      axis = \"y\";\r\n      layer = Math.floor((index % (this.order * this.order)) / this.order) + 1;\r\n      if (layer == 1 || layer == this.order) {\r\n        faces++;\r\n      }\r\n      group = this.groups.get(GroupTable.FORMAT(axis, layer, layer));\r\n      if (!group) {\r\n        throw Error();\r\n      }\r\n      group.indices.push(cubelet.index);\r\n      axis = \"z\";\r\n      layer = Math.floor(index / (this.order * this.order)) + 1;\r\n      if (layer == 1 || layer == this.order) {\r\n        faces++;\r\n      }\r\n      group = this.groups.get(GroupTable.FORMAT(axis, layer, layer));\r\n      if (!group) {\r\n        throw Error();\r\n      }\r\n      group.indices.push(cubelet.index);\r\n\r\n      group = this.groups.get([\"\", \"center\", \"edge\", \"corner\"][faces]);\r\n      if (group) {\r\n        group.indices.push(cubelet.index);\r\n      }\r\n    }\r\n    // x y z的多层\r\n    for (let axis of [\"x\", \"y\", \"z\"]) {\r\n      for (let from = 1; from <= this.order; from++) {\r\n        for (let to = from + 1; to <= this.order; to++) {\r\n          let dst = this.groups.get(GroupTable.FORMAT(axis, from, to));\r\n          if (!dst) {\r\n            throw Error();\r\n          }\r\n          for (let i = from; i <= to; i++) {\r\n            let src = this.groups.get(GroupTable.FORMAT(axis, i, i));\r\n            if (!src) {\r\n              throw Error();\r\n            }\r\n            dst.indices.push(...src.indices);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // 通过正向group拷贝反向group\r\n    for (let axis of [\"-x\", \"-y\", \"-z\"]) {\r\n      for (let from = 1; from <= this.order; from++) {\r\n        for (let to = from; to <= this.order; to++) {\r\n          let template = this.groups.get(GroupTable.FORMAT(axis.replace(\"-\", \"\"), from, to));\r\n          if (!template) {\r\n            throw Error();\r\n          }\r\n          let name = GroupTable.FORMAT(axis, from, to);\r\n          this.groups.set(name, new CubeGroup(cube, name, template.indices, GroupTable.AXIS_VECTOR[axis]));\r\n        }\r\n      }\r\n    }\r\n    // 特殊处理整体旋转\r\n    for (let axis of [\"x\", \"y\", \"z\"]) {\r\n      let template = this.groups.get(GroupTable.FORMAT(axis.replace(\"-\", \"\"), 1, this.order));\r\n      if (!template) {\r\n        throw Error();\r\n      }\r\n      this.groups.set(axis, new CubeGroup(cube, axis, template.indices, GroupTable.AXIS_VECTOR[axis]));\r\n    }\r\n    for (const group of this.groups.values()) {\r\n      cube.add(group);\r\n    }\r\n    this.groups.set(\".\", new CubeGroup(cube, name, [], GroupTable.AXIS_VECTOR[\"a\"]));\r\n    this.groups.set(\"~\", new CubeGroup(cube, name, [], GroupTable.AXIS_VECTOR[\"a\"]));\r\n  }\r\n\r\n  private static AXIS_MAP: any = {\r\n    R: \"x\",\r\n    L: \"-x\",\r\n    U: \"y\",\r\n    D: \"-y\",\r\n    F: \"z\",\r\n    B: \"-z\",\r\n    M: \"-x\",\r\n    E: \"-y\",\r\n    S: \"z\",\r\n  };\r\n\r\n  get(name: string) {\r\n    let axis: string = \"\";\r\n    let from: number = 0;\r\n    let to: number = 0;\r\n    if (this.groups.get(name)) {\r\n      return this.groups.get(name);\r\n    }\r\n    if (name.match(/.[Ww]/)) {\r\n      name = name.toLowerCase().replace(\"w\", \"\");\r\n    }\r\n    if (/[XYZ]/.test(name)) {\r\n      name = name.toLowerCase();\r\n    }\r\n    if (name.length === 1) {\r\n      switch (name) {\r\n        case \"x\":\r\n        case \"y\":\r\n        case \"z\":\r\n          return this.groups.get(name);\r\n        case \"R\":\r\n        case \"L\":\r\n        case \"U\":\r\n        case \"D\":\r\n        case \"F\":\r\n        case \"B\":\r\n          axis = GroupTable.AXIS_MAP[name];\r\n          from = axis.length == 2 ? 1 : this.order;\r\n          to = from;\r\n          break;\r\n        case \"r\":\r\n        case \"l\":\r\n        case \"u\":\r\n        case \"d\":\r\n        case \"f\":\r\n        case \"b\":\r\n          axis = GroupTable.AXIS_MAP[name.toUpperCase()];\r\n          from = axis.length == 2 ? 1 : this.order;\r\n          to = axis.length == 2 ? 2 : this.order - 1;\r\n          break;\r\n        case \"E\":\r\n        case \"M\":\r\n        case \"S\":\r\n          axis = GroupTable.AXIS_MAP[name];\r\n          from = Math.floor((this.order + 1) / 2);\r\n          to = Math.ceil((this.order + 1) / 2);\r\n          break;\r\n        case \"e\":\r\n        case \"m\":\r\n        case \"s\":\r\n          axis = GroupTable.AXIS_MAP[name.toUpperCase()];\r\n          from = 2;\r\n          to = this.order - 1;\r\n          break;\r\n      }\r\n    } else {\r\n      let list = name.match(/([0123456789]*)(-?)([0123456789]*)([lrudfb])/i);\r\n      if (list == null) {\r\n        return undefined;\r\n      }\r\n      from = Number(list[1]);\r\n      to = Number(list[3]);\r\n      if (to === NaN || to === 0) {\r\n        if (/[lrudfb]/.test(list[4])) {\r\n          to = 1;\r\n        } else {\r\n          to = from;\r\n        }\r\n      }\r\n      axis = GroupTable.AXIS_MAP[list[4].toUpperCase()];\r\n      from = axis.length == 2 ? from : this.order - from + 1;\r\n      to = axis.length == 2 ? to : this.order - to + 1;\r\n    }\r\n    if (from > to) {\r\n      [from, to] = [to, from];\r\n    }\r\n    return this.groups.get(GroupTable.FORMAT(axis, from, to));\r\n  }\r\n}\r\n","import { FACE, COLORS } from \"./define\";\r\nimport {\r\n  Vector3,\r\n  Group,\r\n  Geometry,\r\n  Face3,\r\n  ExtrudeGeometry,\r\n  Shape,\r\n  ShapeGeometry,\r\n  MeshPhongMaterial,\r\n  MeshNormalMaterial,\r\n  MeshLambertMaterial,\r\n  MeshBasicMaterial,\r\n  Mesh,\r\n  Quaternion\r\n} from \"three\";\r\n\r\nclass Frame extends Geometry {\r\n  private static readonly _INDICES = [\r\n    [0, 2, 1],\r\n    [0, 3, 2],\r\n    [4, 6, 5],\r\n    [4, 7, 6],\r\n    [8, 10, 9],\r\n    [8, 11, 10],\r\n    [12, 14, 13],\r\n    [12, 15, 14],\r\n    [16, 18, 17],\r\n    [16, 19, 18],\r\n    [20, 22, 21],\r\n    [20, 23, 22],\r\n    [1, 6, 7],\r\n    [0, 1, 7],\r\n    [3, 0, 10],\r\n    [11, 3, 10],\r\n    [17, 2, 3],\r\n    [16, 17, 3],\r\n    [23, 20, 1],\r\n    [2, 23, 1],\r\n    [5, 12, 13],\r\n    [4, 5, 13],\r\n    [9, 13, 14],\r\n    [8, 9, 14],\r\n    [22, 15, 12],\r\n    [21, 22, 12],\r\n    [19, 14, 15],\r\n    [18, 19, 15],\r\n    [7, 4, 9],\r\n    [10, 7, 9],\r\n    [11, 8, 19],\r\n    [16, 11, 19],\r\n    [23, 17, 18],\r\n    [22, 23, 18],\r\n    [20, 21, 5],\r\n    [6, 20, 5],\r\n    [20, 6, 1],\r\n    [10, 0, 7],\r\n    [21, 12, 5],\r\n    [13, 9, 4],\r\n    [23, 2, 17],\r\n    [11, 16, 3],\r\n    [22, 18, 15],\r\n    [8, 14, 19]\r\n  ];\r\n\r\n  constructor(size: number, border: number) {\r\n    super();\r\n    const _O = size / 2;\r\n    const _I = _O - border;\r\n    const _verts = [\r\n      //0: F Face\r\n      [-_I, +_I, +_O],\r\n      [+_I, +_I, +_O],\r\n      [+_I, -_I, +_O],\r\n      [-_I, -_I, +_O],\r\n      //4: U Face\r\n      [-_I, +_O, -_I],\r\n      [+_I, +_O, -_I],\r\n      [+_I, +_O, +_I],\r\n      [-_I, +_O, +_I],\r\n      //8: L Face\r\n      [-_O, -_I, -_I],\r\n      [-_O, +_I, -_I],\r\n      [-_O, +_I, +_I],\r\n      [-_O, -_I, +_I],\r\n      //12: B Face\r\n      [+_I, +_I, -_O],\r\n      [-_I, +_I, -_O],\r\n      [-_I, -_I, -_O],\r\n      [+_I, -_I, -_O],\r\n      //16: D Face\r\n      [-_I, -_O, +_I],\r\n      [+_I, -_O, +_I],\r\n      [+_I, -_O, -_I],\r\n      [-_I, -_O, -_I],\r\n      //20: R Face\r\n      [+_O, +_I, +_I],\r\n      [+_O, +_I, -_I],\r\n      [+_O, -_I, -_I],\r\n      [+_O, -_I, +_I]\r\n    ];\r\n\r\n    for (let i = 0; i < _verts.length; i++) {\r\n      let _vert = _verts[i];\r\n      this.vertices.push(new Vector3(_vert[0], _vert[1], _vert[2]));\r\n    }\r\n    for (let i = 0; i < Frame._INDICES.length; i++) {\r\n      let _indice = Frame._INDICES[i];\r\n      let _face = new Face3(_indice[0], _indice[1], _indice[2]);\r\n      this.faces.push(_face);\r\n    }\r\n    this.computeFaceNormals();\r\n  }\r\n}\r\n\r\nclass Sticker extends ExtrudeGeometry {\r\n  constructor(size: number, depth: number) {\r\n    size = size / 2;\r\n    let left = -size;\r\n    let bottom = size;\r\n    let top = -size;\r\n    let right = size;\r\n    let radius = size / 4;\r\n\r\n    let shape = new Shape();\r\n    shape.moveTo(left, top + radius);\r\n    shape.lineTo(left, bottom - radius);\r\n    shape.quadraticCurveTo(left, bottom, left + radius, bottom);\r\n    shape.lineTo(right - radius, bottom);\r\n    shape.quadraticCurveTo(right, bottom, right, bottom - radius);\r\n    shape.lineTo(right, top + radius);\r\n    shape.quadraticCurveTo(right, top, right - radius, top);\r\n    shape.lineTo(left + radius, top);\r\n    shape.quadraticCurveTo(left, top, left, top + radius);\r\n    shape.closePath();\r\n\r\n    super(shape, { bevelEnabled: false, depth: depth });\r\n  }\r\n}\r\n\r\nclass Mirror extends ShapeGeometry {\r\n  constructor(size: number) {\r\n    size = size / 2;\r\n    let left = -size;\r\n    let bottom = size;\r\n    let top = -size;\r\n    let right = size;\r\n    let radius = size / 4;\r\n\r\n    let shape = new Shape();\r\n    shape.moveTo(left, top + radius);\r\n    shape.lineTo(left, bottom - radius);\r\n    shape.quadraticCurveTo(left, bottom, left + radius, bottom);\r\n    shape.lineTo(right - radius, bottom);\r\n    shape.quadraticCurveTo(right, bottom, right, bottom - radius);\r\n    shape.lineTo(right, top + radius);\r\n    shape.quadraticCurveTo(right, top, right - radius, top);\r\n    shape.lineTo(left + radius, top);\r\n    shape.quadraticCurveTo(left, top, left, top + radius);\r\n    shape.closePath();\r\n\r\n    super(shape);\r\n  }\r\n}\r\n\r\nexport default class Cubelet extends Group {\r\n  public static readonly SIZE: number = 64;\r\n  private static readonly _BORDER_WIDTH: number = 3;\r\n  private static readonly _STICKER_DEPTH: number = 3;\r\n  private static readonly _FRAME: Frame = new Frame(Cubelet.SIZE, Cubelet._BORDER_WIDTH);\r\n  private static readonly _STICKER: Sticker = new Sticker(\r\n    Cubelet.SIZE - 2 * Cubelet._BORDER_WIDTH - Cubelet._STICKER_DEPTH,\r\n    Cubelet._STICKER_DEPTH\r\n  );\r\n  private static readonly _MIRROR: Mirror = new Mirror(\r\n    Cubelet.SIZE - 2 * Cubelet._BORDER_WIDTH - Cubelet._STICKER_DEPTH\r\n  );\r\n\r\n  public static LAMBERS = (() => {\r\n    let result: any = {};\r\n    for (const key in COLORS) {\r\n      let color = (<any>COLORS)[key];\r\n      if (key == \"BLACK\") {\r\n        result[key] = new MeshPhongMaterial({\r\n          color: color,\r\n          specular: COLORS.GRAY,\r\n          shininess: 8\r\n        });\r\n      } else {\r\n        result[key] = new MeshLambertMaterial({ color: color });\r\n      }\r\n    }\r\n    return result;\r\n  })();\r\n\r\n  public static BASICS = (() => {\r\n    let result: any = {};\r\n    for (const key in COLORS) {\r\n      let color = (<any>COLORS)[key];\r\n      result[key] = new MeshBasicMaterial({ color: color });\r\n    }\r\n    return result;\r\n  })();\r\n\r\n  _vector: Vector3;\r\n\r\n  set vector(vector) {\r\n    let half = (this.order - 1) / 2;\r\n    let x = Math.round(vector.x * 2) / 2;\r\n    let y = Math.round(vector.y * 2) / 2;\r\n    let z = Math.round(vector.z * 2) / 2;\r\n    this._vector.set(x, y, z);\r\n    x = Math.round(x + half);\r\n    y = Math.round(y + half);\r\n    z = Math.round(z + half);\r\n    this._index = z * this.order * this.order + y * this.order + x;\r\n    this.position.x = Cubelet.SIZE * this._vector.x;\r\n    this.position.y = Cubelet.SIZE * this._vector.y;\r\n    this.position.z = Cubelet.SIZE * this._vector.z;\r\n  }\r\n  get vector() {\r\n    return this._vector;\r\n  }\r\n\r\n  _index: number;\r\n\r\n  set index(index) {\r\n    let half = (this.order - 1) / 2;\r\n    let _x = (index % this.order) - half;\r\n    let _y = Math.floor((index % (this.order * this.order)) / this.order) - half;\r\n    let _z = Math.floor(index / (this.order * this.order)) - half;\r\n    this.vector = new Vector3(_x, _y, _z);\r\n  }\r\n\r\n  get index(): number {\r\n    return this._index;\r\n  }\r\n\r\n  mirrors: Mesh[];\r\n  lambers: MeshLambertMaterial[];\r\n  basics: MeshBasicMaterial[];\r\n  set mirror(value: boolean) {\r\n    if (value) {\r\n      for (let i = 0; i < 6; i++) {\r\n        if (this.mirrors[i] instanceof Mesh && this.children.indexOf(this.mirrors[i]) < 0) {\r\n          this.add(this.mirrors[i]);\r\n        }\r\n      }\r\n    } else {\r\n      for (let i = 0; i < 6; i++) {\r\n        if (this.mirrors[i] instanceof Mesh && this.children.indexOf(this.mirrors[i]) >= 0) {\r\n          this.remove(this.mirrors[i]);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  set hollow(value: boolean) {\r\n    if (value) {\r\n      if (this.frame instanceof Mesh && this.children.indexOf(this.frame) >= 0) {\r\n        this.remove(this.frame);\r\n      }\r\n    } else {\r\n      if (this.frame instanceof Mesh && this.children.indexOf(this.frame) < 0) {\r\n        this.add(this.frame);\r\n      }\r\n    }\r\n  }\r\n\r\n  getColor(face: FACE) {\r\n    let position = new Vector3(0, 0, 0);\r\n    switch (face) {\r\n      case FACE.L:\r\n        position.x = -1;\r\n        break;\r\n      case FACE.R:\r\n        position.x = 1;\r\n        break;\r\n      case FACE.D:\r\n        position.y = -1;\r\n        break;\r\n      case FACE.U:\r\n        position.y = 1;\r\n        break;\r\n      case FACE.B:\r\n        position.z = -1;\r\n        break;\r\n      case FACE.F:\r\n        position.z = 1;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    this._quaternion.copy(this.quaternion);\r\n    position.applyQuaternion(this._quaternion.inverse());\r\n    let x = Math.round(position.x);\r\n    let y = Math.round(position.y);\r\n    let z = Math.round(position.z);\r\n    let color = 0;\r\n    if (x < 0) {\r\n      color = FACE.L;\r\n    } else if (x > 0) {\r\n      color = FACE.R;\r\n    } else if (y < 0) {\r\n      color = FACE.D;\r\n    } else if (y > 0) {\r\n      color = FACE.U;\r\n    } else if (z < 0) {\r\n      color = FACE.B;\r\n    } else if (z > 0) {\r\n      color = FACE.F;\r\n    }\r\n    return color;\r\n  }\r\n\r\n  initial: number;\r\n  stickers: Mesh[];\r\n  _quaternion: Quaternion;\r\n  frame: Mesh;\r\n  order: number;\r\n\r\n  constructor(order: number, index: number) {\r\n    super();\r\n    this.order = order;\r\n    this.initial = index;\r\n    this._vector = new Vector3();\r\n    this.index = index;\r\n    this.stickers = [];\r\n    this._quaternion = new Quaternion();\r\n    this.mirrors = [];\r\n\r\n    let xx = this.position.x * this.position.x;\r\n    let yy = this.position.y * this.position.y;\r\n    let zz = this.position.z * this.position.z;\r\n    let d = xx + yy + zz - Math.min(xx, yy, zz);\r\n    d = Math.sqrt(d) + (Math.sqrt(2) * Cubelet.SIZE) / 2 - (order * Cubelet.SIZE) / 2;\r\n    if (d < 0) {\r\n      return;\r\n    }\r\n    let half = (order - 1) / 2;\r\n\r\n    this.lambers = [\r\n      this.vector.x == -half ? Cubelet.LAMBERS.ORANGE : Cubelet.LAMBERS.GRAY,\r\n      this.vector.x == half ? Cubelet.LAMBERS.RED : Cubelet.LAMBERS.GRAY,\r\n      this.vector.y == -half ? Cubelet.LAMBERS.WHITE : Cubelet.LAMBERS.GRAY,\r\n      this.vector.y == half ? Cubelet.LAMBERS.YELLOW : Cubelet.LAMBERS.GRAY,\r\n      this.vector.z == -half ? Cubelet.LAMBERS.GREEN : Cubelet.LAMBERS.GRAY,\r\n      this.vector.z == half ? Cubelet.LAMBERS.BLUE : Cubelet.LAMBERS.GRAY\r\n    ];\r\n\r\n    this.basics = [\r\n      this.vector.x == -half ? Cubelet.BASICS.ORANGE : Cubelet.BASICS.GRAY,\r\n      this.vector.x == half ? Cubelet.BASICS.RED : Cubelet.BASICS.GRAY,\r\n      this.vector.y == -half ? Cubelet.BASICS.WHITE : Cubelet.BASICS.GRAY,\r\n      this.vector.y == half ? Cubelet.BASICS.YELLOW : Cubelet.BASICS.GRAY,\r\n      this.vector.z == -half ? Cubelet.BASICS.GREEN : Cubelet.BASICS.GRAY,\r\n      this.vector.z == half ? Cubelet.BASICS.BLUE : Cubelet.BASICS.GRAY\r\n    ];\r\n\r\n    this.frame = new Mesh(Cubelet._FRAME, Cubelet.LAMBERS.BLACK);\r\n    this.add(this.frame);\r\n\r\n    for (let i = 0; i < 6; i++) {\r\n      if (this.lambers[i] != Cubelet.LAMBERS.GRAY) {\r\n        let _sticker = new Mesh(Cubelet._STICKER, this.lambers[i]);\r\n        _sticker.name = FACE[i];\r\n        switch (i) {\r\n          case FACE.L:\r\n            _sticker.rotation.y = -Math.PI / 2;\r\n            _sticker.position.x = -Cubelet.SIZE / 2;\r\n            break;\r\n          case FACE.R:\r\n            _sticker.rotation.y = Math.PI / 2;\r\n            _sticker.position.x = Cubelet.SIZE / 2;\r\n            break;\r\n          case FACE.D:\r\n            _sticker.rotation.x = Math.PI / 2;\r\n            _sticker.position.y = -Cubelet.SIZE / 2;\r\n            break;\r\n          case FACE.U:\r\n            _sticker.rotation.x = -Math.PI / 2;\r\n            _sticker.position.y = Cubelet.SIZE / 2;\r\n            break;\r\n          case FACE.B:\r\n            _sticker.rotation.x = Math.PI;\r\n            _sticker.position.z = -Cubelet.SIZE / 2;\r\n            break;\r\n          case FACE.F:\r\n            _sticker.rotation.x = 2 * Math.PI;\r\n            _sticker.position.z = Cubelet.SIZE / 2;\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        this.add(_sticker);\r\n        this.stickers[i] = _sticker;\r\n        let _mirror = new Mesh(Cubelet._MIRROR, this.basics[i]);\r\n        _mirror.rotation.x = _sticker.rotation.x == 0 ? 0 : _sticker.rotation.x + Math.PI;\r\n        _mirror.rotation.y = _sticker.rotation.y == 0 ? 0 : _sticker.rotation.y + Math.PI;\r\n        _mirror.rotation.z = _sticker.rotation.z == 0 ? 0 : _sticker.rotation.z + Math.PI;\r\n        if (_mirror.rotation.x + _mirror.rotation.y + _mirror.rotation.z == 0) {\r\n          _mirror.rotation.y = Math.PI;\r\n        }\r\n\r\n        _mirror.position.x = _sticker.position.x * 3;\r\n        _mirror.position.y = _sticker.position.y * 3;\r\n        _mirror.position.z = _sticker.position.z * 3;\r\n        this.add(_mirror);\r\n        this.mirrors[i] = _mirror;\r\n      }\r\n    }\r\n    this.matrixAutoUpdate = false;\r\n    this.updateMatrix();\r\n  }\r\n\r\n  stick(face: number, color: string) {\r\n    let lamber;\r\n    let basic;\r\n    let index = null;\r\n    if (this.stickers[face] === undefined) {\r\n      return;\r\n    }\r\n    if (color && color.length > 0) {\r\n      for (const key in COLORS) {\r\n        let c = (<any>COLORS)[key];\r\n        if (c == color) {\r\n          index = key;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    if (index) {\r\n      lamber = Cubelet.LAMBERS[index];\r\n      basic = Cubelet.LAMBERS[index];\r\n    } else {\r\n      lamber = this.lambers[face];\r\n      basic = this.basics[face];\r\n    }\r\n    if (index == \"BLACK\") {\r\n      this.stickers[face].visible = false;\r\n    } else {\r\n      this.stickers[face].visible = true;\r\n    }\r\n    this.stickers[face].material = lamber;\r\n    if (this.mirrors[face] instanceof Mesh) {\r\n      this.mirrors[face].material = basic;\r\n    }\r\n  }\r\n}\r\n","import { TwistAction } from \"./twister\";\r\n\r\nexport default class History {\r\n  list: TwistAction[] = [];\r\n  init: string = \"\";\r\n  exp: string = \"\";\r\n  constructor() {}\r\n\r\n  record(action: TwistAction) {\r\n    if (this.list.length == 0) {\r\n      action.times = action.times % 4;\r\n      if (action.times != 0) {\r\n        this.list.push(action);\r\n        this.exp = this.exp + \" \" + action.value;\r\n      }\r\n    } else {\r\n      let last = this.list[this.list.length - 1];\r\n      if (last.exp == action.exp) {\r\n        last.times = last.times + action.times * (last.reverse == action.reverse ? 1 : -1);\r\n        last.times = last.times % 4;\r\n        this.exp = this.exp.substring(0, this.exp.lastIndexOf(\" \"));\r\n        if (last.times == 0) {\r\n          this.list.pop();\r\n        } else {\r\n          this.exp = this.exp + \" \" + last.value;\r\n        }\r\n      } else {\r\n        this.list.push(action);\r\n        this.exp = this.exp + \" \" + action.value;\r\n      }\r\n    }\r\n  }\r\n\r\n  clear() {\r\n    this.list = [];\r\n    this.init = \"\";\r\n    this.exp = \"\";\r\n  }\r\n\r\n  get last() {\r\n    return this.list[this.list.length - 1];\r\n  }\r\n\r\n  get length() {\r\n    return this.list.length;\r\n  }\r\n\r\n  get moves() {\r\n    let length = this.length;\r\n    for (const twist of this.list) {\r\n      if (twist.exp == \"x\" || twist.exp == \"y\" || twist.exp == \"z\") {\r\n        length--;\r\n      }\r\n    }\r\n    return length;\r\n  }\r\n}\r\n","import { GroupTable } from \"./group\";\r\nimport Cubelet from \"./cubelet\";\r\nimport { FACE, COLORS } from \"./define\";\r\nimport { Group, Euler } from \"three\";\r\nimport { TwistAction } from \"./twister\";\r\nimport History from \"./history\";\r\n\r\nexport default class Cube extends Group {\r\n  public dirty: boolean = true;\r\n  public lock: boolean = false;\r\n  public cubelets: Cubelet[] = [];\r\n  public initials: Cubelet[] = [];\r\n  public groups: GroupTable;\r\n  public complete: boolean = false;\r\n  public order: number;\r\n  public callback: Function;\r\n  public history: History;\r\n\r\n  constructor(order: number, callback: Function) {\r\n    super();\r\n    this.order = order;\r\n    this.callback = callback;\r\n    this.scale.set(3 / order, 3 / order, 3 / order);\r\n    for (var i = 0; i < order * order * order; i++) {\r\n      let cubelet = new Cubelet(order, i);\r\n      this.cubelets.push(cubelet);\r\n      this.initials.push(cubelet);\r\n      this.add(cubelet);\r\n    }\r\n    this.history = new History();\r\n    this.groups = new GroupTable(this);\r\n    this.matrixAutoUpdate = false;\r\n    this.updateMatrix();\r\n  }\r\n\r\n  record(action: TwistAction) {\r\n    this.history.record(action);\r\n  }\r\n\r\n  update() {\r\n    let complete = [FACE.U, FACE.D, FACE.L, FACE.R, FACE.F, FACE.B].every((face) => {\r\n      let group = this.groups.get(FACE[face]);\r\n      if (!group) {\r\n        throw Error();\r\n      }\r\n      let color = this.cubelets[group.indices[0]].getColor(face);\r\n      let same = group.indices.every((idx) => {\r\n        return color == this.cubelets[idx].getColor(face);\r\n      });\r\n      return same;\r\n    });\r\n    this.complete = complete;\r\n    this.callback();\r\n  }\r\n\r\n  index(value: number) {\r\n    return this.initials[value].index;\r\n  }\r\n\r\n  reset() {\r\n    for (let cubelet of this.cubelets) {\r\n      cubelet.setRotationFromEuler(new Euler(0, 0, 0));\r\n      cubelet.index = cubelet.initial;\r\n      cubelet.updateMatrix();\r\n    }\r\n    this.cubelets.sort((left, right) => {\r\n      return left.index - right.index;\r\n    });\r\n  }\r\n\r\n  stick(index: number, face: number, color: string) {\r\n    let cubelet = this.initials[index];\r\n    if (!cubelet) {\r\n      throw Error(\"invalid cubelet index: \" + index);\r\n    }\r\n    cubelet.stick(face, color);\r\n    this.dirty = true;\r\n  }\r\n\r\n  strip(strip: { [face: string]: number[] | undefined }) {\r\n    for (const face of [FACE.L, FACE.R, FACE.D, FACE.U, FACE.B, FACE.F]) {\r\n      let key = FACE[face];\r\n      let group = this.groups.get(FACE[face]);\r\n      if (!group) {\r\n        throw Error();\r\n      }\r\n      for (const index of group.indices) {\r\n        this.initials[index].stick(face, \"\");\r\n      }\r\n      let indexes = strip[key];\r\n      if (indexes == undefined) {\r\n        continue;\r\n      }\r\n      for (const index of indexes) {\r\n        let cubelet = this.initials[index];\r\n        if (!cubelet) {\r\n          throw Error(\"invalid cubelet index: \" + index);\r\n        }\r\n        cubelet.stick(face, COLORS.BLACK);\r\n      }\r\n    }\r\n    this.dirty = true;\r\n  }\r\n\r\n  //                +------------+\r\n  //                | U1  U2  U3 |\r\n  //                |            |\r\n  //                | U4  U5  U6 |\r\n  //                |            |\r\n  //                | U7  U8  U9 |\r\n  //   +------------+------------+------------+------------+\r\n  //   | L1  L2  L3 | F1  F2  F3 | R1  R2  R3 | B1  B2  B3 |\r\n  //   |            |            |            |            |\r\n  //   | L4  L5  L6 | F4  F5  F6 | R4  R5  R6 | B4  B5  B6 |\r\n  //   |            |            |            |            |\r\n  //   | L7  L8  L9 | F7  F8  F9 | R7  R8  R9 | B7  B8  B9 |\r\n  //   +------------+------------+------------+------------+\r\n  //                | D1  D2  D3 |\r\n  //                |            |\r\n  //                | D4  D5  D6 |\r\n  //                |            |\r\n  //                | D7  D8  D9 |\r\n  //                +------------+\r\n  get state() {\r\n    let result = [];\r\n    for (let face of [FACE.U, FACE.R, FACE.F, FACE.D, FACE.L, FACE.B]) {\r\n      let group = this.groups.get(FACE[face]);\r\n      if (!group) {\r\n        throw Error();\r\n      }\r\n      for (let i of group.indices) {\r\n        result.push(this.cubelets[i].getColor(face));\r\n      }\r\n    }\r\n    return result.join(\"\");\r\n  }\r\n}\r\n","import { FACE } from \"./define\";\r\nimport Cubelet from \"./cubelet\";\r\nimport CubeGroup, { GroupTable } from \"./group\";\r\nimport { TouchAction } from \"../common/toucher\";\r\nimport { Vector3, Plane, Ray, Vector2, Matrix4 } from \"three\";\r\nimport World from \"./world\";\r\nimport tweener from \"./tweener\";\r\n\r\nexport class Holder {\r\n  public vector: Vector3;\r\n  public index: number;\r\n  public plane: Plane;\r\n  constructor() {\r\n    this.vector = new Vector3();\r\n  }\r\n}\r\n\r\nexport default class Controller {\r\n  public dragging = false;\r\n  public rotating = false;\r\n  public angle = 0;\r\n  public taps: Function[];\r\n  public ray = new Ray();\r\n  public down = new Vector2(0, 0);\r\n  public move = new Vector2(0, 0);\r\n  public matrix = new Matrix4();\r\n  public holder = new Holder();\r\n  public vector = new Vector3();\r\n  public group: CubeGroup | undefined;\r\n  public planes = [\r\n    new Plane(new Vector3(1, 0, 0), (-Cubelet.SIZE * 3) / 2),\r\n    new Plane(new Vector3(0, 1, 0), (-Cubelet.SIZE * 3) / 2),\r\n    new Plane(new Vector3(0, 0, 1), (-Cubelet.SIZE * 3) / 2),\r\n  ];\r\n  public _lock: boolean = false;\r\n  get lock() {\r\n    return this._lock;\r\n  }\r\n  set lock(value) {\r\n    this.handleUp();\r\n    this._lock = value;\r\n  }\r\n\r\n  public _disable: boolean = false;\r\n  get disable() {\r\n    return this._disable;\r\n  }\r\n  set disable(value) {\r\n    this.handleUp();\r\n    this._disable = value;\r\n  }\r\n\r\n  world: World;\r\n  sensitivity: number = 1;\r\n  constructor(world: World) {\r\n    this.world = world;\r\n    this.taps = [];\r\n    this.loop();\r\n  }\r\n\r\n  loop() {\r\n    requestAnimationFrame(this.loop.bind(this));\r\n    this.update();\r\n  }\r\n\r\n  update() {\r\n    if (this.rotating && this.group) {\r\n      if (this.group.angle != this.angle) {\r\n        let delta = (this.angle - this.group.angle) / 2;\r\n        this.group.angle += delta;\r\n        this.world.dirty = true;\r\n      }\r\n    }\r\n  }\r\n\r\n  match() {\r\n    let g: CubeGroup | undefined;\r\n    if (this.holder.index === -1) {\r\n      for (let ax of [\"x\", \"y\", \"z\"]) {\r\n        g = this.world.cube.groups.get(ax);\r\n        if (g?.axis.dot(this.holder.plane.normal) === 0) {\r\n          return g;\r\n        }\r\n      }\r\n    } else {\r\n      const plane = this.holder.plane.normal;\r\n      const finger = this.holder.vector;\r\n      const index = this.holder.index;\r\n      const order = this.world.cube.order;\r\n      for (let axis of [\"x\", \"y\", \"z\"]) {\r\n        let vector = GroupTable.AXIS_VECTOR[axis];\r\n        if (vector.dot(plane) === 0 && vector.dot(finger) === 0) {\r\n          let layer = 0;\r\n          switch (axis) {\r\n            case \"x\":\r\n              layer = index % order;\r\n              break;\r\n            case \"y\":\r\n              layer = Math.floor((index % (order * order)) / order);\r\n              break;\r\n            case \"z\":\r\n              layer = Math.floor(index / (order * order));\r\n              break;\r\n          }\r\n          layer = layer + 1;\r\n          return this.world.cube.groups.get(GroupTable.FORMAT(axis, layer, layer));\r\n        }\r\n      }\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  intersect(point: Vector2, plane: Plane) {\r\n    var x = (point.x / this.world.width) * 2 - 1;\r\n    var y = -(point.y / this.world.height) * 2 + 1;\r\n    this.ray.origin.setFromMatrixPosition(this.world.camera.matrixWorld);\r\n    this.ray.direction.set(x, y, 0.5).unproject(this.world.camera).sub(this.ray.origin).normalize();\r\n    this.ray.applyMatrix4(this.matrix.identity().getInverse(this.world.scene.matrix));\r\n    var result = new Vector3(Infinity, Infinity, Infinity);\r\n    this.ray.intersectPlane(plane, result);\r\n    return result;\r\n  }\r\n\r\n  handleDown() {\r\n    if (this.disable) {\r\n      return;\r\n    }\r\n    if (this.dragging || this.rotating) {\r\n      this.handleUp();\r\n    }\r\n    this.dragging = true;\r\n    this.holder.index = -1;\r\n    tweener.speedup();\r\n    let distance = 0;\r\n    this.planes.forEach((plane) => {\r\n      var point = this.intersect(this.down, plane);\r\n      if (point !== null) {\r\n        var x = point.x / Cubelet.SIZE / 3;\r\n        var y = point.y / Cubelet.SIZE / 3;\r\n        var z = point.z / Cubelet.SIZE / 3;\r\n        if (Math.abs(x) <= 0.5 && Math.abs(y) <= 0.5 && Math.abs(z) <= 0.5) {\r\n          let d =\r\n            Math.pow(point.x - this.ray.origin.x, 2) +\r\n            Math.pow(point.y - this.ray.origin.y, 2) +\r\n            Math.pow(point.z - this.ray.origin.z, 2);\r\n          if (distance == 0 || d < distance) {\r\n            this.holder.plane = plane;\r\n            let order = this.world.cube.order;\r\n            x = Math.ceil((x + 0.5) * order) - 1;\r\n            y = Math.ceil((y + 0.5) * order) - 1;\r\n            z = Math.ceil((z + 0.5) * order) - 1;\r\n            this.holder.index = z * order * order + y * order + x;\r\n            distance = d;\r\n            return;\r\n          }\r\n        }\r\n      }\r\n      return;\r\n    }, this);\r\n  }\r\n\r\n  handleMove() {\r\n    if (this.disable) {\r\n      return;\r\n    }\r\n    if (this.dragging) {\r\n      var dx = this.move.x - this.down.x;\r\n      var dy = this.move.y - this.down.y;\r\n      var d = Math.sqrt(dx * dx + dy * dy);\r\n      if (Math.min(this.world.width, this.world.height) / d > 128) {\r\n        return true;\r\n      }\r\n      tweener.finish();\r\n      if (this.world.cube.lock) {\r\n        this.dragging = false;\r\n        this.rotating = false;\r\n        return true;\r\n      }\r\n      this.dragging = false;\r\n      this.rotating = true;\r\n      if (this.holder.index === -1) {\r\n        if (dx * dx > dy * dy) {\r\n          this.group = this.world.cube.groups.get(\"y\");\r\n        } else {\r\n          let vector = new Vector3((Cubelet.SIZE * 3) / 2, 0, (Cubelet.SIZE * 3) / 2);\r\n          vector.applyMatrix4(this.world.scene.matrix).project(this.world.camera);\r\n          let half = this.world.width / 2;\r\n          let x = Math.round(vector.x * half + half);\r\n          if (this.down.x < x) {\r\n            this.group = this.world.cube.groups.get(\"x\");\r\n          } else {\r\n            this.group = this.world.cube.groups.get(\"z\");\r\n          }\r\n        }\r\n      } else {\r\n        var start = this.intersect(this.down, this.holder.plane);\r\n        var end = this.intersect(this.move, this.holder.plane);\r\n        this.vector.subVectors(end, start);\r\n        var x = this.vector.x;\r\n        var y = this.vector.y;\r\n        var z = this.vector.z;\r\n        var max = Math.max(Math.abs(x), Math.abs(y), Math.abs(z));\r\n        x = Math.abs(x) === max ? x : 0;\r\n        y = Math.abs(y) === max ? y : 0;\r\n        z = Math.abs(z) === max ? z : 0;\r\n        this.vector.set(x, y, z);\r\n        this.holder.vector.copy(this.vector.multiply(this.vector).normalize());\r\n\r\n        this.group = this.match();\r\n        this.vector.crossVectors(this.holder.vector, this.holder.plane.normal);\r\n        this.holder.vector.multiplyScalar(this.vector.x + this.vector.y + this.vector.z);\r\n      }\r\n      this.group?.hold();\r\n    }\r\n    if (this.rotating && this.group) {\r\n      if (this.holder.index === -1) {\r\n        var dx = this.move.x - this.down.x;\r\n        var dy = this.move.y - this.down.y;\r\n        if (this.group === this.world.cube.groups.get(\"y\")) {\r\n          this.angle = (((dx / Cubelet.SIZE) * Math.PI) / 6) * this.sensitivity;\r\n        } else if (this.group === this.world.cube.groups.get(\"x\")) {\r\n          this.angle = (((dy / Cubelet.SIZE) * Math.PI) / 6) * this.sensitivity;\r\n        } else if (this.group === this.world.cube.groups.get(\"z\")) {\r\n          this.angle = (((-dy / Cubelet.SIZE) * Math.PI) / 6) * this.sensitivity;\r\n        }\r\n      } else {\r\n        var start = this.intersect(this.down, this.holder.plane);\r\n        var end = this.intersect(this.move, this.holder.plane);\r\n        this.vector.subVectors(end, start).multiply(this.holder.vector);\r\n        this.angle =\r\n          ((((-(this.vector.x + this.vector.y + this.vector.z) *\r\n            (this.group.axis.x + this.group.axis.y + this.group.axis.z)) /\r\n            Cubelet.SIZE) *\r\n            Math.PI) /\r\n            6) *\r\n          this.sensitivity;\r\n      }\r\n    }\r\n  }\r\n\r\n  handleUp() {\r\n    if (this.dragging) {\r\n      let face = null;\r\n      switch (this.holder.plane) {\r\n        case this.planes[0]:\r\n          face = FACE.R;\r\n          break;\r\n        case this.planes[1]:\r\n          face = FACE.U;\r\n          break;\r\n        case this.planes[2]:\r\n          face = FACE.F;\r\n          break;\r\n      }\r\n      for (let tap of this.taps) {\r\n        tap(this.holder.index, face);\r\n      }\r\n    }\r\n    if (this.rotating) {\r\n      if (this.group && this.group !== null) {\r\n        if (!this.lock) {\r\n          if (Math.abs(this.angle) < Math.PI / 4) {\r\n            let tick = new Date().getTime();\r\n            let speed = Math.abs(this.angle) / (tick - this.tick);\r\n            if (speed > 0.001) {\r\n              this.angle = this.angle == 0 ? 0 : ((this.angle / Math.abs(this.angle)) * Math.PI) / 2;\r\n            }\r\n          }\r\n          this.group.twist(this.angle);\r\n        } else {\r\n          this.group.twist(0);\r\n        }\r\n      }\r\n    }\r\n    this.holder.index = -1;\r\n    this.dragging = false;\r\n    this.rotating = false;\r\n    this.world.dirty = true;\r\n  }\r\n\r\n  tick: number = new Date().getTime();\r\n  hover: number = -1;\r\n  touch = (action: TouchAction) => {\r\n    switch (action.type) {\r\n      case \"touchstart\":\r\n      case \"mousedown\":\r\n        this.down.x = action.x;\r\n        this.down.y = action.y;\r\n        this.tick = new Date().getTime();\r\n        this.handleDown();\r\n        break;\r\n      case \"mousemove\":\r\n      case \"touchmove\":\r\n        this.move.x = action.x;\r\n        this.move.y = action.y;\r\n        this.handleMove();\r\n        break;\r\n      case \"touchend\":\r\n      case \"touchcancel\":\r\n      case \"mouseup\":\r\n      case \"mouseout\":\r\n        this.handleUp();\r\n        break;\r\n      default:\r\n        return false;\r\n    }\r\n    return true;\r\n  };\r\n}\r\n","import Cube from \"./cube\";\r\nimport Cubelet from \"./cubelet\";\r\nimport { Scene, PerspectiveCamera, AmbientLight, DirectionalLight } from \"three\";\r\nimport Twister from \"./twister\";\r\nimport Controller from \"./controller\";\r\n\r\nexport default class World {\r\n  public width: number = 1;\r\n  public height: number = 1;\r\n  public dirty: boolean = false;\r\n\r\n  public scene: Scene;\r\n  public camera: PerspectiveCamera;\r\n\r\n  public cube: Cube;\r\n\r\n  public ambient: AmbientLight;\r\n  public directional: DirectionalLight;\r\n\r\n  private cubes: Cube[] = [];\r\n  public callbacks: Function[] = [];\r\n\r\n  public twister: Twister;\r\n  public controller: Controller;\r\n\r\n  constructor() {\r\n    this.scene = new Scene();\r\n    this.scene.rotation.x = Math.PI / 6;\r\n    this.scene.rotation.y = -Math.PI / 4 + Math.PI / 16;\r\n\r\n    this.ambient = new AmbientLight(0xffffff, 0.8);\r\n    this.scene.add(this.ambient);\r\n    this.directional = new DirectionalLight(0xffffff, 0.2);\r\n    this.directional.position.set(Cubelet.SIZE, Cubelet.SIZE * 4, Cubelet.SIZE * 2);\r\n    this.scene.add(this.directional);\r\n\r\n    this.camera = new PerspectiveCamera(50, 1, 1, Cubelet.SIZE * 32);\r\n    this.camera.position.x = 0;\r\n    this.camera.position.y = 0;\r\n    this.camera.position.z = 0;\r\n\r\n    this.twister = new Twister(this);\r\n    this.controller = new Controller(this);\r\n    this.order = 3;\r\n  }\r\n\r\n  set order(value: number) {\r\n    this.scene.remove(this.cube);\r\n    if (this.cubes[value] == undefined) {\r\n      this.cubes[value] = new Cube(value, this.callback);\r\n    }\r\n    this.cube = this.cubes[value];\r\n    this.scene.add(this.cube);\r\n    this.dirty = true;\r\n  }\r\n\r\n  get order() {\r\n    return this.cube.order;\r\n  }\r\n\r\n  callback = () => {\r\n    for (let callback of this.callbacks) {\r\n      callback();\r\n    }\r\n  };\r\n\r\n  scale: number = 1;\r\n  perspective: number = 5;\r\n  resize() {\r\n    let min = this.height / Math.min(this.width, this.height) / this.scale / this.perspective;\r\n    let fov = (2 * Math.atan(min) * 180) / Math.PI;\r\n\r\n    this.camera.aspect = this.width / this.height;\r\n    this.camera.fov = fov;\r\n    let distance = Cubelet.SIZE * 3 * this.perspective;\r\n    this.camera.position.z = distance;\r\n    this.camera.near = distance - Cubelet.SIZE * 3;\r\n    this.camera.far = distance + Cubelet.SIZE * 4;\r\n    this.camera.lookAt(this.scene.position);\r\n    this.camera.updateProjectionMatrix();\r\n    this.dirty = true;\r\n  }\r\n}\r\n","import CubeGroup from \"./group\";\r\nimport World from \"./world\";\r\n\r\n\r\n\r\nexport default class Preferance {\r\n    private world: World;\r\n    constructor(world: World) {\r\n    this.world = world;\r\n    }\r\n    private data = {\r\n    version: \"0.1\",\r\n    scale: 50,\r\n    perspective: 50,\r\n    angle: 60,\r\n    gradient: 65,\r\n    frames: 20,\r\n    sensitivity: 3,\r\n    mirror: false,\r\n    hollow: false,\r\n    shadow: true,\r\n    };\r\n\r\n    load(value: string) {\r\n    let data = JSON.parse(value);\r\n    if (data.version === this.data.version) {\r\n        this.data = data;\r\n    }\r\n    }\r\n    get value() {\r\n    return JSON.stringify(this.data);\r\n    }\r\n\r\n    refresh() {\r\n    this.scale = this.data.scale;\r\n    this.perspective = this.data.perspective;\r\n    this.angle = this.data.angle;\r\n    this.gradient = this.data.gradient;\r\n    this.shadow = this.data.shadow;\r\n    this.frames = this.data.frames;\r\n    this.mirror = this.data.mirror;\r\n    this.hollow = this.data.hollow;\r\n    }\r\n\r\n    get scale() {\r\n    return this.data.scale;\r\n    }\r\n    set scale(value) {\r\n    if (this.data.scale != value) {\r\n        this.data.scale = value;\r\n    }\r\n    this.world.scale = value / 100 + 0.5;\r\n    this.world.resize();\r\n    }\r\n\r\n    get perspective() {\r\n    return this.data.perspective;\r\n    }\r\n    set perspective(value) {\r\n    if (this.data.perspective != value) {\r\n        this.data.perspective = value;\r\n    }\r\n    this.world.perspective = (100.1 / (value + 0.01)) * 4 - 3;\r\n    this.world.resize();\r\n    }\r\n\r\n    get angle() {\r\n    return this.data.angle;\r\n    }\r\n    set angle(value) {\r\n    if (this.data.angle != value) {\r\n        this.data.angle = value;\r\n    }\r\n    this.world.scene.rotation.y = ((value / 100 - 1) * Math.PI) / 2;\r\n    this.world.dirty = true;\r\n    }\r\n\r\n    get gradient() {\r\n    return this.data.gradient;\r\n    }\r\n    set gradient(value) {\r\n    if (this.data.gradient != value) {\r\n        this.data.gradient = value;\r\n    }\r\n    this.world.scene.rotation.x = ((1 - value / 100) * Math.PI) / 2;\r\n    this.world.dirty = true;\r\n    }\r\n\r\n    get shadow() {\r\n    return this.data.shadow;\r\n    }\r\n    set shadow(value) {\r\n    if (this.data.shadow != value) {\r\n        this.data.shadow = value;\r\n    }\r\n    if (value) {\r\n        this.world.ambient.intensity = 0.8;\r\n        this.world.directional.intensity = 0.2;\r\n    } else {\r\n        this.world.ambient.intensity = 1;\r\n        this.world.directional.intensity = 0;\r\n    }\r\n    this.world.dirty = true;\r\n    }\r\n\r\n    get frames() {\r\n    return this.data.frames;\r\n    }\r\n    set frames(value) {\r\n    if (this.data.frames != value) {\r\n        this.data.frames = value;\r\n    }\r\n    CubeGroup.frames = value;\r\n    }\r\n\r\n    get sensitivity() {\r\n    return this.data.sensitivity;\r\n    }\r\n    set sensitivity(value) {\r\n    if (this.data.sensitivity != value) {\r\n        this.data.sensitivity = value;\r\n    }\r\n    let i = (value - 3) / 2;\r\n    i = 2 ** i;\r\n    this.world.controller.sensitivity = i;\r\n    }\r\n\r\n    get mirror() {\r\n    return this.data.mirror;\r\n    }\r\n    set mirror(value) {\r\n    if (this.data.mirror != value) {\r\n        this.data.mirror = value;\r\n    }\r\n    for (let cubelet of this.world.cube.cubelets) {\r\n        cubelet.mirror = value;\r\n    }\r\n    this.world.dirty = true;\r\n    }\r\n\r\n    get hollow() {\r\n    return this.data.hollow;\r\n    }\r\n    set hollow(value: boolean) {\r\n    if (this.data.hollow != value) {\r\n        this.data.hollow = value;\r\n    }\r\n    for (let cubelet of this.world.cube.cubelets) {\r\n        cubelet.hollow = value;\r\n    }\r\n    this.world.dirty = true;\r\n    }\r\n}","\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport { Component, Inject,Prop, Ref, Watch } from \"vue-property-decorator\";\r\nimport { WebGLRenderer } from \"three\";\r\nimport { COLORS } from \"../../cuber/define\";\r\nimport Toucher from \"../../common/toucher\";\r\nimport World from \"../../cuber/world\";\r\nimport Preferance from '../../cuber/preferance';\r\nimport { CubeCongfig , RenderConfig, Playerconfig, PreferanceConfig} from '../../cuber/interfaces';\r\nimport { random } from '../../../../../../cubing.js/src/puzzle-geometry/Perm';\r\nimport Database from '../../database';\r\nimport Cubelet from '../../cuber/cubelet';\r\nconst CubeStageMask = require('../../cuber/strip.json')\r\n\r\n\r\n@Component({name:'Render',components:{}})\r\nexport default class Render extends Vue{\r\n\r\n    // @Inject('world')\r\n    // 传入的cube\r\n    @Prop()\r\n    worldin: World\r\n\r\n    // 配置信息\r\n    @Prop()\r\n    cubeconfig: CubeCongfig\r\n\r\n\r\n    // 魔方大小\r\n    @Prop()\r\n    cubesize: number[]\r\n\r\n    // 画布所在的div\r\n    @Ref('cube')  canvasdiv: HTMLDivElement\r\n\r\n\r\n    world: World\r\n    // 渲染配置\r\n    renderconfig: RenderConfig = {}\r\n    \r\n    //属性配置\r\n    preferanceconfig: PreferanceConfig  = {}\r\n\r\n    // 动画播放配置\r\n    playerconfig: Playerconfig = {}\r\n    \r\n    // 魔方主要参数\r\n    preferance: Preferance;\r\n\r\n    // \r\n    database: Database\r\n\r\n    // 魔方名字\r\n    cubename: string\r\n\r\n    // 画布\r\n    canvas: HTMLCanvasElement\r\n\r\n    // 画布大小\r\n    size: number[]\r\n\r\n    //操控控制器\r\n    toucher: Toucher\r\n\r\n    //封面是否是图片\r\n    CoverImgOn: boolean\r\n    \r\n    // 封面图片\r\n    coverimg: HTMLImageElement\r\n    \r\n    // 动画action \r\n    action: string\r\n\r\n    // 渲染器\r\n    renderer: WebGLRenderer;\r\n\r\n    // loop记录\r\n    loop_id: number\r\n\r\n    // 循环播放公式记录settimeout的key值\r\n    looplay_id\r\n\r\n    // 保证同一时刻只有一个 loopplay函数执行\r\n    looplayRunning: boolean = false\r\n    // 自动播放公式 \r\n    autoplay_id\r\n\r\n    @Watch('cubesize')\r\n    onSizeChange(){\r\n        this.size = this.cubesize\r\n        if(this.CoverImgOn){\r\n            this.coverimg.style.width = `${this.size[0]}px`\r\n        }else{  \r\n            this.resize(this.size[0],this.size[1])\r\n        }\r\n    }\r\n\r\n    @Watch('cubeconfig')\r\n    onCubeConfigChange(){\r\n        this.loadCubeConfig()\r\n    }\r\n\r\n    constructor(){\r\n        super()\r\n        // 生成一个魔方\r\n        this.world = this.worldin ? this.worldin : new World()\r\n        this.preferance = new Preferance(this.world)\r\n             // 读取总体模板\r\n                if(this.cubeconfig.model){\r\n                    try{\r\n                        let config: CubeCongfig = JSON.parse(window.localStorage.getItem(`cubeconfig:${this.cubeconfig.model}`))\r\n                        this.renderconfig = config.renderconfig\r\n                        this.playerconfig = config.playerconfig\r\n                        this.preferanceconfig = config.preferanceconfig\r\n                    }catch{\r\n                        let config: CubeCongfig = JSON.parse(window.localStorage.getItem(`cubeconfig:casegroup`))\r\n                        this.renderconfig = config.renderconfig\r\n                        this.playerconfig = config.playerconfig\r\n                        this.preferanceconfig = config.preferanceconfig\r\n                    }\r\n                }\r\n                // 读取render模板\r\n                if(this.cubeconfig.renderModelName){\r\n                    try{\r\n                        let config: RenderConfig = JSON.parse(window.localStorage.getItem(`render:${this.cubeconfig.renderModelName}`))\r\n                        this.renderconfig = config\r\n                    }catch{\r\n                        let config: RenderConfig = JSON.parse(window.localStorage.getItem(`render:casegroup`))\r\n                        this.renderconfig = config\r\n                    }\r\n                }\r\n\r\n                \r\n                // 读取preferance模板\r\n                if(this.cubeconfig.preferanceModelName){\r\n                    try{\r\n                        let config: PreferanceConfig = JSON.parse(window.localStorage.getItem(`preferance:${this.cubeconfig.preferanceModelName}`))\r\n                        this.preferanceconfig = config\r\n                    }catch{\r\n                        let config: PreferanceConfig = JSON.parse(window.localStorage.getItem(`preferance:casegroup`))\r\n                        this.preferanceconfig = config\r\n                    }\r\n                }\r\n                // 读取单独配置的renderconfig和preferanceconfig和playerconfig\r\n                for(let param in this.cubeconfig.renderconfig){\r\n                    this.renderconfig[param] = this.cubeconfig.renderconfig[param]\r\n                }\r\n\r\n                for(let param in this.cubeconfig.preferanceconfig){\r\n                    this.preferanceconfig[param] = this.cubeconfig.preferanceconfig[param]\r\n                }\r\n\r\n                for(let param in this.cubeconfig.playerconfig){\r\n                    this.playerconfig[param] = this.cubeconfig.playerconfig[param]\r\n                }\r\n\r\n                // 保存主要配置\r\n                this.size = this.cubesize ? this.cubesize : (this.renderconfig.size || [200,200])\r\n                this.cubename = this.cubeconfig.cubename\r\n                this.CoverImgOn = this.renderconfig.coverImgNotModel\r\n                this.world.order = this.renderconfig.order || 3\r\n\r\n                // 不能再阶数选择之前\r\n                this.preferance.load(JSON.stringify(this.preferanceconfig))\r\n                this.preferance.refresh()\r\n\r\n\r\n                // 设置遮罩层\r\n                if(this.world.order==3 && this.renderconfig.masktype){\r\n                    try{\r\n                        const strip = CubeStageMask[this.renderconfig.masktype].strip\r\n                        if(strip){\r\n                            this.world.cube.strip(strip)\r\n                        }\r\n                    }catch{\r\n\r\n                    }\r\n                    \r\n                }\r\n\r\n                this.world.cube.dirty = true\r\n\r\n                // 设置初始action\r\n                this.action = this.renderconfig.scene == \"^\" ? \"(\" + this.renderconfig.alg + \")'\" : this.renderconfig.alg\r\n\r\n                if(this.action){\r\n                    this.world.twister.finish();\r\n                    this.world.twister.twist(\"#\");\r\n                    this.world.twister.twist(this.action, false, 1, true);\r\n                    this.world.cube.history.clear();\r\n                }\r\n\r\n                // 魔方是否锁定，用controler 不能用 cube\r\n                this.world.controller.lock = this.playerconfig.lock\r\n    }\r\n\r\n\r\n    loadCubeConfig(){\r\n        if(this.cubeconfig){\r\n                    // 读取总体模板\r\n                if(this.cubeconfig.model){\r\n                    try{\r\n                        let config: CubeCongfig = JSON.parse(window.localStorage.getItem(`cubeconfig:${this.cubeconfig.model}`))\r\n                        this.renderconfig = config.renderconfig\r\n                        this.playerconfig = config.playerconfig\r\n                        this.preferanceconfig = config.preferanceconfig\r\n                    }catch{\r\n                        let config: CubeCongfig = JSON.parse(window.localStorage.getItem(`cubeconfig:casegroup`))\r\n                        this.renderconfig = config.renderconfig\r\n                        this.playerconfig = config.playerconfig\r\n                        this.preferanceconfig = config.preferanceconfig\r\n                    }\r\n                }\r\n                // 读取render模板\r\n                if(this.cubeconfig.renderModelName){\r\n                    try{\r\n                        let config: RenderConfig = JSON.parse(window.localStorage.getItem(`render:${this.cubeconfig.renderModelName}`))\r\n                        this.renderconfig = config\r\n                    }catch{\r\n                        let config: RenderConfig = JSON.parse(window.localStorage.getItem(`render:casegroup`))\r\n                        this.renderconfig = config\r\n                    }\r\n                }\r\n\r\n                \r\n                // 读取preferance模板\r\n                if(this.cubeconfig.preferanceModelName){\r\n                    try{\r\n                        let config: PreferanceConfig = JSON.parse(window.localStorage.getItem(`preferance:${this.cubeconfig.preferanceModelName}`))\r\n                        this.preferanceconfig = config\r\n                    }catch{\r\n                        let config: PreferanceConfig = JSON.parse(window.localStorage.getItem(`preferance:casegroup`))\r\n                        this.preferanceconfig = config\r\n                    }\r\n                }\r\n                // 读取单独配置的renderconfig和preferanceconfig和playerconfig\r\n                for(let param in this.cubeconfig.renderconfig){\r\n                    this.renderconfig[param] = this.cubeconfig.renderconfig[param]\r\n                }\r\n\r\n                for(let param in this.cubeconfig.preferanceconfig){\r\n                    this.preferanceconfig[param] = this.cubeconfig.preferanceconfig[param]\r\n                }\r\n\r\n                for(let param in this.cubeconfig.playerconfig){\r\n                    this.playerconfig[param] = this.cubeconfig.playerconfig[param]\r\n                }\r\n\r\n                // 保存主要配置\r\n                this.size = this.cubesize ? this.cubesize : (this.renderconfig.size || [200,200])\r\n                this.cubename = this.cubeconfig.cubename\r\n                this.CoverImgOn = this.renderconfig.coverImgNotModel\r\n                this.world.order = this.renderconfig.order || 3\r\n\r\n                // 不能再阶数选择之前\r\n                this.preferance.load(JSON.stringify(this.preferanceconfig))\r\n                this.preferance.refresh()\r\n\r\n\r\n                // 设置遮罩层\r\n                if(this.world.order==3 && this.renderconfig.masktype){\r\n                    try{\r\n                        const strip = CubeStageMask[this.renderconfig.masktype].strip\r\n                        if(strip){\r\n                            this.world.cube.strip(strip)\r\n                        }\r\n                    }catch{\r\n\r\n                    }\r\n                    \r\n                }\r\n\r\n                this.world.cube.dirty = true\r\n\r\n                // 设置初始action\r\n                this.action = this.renderconfig.scene == \"^\" ? \"(\" + this.renderconfig.alg + \")'\" : this.renderconfig.alg\r\n\r\n                if(this.action){\r\n                    this.world.twister.finish();\r\n                    this.world.twister.twist(\"#\");\r\n                    this.world.twister.twist(this.action, false, 1, true);\r\n                    this.world.cube.history.clear();\r\n                }\r\n\r\n                // 魔方是否锁定，用controler 不能用 cube\r\n                this.world.controller.lock = this.playerconfig.lock\r\n        }\r\n    }\r\n\r\n    resize(width: number, height: number) {\r\n            this.world.width = width;\r\n            this.world.height = height;\r\n            this.world.resize();\r\n            this.renderer.setSize(width, height, true);\r\n            // let view = this.canvasdiv;\r\n            // if (view instanceof HTMLElement) {\r\n            //     view.style.width = width + \"px\";\r\n            //     view.style.height = height + \"px\";\r\n            //     }\r\n            this.world.dirty = true;\r\n    }\r\n\r\n    mounted() {\r\n        // 初始化画布\r\n        this.createrender()\r\n        // 封面是否渲染为图片\r\n        if(this.CoverImgOn){\r\n            // 根据渲染模型生成缩略图\r\n            const content = this.renderer.domElement.toDataURL(\"image/png\");\r\n            this.coverimg = document.createElement('img')\r\n            this.coverimg.style.objectFit = 'contain'\r\n            this.coverimg.style.width = this.size[0] + 'px'\r\n            this.coverimg.src = content\r\n            this.canvasdiv.appendChild(this.coverimg)\r\n            this.removerender()\r\n        }\r\n\r\n        if(this.playerconfig.autoplay && this.CoverImgOn== false){\r\n            this.autoplay()\r\n        }\r\n\r\n        this.loop()\r\n    }\r\n\r\n    // 绘制一帧画面\r\n    draw() {\r\n        if (this.world.dirty || this.world.cube.dirty) {\r\n        this.renderer.clear();\r\n        this.renderer.render(this.world.scene, this.world.camera);\r\n        this.world.dirty = false;\r\n        this.world.cube.dirty = false;\r\n        return true;\r\n        }\r\n        console.log('ininin')\r\n        return false;\r\n    }\r\n\r\n    //  设置操控偏移\r\n    setoffset(canvas: HTMLCanvasElement = this.canvas){\r\n        this.toucher.setoffset(canvas)\r\n    }\r\n\r\n\r\n\r\n    // 生成render、画第一帧、设置偏移\r\n    createrender(){\r\n         // 初始化画布\r\n        this.canvas = document.createElement(\"canvas\")\r\n        this.canvas.style.outline = \"none\";\r\n         // 初始化touch\r\n        this.toucher = new Toucher();\r\n        this.toucher.init(this.canvas, this.world.controller.touch);\r\n\r\n        this.renderer = new WebGLRenderer({\r\n            canvas: this.canvas,\r\n            antialias: true\r\n        });\r\n\r\n        this.renderer.autoClear = false;\r\n        this.renderer.setClearColor(COLORS.BACKGROUND);\r\n        this.renderer.setPixelRatio(window.devicePixelRatio);\r\n\r\n        // 画出canvas\r\n        this.canvasdiv.appendChild(this.renderer.domElement)\r\n        // 调整画布大小\r\n        this.resize(this.size[0],this.size[1])\r\n        // 画一帧\r\n        this.draw()\r\n        // 设置偏移\r\n        this.setoffset()\r\n    }\r\n\r\n    // 移除canvas 销毁render\r\n    removerender(){\r\n        // 销毁和清除renderer\r\n        this.renderer.clear()\r\n        this.renderer.dispose()\r\n        this.renderer = null\r\n\r\n        // 删除canvas 添加图片标签\r\n        this.canvasdiv.removeChild(this.canvas)\r\n        this.canvas = null\r\n    }\r\n\r\n    // 魔方回到初始状态\r\n    initcube(){\r\n         // 快速结束\r\n            this.world.twister.finish();\r\n            // 魔方复原\r\n            this.world.twister.twist(\"#\");\r\n            // 回到初始态\r\n            this.world.twister.twist(this.action, false, 1, true);\r\n            // 清除记录\r\n            this.world.cube.history.clear();\r\n    }\r\n\r\n    // 魔方循环播放\r\n    loopplay(){\r\n        if(this.looplayRunning==false){\r\n            this.looplayRunning = true\r\n            this.world.twister.twist(this.renderconfig.alg, false, 1, false, ()=>{\r\n                this.initcube()\r\n                this.looplay_id = setTimeout(() => {\r\n                    this.looplayRunning = false\r\n                    this.loopplay()\r\n                }, 2000);\r\n            })\r\n        }\r\n        \r\n    }\r\n\r\n    // 魔方循环播放\r\n    autoplay(){\r\n        this.world.twister.twist(this.renderconfig.alg, false, 1, false, ()=>{\r\n            this.initcube()\r\n            this.autoplay_id = setTimeout(() => {\r\n                this.autoplay()\r\n            }, 2000);\r\n        })\r\n    }\r\n\r\n\r\n    hoverin(){\r\n        \r\n        if(this.playerconfig.autoplay==false){\r\n            if(this.CoverImgOn){\r\n            // 生成render和重绘\r\n            this.coverimg.style.display = 'none'\r\n            this.createrender()\r\n            // 清除图片\r\n        }\r\n        if(this.playerconfig.hoverplay){\r\n            if(this.playerconfig.loop){\r\n                this.loopplay()\r\n            }else{\r\n                this.world.twister.twist(this.renderconfig.alg, false, 1, false);\r\n            }\r\n        }\r\n        this.loop()\r\n        }\r\n        \r\n    }\r\n\r\n    hoverout(){\r\n        if(this.playerconfig.autoplay==false){\r\n            // 重回起始状态\r\n            if(this.playerconfig.hoverplay){\r\n                if(this.playerconfig.loop){\r\n                    clearTimeout(this.looplay_id)\r\n                }\r\n                this.initcube()\r\n                this.looplayRunning = false\r\n            }\r\n\r\n            if(this.CoverImgOn){\r\n                // 绘制\r\n                // 没有这个魔方会节能，从而导致截图出现黑屏\r\n                this.world.dirty = true\r\n                this.draw()\r\n                // 根据渲染模型生成缩略图\r\n                const content = this.renderer.domElement.toDataURL(\"image/png\");\r\n                // 移除render\r\n                this.removerender()\r\n                // 修改图片属性\r\n                this.coverimg.style.display = ''\r\n                this.coverimg.style.objectFit = 'contain'\r\n                this.coverimg.src = content\r\n                cancelAnimationFrame(this.loop_id)\r\n            }else{\r\n\r\n            }\r\n            \r\n        }\r\n    }\r\n\r\n    loop() {\r\n        // 刷新\r\n        this.loop_id = requestAnimationFrame(this.loop.bind(this));\r\n        // 是否呼吸\r\n        if(this.playerconfig.breath){\r\n            let tick = new Date().getTime();\r\n            tick = (tick / 2000) * Math.PI;\r\n            tick = Math.sin(tick) / 32;\r\n            this.world.cube.position.y = tick * Cubelet.SIZE;\r\n            this.world.cube.rotation.y = (tick / 12) * Math.PI;\r\n            this.world.cube.updateMatrix();\r\n        }\r\n\r\n        // 是否自旋\r\n        if(this.playerconfig.autorotate){\r\n            let tick = new Date().getTime();\r\n            tick = (tick / 2000) * Math.PI;\r\n            this.world.cube.rotation.y = (tick / 12) * Math.PI;\r\n            this.world.cube.updateMatrix();\r\n        }\r\n        try{    \r\n            this.world.cube.dirty = true;\r\n            this.draw();\r\n        }catch{\r\n            cancelAnimationFrame(this.loop_id)\r\n        }\r\n        \r\n    }\r\n\r\n    touchin(da){\r\n        console.log('ininin',da)\r\n    }\r\n\r\n}\r\n\r\n\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=74c777de&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=ts&\"\nexport * from \"./index.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"74c777de\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport {\r\n  State,\r\n  Getter,\r\n  Action,\r\n  Mutation,\r\n  namespace\r\n} from 'vuex-class'\r\nimport {Component, Prop} from 'vue-property-decorator'\r\nimport { CubeCongfig } from '../plugins/v3/cuber/interfaces'\r\nimport Render from '../plugins/v3/vue/Render/index.vue';\r\n\r\n\r\n@Component({name:'showSetOrSubSet',components:{Render}})\r\nexport default class Puzzles extends Vue{\r\n  \r\n  \r\n  @Prop()\r\n  hassubset: boolean\r\n\r\n  @Prop()\r\n  shortname: string \r\n\r\n  @State Navigation\r\n  @Action setNavigation\r\n\r\n  puzzleSets = []\r\n  titlestyle = 'font-size:12px'\r\n  windowSize: any = { x: 0,y:0}\r\n\r\n\r\n  cubeconfig: CubeCongfig[] = []\r\n  cubesize: number[] \r\n\r\n  async fetch(){\r\n    if(this.hassubset){\r\n        const res = await this.$http.get(`algdb/puzzlesubset?set=${this.shortname}`)\r\n        this.puzzleSets = res.data.data\r\n    }else{\r\n       const res = await this.$http.get(`algdb/puzzleset?puzzle=${this.shortname}`)\r\n        this.puzzleSets = res.data.data\r\n    }\r\n    for(let puzzleset of this.puzzleSets){\r\n          this.cubeconfig.push({\r\n            cubename : puzzleset.name,\r\n            model: 'puzzleset',\r\n            renderconfig:{\r\n                order: puzzleset.puzzle == '222'? 2: 3,\r\n                scene:'^',\r\n                alg: puzzleset.genAlgs || '',\r\n                masktype: puzzleset.shortName\r\n            },\r\n            playerconfig: {\r\n              hoverplay: false,\r\n              breath: true\r\n            }\r\n        })\r\n    }\r\n\r\n    \r\n      const params = this.$route.path.split('/')\r\n      const nav: object[] = [{\r\n          text:'Home',\r\n          disabled:false,\r\n          to:'/',\r\n      }]\r\n      console.log(params)\r\n      if(params[1]=='puzzle'){\r\n          nav.push({\r\n          text: params[2],\r\n          disabled:true,\r\n          to:`/puzzle/${params[2]}`,\r\n        })\r\n      }else{\r\n          nav.push({\r\n          text: '333',\r\n          disabled:false,\r\n          to:`/puzzle/333`,\r\n        })\r\n        nav.push({\r\n          text: params[3],\r\n          disabled:true,\r\n          to:`/333/casegroup/${params[3]}`,\r\n        })\r\n      }\r\n      this.setNavigation(nav)\r\n    \r\n  }\r\n\r\n  gotopage(setname: string){\r\n    this.$router.push(`/${this.shortname}/casegroup/${setname}`)\r\n    this.$router.go(0)\r\n    // this.$nextTick(function(){\r\n    //     console.log('in nextTick')\r\n    // })\r\n  }\r\n\r\n\r\n  created(){\r\n    this.fetch()\r\n  }\r\n\r\n  onresize(){\r\n      this.windowSize =  { x: window.innerWidth, y: window.innerHeight }\r\n      this.refreshtitlestyle()\r\n      this.refreshcubesize()\r\n  }\r\n\r\n  refreshcubesize(){\r\n      const width = window.innerWidth\r\n          // let size = []\r\n          if(width<600){\r\n                  this.cubesize = [125,125]\r\n              }else if(width<960){\r\n                  this.cubesize = [100,100]\r\n              }else if(width<1264){\r\n                  this.cubesize = [150,150]\r\n              }else if(width<1904){\r\n                  this.cubesize = [200,200]\r\n              }else{\r\n                  this.cubesize = [250,250]\r\n              }\r\n    }\r\n\r\n  refreshtitlestyle (): string {\r\n            const width =  this.windowSize.x\r\n            \r\n            let titlestyle =  ''\r\n            if(width<600){\r\n                titlestyle = 'font-size:14px'\r\n            }else if(width<960){\r\n                titlestyle += 'font-size:12px;padding:1px'\r\n            }else if(width<1264){\r\n                titlestyle += 'font-size:18px'\r\n            }else if(width<1904){\r\n                titlestyle += 'font-size:24px'\r\n            }else{\r\n                titlestyle += 'font-size:30px'\r\n            }\r\n            this.titlestyle = titlestyle\r\n            return titlestyle\r\n        }\r\n}\r\n\r\n\r\n\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./showSetOrSubSet.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./showSetOrSubSet.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./showSetOrSubSet.vue?vue&type=template&id=8906343c&\"\nimport script from \"./showSetOrSubSet.vue?vue&type=script&lang=ts&\"\nexport * from \"./showSetOrSubSet.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VHover } from 'vuetify/lib/components/VHover';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VCard,VCardTitle,VCol,VContainer,VHover,VRow})\n\n\n/* vuetify-loader */\nimport installDirectives from \"!../../node_modules/vuetify-loader/lib/runtime/installDirectives.js\"\nimport Resize from 'vuetify/lib/directives/resize'\ninstallDirectives(component, {Resize})\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport {\r\n  State,\r\n  Getter,\r\n  Action,\r\n  Mutation,\r\n  namespace\r\n} from 'vuex-class'\r\nimport {Component, Prop} from 'vue-property-decorator'\r\nimport showSetOrSubSet from './showSetOrSubSet.vue'\r\n// 直接渲染的版本\r\n// import VisualCube from '../plugins/cubestack/vue/Algplayer/index.vue'\r\n\r\n\r\nimport Render from '../plugins/v4/vue/Render/index.vue';\r\n\r\nimport { CubeCongfig } from '../plugins/v4/cuber/interfaces'\r\n\r\n@Component({name:'showCaseGroup',components:{showSetOrSubSet,Render}})\r\nexport default class Puzzles extends Vue{\r\n  \r\n  \r\n  @Prop()\r\n  puzzle: string\r\n  \r\n  @Prop()\r\n  setname: string \r\n\r\n  @State Navigation\r\n  @Action setNavigation\r\n\r\n  title: string  = ''\r\n  setisasubset = false\r\n\r\n  caseGroups = []\r\n\r\n  titlestyle = 'font-size:12px'\r\n  windowSize: any = { x: 0,y:0}\r\n\r\n\r\n  cubeconfig: CubeCongfig[] = []\r\n  cubesize: number[] \r\n\r\n  async fetch(){\r\n    // const group = await this.$http.get(`algdb/caseGroup?group=${this.setname}&size=100&page=1`)\r\n\r\n\r\n    //   algdb/caseGroup?case=vls&page=1&size=20\r\n    const res = await this.$http.get(`algdb/caseGroup?group=${this.setname}&size=100&page=1`)\r\n    if(res.data.data.length!=0){\r\n        this.caseGroups = res.data.data\r\n        this.title = res.data.data[0].caseGroupWholeName\r\n        for(let casegroup of this.caseGroups){\r\n          this.cubeconfig.push({\r\n            cubename : casegroup.name,\r\n            model: 'casegroup',\r\n            renderconfig:{\r\n                order: casegroup.puzzle == '222'? 2: 3,\r\n                scene:'^',\r\n                alg: casegroup.genAlgs,\r\n                masktype: casegroup.groupName\r\n            }\r\n        })\r\n    }\r\n    }else{\r\n        const haschildren =await this.$http.get(`algdb/puzzleset?set=${this.setname}&haschildren=true`)\r\n        if(haschildren.data.data.length!=0) {\r\n            this.setisasubset = true\r\n        }\r\n    }\r\n\r\n    \r\n  }\r\n\r\n    gotopage(casename: string){\r\n        const puzzle = this.puzzle\r\n        const group = this.caseGroups[0]['groupName']\r\n        this.$router.push(`/${puzzle}/${group}/case/${casename}`)\r\n    }\r\n\r\n\r\n    created(){\r\n        this.fetch()\r\n        this.refreshcubesize()\r\n        const params = this.$route.path.split('/')\r\n        const nav: object[] = [{\r\n            text:'Home',\r\n            disabled:false,\r\n            to:'/',\r\n        }]\r\n        if(params[1]=='333' || params[1]=='222'){\r\n          nav.push({\r\n            text: params[1],\r\n            disabled:false,\r\n            to:`/puzzle/${params[1]}`,\r\n         })\r\n         nav.push({\r\n            text: params[3],\r\n            disabled:true,\r\n            to:``,\r\n         })\r\n        }else{\r\n\r\n          nav.push({\r\n            text: '333',\r\n            disabled:false,\r\n            to:`/puzzle/333`,\r\n         })\r\n           nav.push({\r\n            text: params[3],\r\n            disabled:true,\r\n            to:`/${params[1]}/casegroup/${params[3]}`,\r\n        })\r\n\r\n        }\r\n        this.setNavigation(nav)\r\n    }\r\n\r\n    onresize(){\r\n        this.windowSize =  { x: window.innerWidth, y: window.innerHeight }\r\n        this.refreshtitlestyle()\r\n        this.refreshcubesize()\r\n    }\r\n\r\n    refreshcubesize(){\r\n          const width = window.innerWidth\r\n          // let size = []\r\n          if(width<600){\r\n              this.cubesize = [125,125]\r\n          }else if(width<960){\r\n              this.cubesize = [100,100]\r\n          }else if(width<1264){\r\n              this.cubesize = [150,150]\r\n          }else if(width<1904){\r\n              this.cubesize = [200,200]\r\n          }else{\r\n              this.cubesize = [250,250]\r\n          }\r\n    }\r\n\r\n    refreshtitlestyle (): string {\r\n            const width =  this.windowSize.x\r\n            \r\n            let titlestyle =  ''\r\n            if(width<600){\r\n                titlestyle = 'font-size:14px'\r\n            }else if(width<960){\r\n                titlestyle += 'font-size:12px;padding:1px'\r\n            }else if(width<1264){\r\n                titlestyle += 'font-size:18px'\r\n            }else if(width<1904){\r\n                titlestyle += 'font-size:24px'\r\n            }else{\r\n                titlestyle += 'font-size:30px'\r\n            }\r\n            this.titlestyle = titlestyle\r\n            return titlestyle\r\n        }\r\n}\r\n\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./v4showCaseGroup.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./v4showCaseGroup.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./v4showCaseGroup.vue?vue&type=template&id=152fe9b6&\"\nimport script from \"./v4showCaseGroup.vue?vue&type=script&lang=ts&\"\nexport * from \"./v4showCaseGroup.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VHover } from 'vuetify/lib/components/VHover';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VCard,VCardTitle,VCol,VContainer,VHover,VRow})\n\n\n/* vuetify-loader */\nimport installDirectives from \"!../../node_modules/vuetify-loader/lib/runtime/installDirectives.js\"\nimport Resize from 'vuetify/lib/directives/resize'\ninstallDirectives(component, {Resize})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{directives:[{name:\"resize\",rawName:\"v-resize\",value:(_vm.onresize),expression:\"onresize\"}],staticClass:\"puzzlecase\",attrs:{\"fluid\":\"\"}},[(_vm.usephoneLayout)?_c('div',[_c('v-col',{attrs:{\"cols\":\"12\",\"no-gutters\":\"\",\"justify-space-between\":\"\",\"align-center\":\"\"}},[_c('v-card',{staticClass:\"phonepannel\",attrs:{\"color\":\"#385F73\",\"dark\":\"\",\"elevation\":\"5\"}},[_c('div',{staticClass:\"d-flex flex-no-wrap justify-space-between\"},[_c('div',{staticClass:\"phonelayout\"},[_c('div',{staticClass:\"phonelayout-img\"},[_c('v-avatar',{attrs:{\"size\":\"90\",\"tile\":\"\"}},[_c('v-img',{attrs:{\"src\":_vm.Cases.imageSrc}})],1)],1),_c('div',{staticClass:\"phonelayout-title\"},[_c('v-card-title',{class:_vm.textConfig.ScreenTitle},[_vm._v(\" \"+_vm._s(_vm.ScreenCardTitle)+\" \")])],1),_c('div',{staticClass:\"phonelayout-name\"},[_c('p',{staticClass:\"body-1 text-center font-weight-black\"},[_vm._v(_vm._s(_vm.Cases.name))])]),_c('div',{staticClass:\"phonelayout-play\"},[_c('v-card-actions',{staticClass:\"flex-column justify-center\"},[_c('v-btn',{staticClass:\"subtitle-1\",attrs:{\"text\":\"\"}},[_vm._v(\"Play\")])],1)],1)])])])],1),_c('v-col',{attrs:{\"cols\":\"10\",\"offset\":\"1\",\"xs\":\"12\"}},[_c('v-simple-table',{attrs:{\"height\":\"600px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('thead',[_c('tr',[_c('th',{class:_vm.textConfig.header},[_vm._v(\"Algorithm\")]),_c('th',{class:_vm.textConfig.header},[_vm._v(\"Votes\")]),(!_vm.textConfig.hidedateanddes)?_c('th',{class:_vm.textConfig.header},[_vm._v(\"Date Added\")]):_vm._e(),(!_vm.textConfig.hidedateanddes)?_c('th',{class:_vm.textConfig.header},[_vm._v(\"Description\")]):_vm._e()])]),_c('tbody',_vm._l((_vm.Cases.caseAlgs),function(alg){return _c('tr',{key:alg.id,on:{\"click\":function($event){return _vm.algOnScreen(alg.moves)}}},[_c('td',{class:_vm.textConfig.alg},[_vm._v(_vm._s(alg.moves))]),_c('td',{class:_vm.textConfig.vote},[_c('v-chip',{attrs:{\"color\":_vm.getColor(alg.votes)}},[_vm._v(_vm._s(alg.votes))])],1)])}),0)]},proxy:true}],null,false,3704372440)})],1)],1):_c('div',[_c('v-row',[_c('v-col',{ref:\"Screen\",attrs:{\"cols\":\"10\",\"offset\":\"1\",\"no-gutters\":\"\",\"justify-space-between\":\"\",\"align-center\":\"\"}},[_c('v-hover',{attrs:{\"open-delay\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar hover = ref.hover;\nreturn [_c('v-card',{staticClass:\"webpannel\",attrs:{\"color\":\"#385F73\",\"dark\":\"\",\"elevation\":hover ? 16 : 2}},[_c('div',{staticClass:\"d-flex flex-no-wrap justify-space-between\"},[_c('v-avatar',{staticClass:\"ma-3\",attrs:{\"size\":_vm.textConfig.imagesize,\"tile\":\"\"}},[_c('v-img',{attrs:{\"src\":_vm.Cases.imageSrc}})],1),_c('v-card-title',{class:_vm.textConfig.ScreenTitle},[_vm._v(\" \"+_vm._s(_vm.ScreenCardTitle)+\" \")]),_c('v-card-actions',{staticClass:\"flex-column justify-center\"},[_c('p',{staticClass:\"subtitle-1 font-weight-black\"},[_vm._v(_vm._s(_vm.Cases.name))]),_c('v-btn',{staticClass:\"subtitle-1\",attrs:{\"text\":\"\"},on:{\"click\":_vm.toggle}},[_vm._v(\"Play\")])],1)],1)])]}}])})],1),_c('v-col',{staticClass:\"algspannel\",attrs:{\"cols\":\"10\",\"offset\":\"1\",\"xs\":\"12\"}},[_c('div',{ref:\"AlgsTable\",staticStyle:{\"width\":\"100%\"}},[_c('v-simple-table',{attrs:{\"max-height\":\"600px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('thead',[_c('tr',[_c('th',{class:_vm.textConfig.header},[_vm._v(\"Algorithm\")]),_c('th',{class:_vm.textConfig.header},[_vm._v(\"Votes\")]),(!_vm.textConfig.hidedateanddes)?_c('th',{class:_vm.textConfig.header},[_vm._v(\"Date Added\")]):_vm._e(),(!_vm.textConfig.hidedateanddes)?_c('th',{class:_vm.textConfig.header},[_vm._v(\"Description\")]):_vm._e()])]),_c('tbody',_vm._l((_vm.Cases.caseAlgs),function(alg){return _c('tr',{key:alg.id,on:{\"click\":function($event){return _vm.algOnScreen(alg.moves)}}},[_c('td',{class:_vm.textConfig.alg},[_vm._v(_vm._s(alg.moves))]),_c('td',{class:_vm.textConfig.vote},[_c('v-chip',{attrs:{\"color\":_vm.getColor(alg.votes)}},[_vm._v(_vm._s(alg.votes))])],1),(!_vm.textConfig.hidedateanddes)?_c('td',{class:_vm.textConfig.date},[_vm._v(_vm._s(alg.createDate))]):_vm._e(),(!_vm.textConfig.hidedateanddes)?_c('td',{class:_vm.textConfig.des}):_vm._e()])}),0)]},proxy:true}])})],1),_c('div',[_c('Render',{attrs:{\"worldin\":_vm.world,\"cubeconfig\":_vm.cubeconfig,\"cubesize\":_vm.cubesize}}),_c('Playbar',{ref:\"playbar\"})],1)])],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{style:({'padding-left': _vm.size / 2 + 'px','padding-right': _vm.size / 2 + 'px','padding-top': _vm.size * 0.2 + 'px'}),attrs:{\"xs12\":\"\"}},[_c('v-slider',{staticStyle:{\"margin\":\"0%\",\"padding\":\"0%\"},attrs:{\"hide-details\":\"\",\"thumb-label\":_vm.progress!=0?'always':false,\"ticks\":\"always\",\"max\":_vm.actions.length},scopedSlots:_vm._u([{key:\"thumb-label\",fn:function(){return [_vm._v(_vm._s(_vm.progress==0?'#':_vm.actions[_vm.progress - 1].value))]},proxy:true}]),model:{value:(_vm.progress),callback:function ($$v) {_vm.progress=$$v},expression:\"progress\"}})],1),_c('v-flex',{staticStyle:{\"display\":\"flex\"},style:({'padding-left': _vm.size / 4 + 'px','padding-right': _vm.size / 4 + 'px'}),attrs:{\"xs12\":\"\"}},[_c('v-btn',{style:(_vm.style),attrs:{\"text\":\"\",\"large\":\"\",\"disabled\":_vm.disable || (_vm.progress==0 && !_vm.chaos)},on:{\"click\":_vm.init}},[_c('v-icon',{attrs:{\"size\":_vm.size * 0.8}},[_vm._v(\"skip_previous\")])],1),_c('v-btn',{style:(_vm.style),attrs:{\"text\":\"\",\"large\":\"\",\"disabled\":_vm.disable || _vm.progress==0 || _vm.chaos},on:{\"click\":_vm.backward}},[_c('v-icon',{attrs:{\"size\":_vm.size * 0.8}},[_vm._v(\"fast_rewind\")])],1),_c('v-btn',{style:(_vm.style),attrs:{\"text\":\"\",\"large\":\"\",\"disabled\":_vm.disable || _vm.progress == _vm.actions.length || _vm.chaos},on:{\"click\":_vm.toggle}},[_c('v-icon',{attrs:{\"size\":_vm.size * 0.8}},[_vm._v(_vm._s(_vm.playing?'pause':'play_arrow'))])],1),_c('v-btn',{style:(_vm.style),attrs:{\"text\":\"\",\"large\":\"\",\"disabled\":_vm.disable || _vm.progress == _vm.actions.length || _vm.chaos},on:{\"click\":_vm.forward}},[_c('v-icon',{attrs:{\"size\":_vm.size * 0.8}},[_vm._v(\"fast_forward\")])],1),_c('v-btn',{style:(_vm.style),attrs:{\"text\":\"\",\"large\":\"\",\"disabled\":_vm.disable || (_vm.progress==_vm.actions.length) || _vm.chaos},on:{\"click\":_vm.finish}},[_c('v-icon',{attrs:{\"size\":_vm.size * 0.8}},[_vm._v(\"skip_next\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from \"vue\";\r\nimport { Component, Prop, Watch, Inject } from \"vue-property-decorator\";\r\nimport { TwistAction, TwistNode } from \"../../cuber/twister\";\r\nimport World from \"../../cuber/world\";\r\n\r\n@Component({\r\n  name: 'Playbar',\r\n  components: {},\r\n})\r\nexport default class Playbar extends Vue {\r\n  @Inject(\"world\")\r\n  world: World;\r\n\r\n  @Prop({ required: false, default: false })\r\n  disable: boolean;\r\n\r\n  size: number = 0;\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  mounted() {\r\n    this.world.callbacks.push(() => {\r\n      this.callback();\r\n    });\r\n  }\r\n\r\n  resize(size: number) {\r\n    this.size = size;\r\n  }\r\n\r\n  get style() {\r\n    return {\r\n      width: this.size + \"px\",\r\n      height: this.size + \"px\",\r\n      \"min-width\": \"0%\",\r\n      \"min-height\": \"0%\",\r\n      \"text-transform\": \"none\",\r\n      flex: 1,\r\n    };\r\n  }\r\n\r\n  playing: boolean = false;\r\n  pprogress: number = 0;\r\n\r\n  get progress() {\r\n    return this.pprogress;\r\n  }\r\n  set progress(value) {\r\n    this.init();\r\n    for (let i = 0; i < value; i++) {\r\n      let action = this.actions[i];\r\n      this.world.twister.twist(action.group, action.reverse, action.times, true);\r\n    }\r\n    this.pprogress = value;\r\n  }\r\n\r\n  @Watch(\"progress\")\r\n  onProgressChange() {\r\n    this.world.controller.lock = this.progress > 0;\r\n  }\r\n\r\n  scene: string = \"\";\r\n  @Watch(\"scene\")\r\n  onSceneChange() {\r\n    this.init();\r\n  }\r\n\r\n  action: string = \"\";\r\n  actions: TwistAction[] = [];\r\n  @Watch(\"action\")\r\n  onActionChange() {\r\n    this.actions = new TwistNode(this.action).parse();\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    this.world.controller.lock = false;\r\n    this.playing = false;\r\n    this.pprogress = 0;\r\n    this.world.twister.finish();\r\n    this.world.twister.twist(\"#\");\r\n    let scene = this.scene.replace(\"^\", \"(\" + this.action + \")'\");\r\n    this.world.twister.twist(scene, false, 1, true);\r\n    this.world.cube.history.clear();\r\n  }\r\n\r\n  finish() {\r\n    this.init();\r\n    this.world.twister.twist(this.action, false, 1, true);\r\n    this.pprogress = this.actions.length;\r\n  }\r\n\r\n  callback() {\r\n    if (this.playing) {\r\n      if (this.pprogress == this.actions.length) {\r\n        if (this.playing) {\r\n          this.playing = false;\r\n        }\r\n        return;\r\n      }\r\n      let action = this.actions[this.pprogress];\r\n      this.pprogress++;\r\n      this.world.twister.twist(action.group, action.reverse, action.times, false);\r\n    }\r\n  }\r\n\r\n  toggle() {\r\n    if (this.playing) {\r\n      this.playing = false;\r\n    } else {\r\n      if (this.pprogress == 0) {\r\n        this.init();\r\n      }\r\n      this.playing = true;\r\n      this.callback();\r\n    }\r\n  }\r\n\r\n  forward() {\r\n    if (this.pprogress == this.actions.length) {\r\n      return;\r\n    }\r\n    if (this.pprogress == 0) {\r\n      this.init();\r\n    }\r\n    this.playing = false;\r\n    let action = this.actions[this.pprogress];\r\n    this.pprogress++;\r\n    this.world.twister.twist(action.group, action.reverse, action.times);\r\n  }\r\n\r\n  backward() {\r\n    if (this.pprogress == 0) {\r\n      return;\r\n    }\r\n    this.playing = false;\r\n    this.pprogress--;\r\n    let action = this.actions[this.pprogress];\r\n    this.world.twister.twist(action.group, !action.reverse, action.times);\r\n  }\r\n\r\n  get chaos() {\r\n    return this.progress == 0 && this.world.cube.history.length != 0;\r\n  }\r\n}\r\n\r\n\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=4908a695&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=ts&\"\nexport * from \"./index.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4908a695\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VFlex } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VLayout } from 'vuetify/lib/components/VGrid';\nimport { VSlider } from 'vuetify/lib/components/VSlider';\ninstallComponents(component, {VBtn,VFlex,VIcon,VLayout,VSlider})\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport {\r\n  State,\r\n  Getter,\r\n  Action,\r\n  Mutation,\r\n  namespace\r\n} from 'vuex-class'\r\nimport {Component, Prop, Ref, Provide} from 'vue-property-decorator'\r\nimport Render from '../plugins/v4/vue/Render/index.vue';\r\nimport Playbar from '../plugins/v4/vue/Playbar/index.vue';\r\nimport { CubeCongfig } from '../plugins/v4/cuber/interfaces'\r\nimport World from '../plugins/v4/cuber/world';\r\n/* eslint-disable @typescript-eslint/no-inferrable-types */\r\n\r\ninterface algdbcase {\r\n    class?: string\r\n    puzzle?: string\r\n    groupName?: string\r\n    caseName?: string\r\n    name?: string\r\n    shortName?: string\r\n    caseGroupWholeName?: string\r\n    genAlgs?: string\r\n    imageSrc?: string\r\n    updatedAt?: string\r\n    caseAlgs?: object[]\r\n}\r\n\r\n@Component({name:'showCase',components:{Render,Playbar}})\r\nexport default class Puzzles extends Vue{\r\n\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    @Prop()\r\n    casename: string \r\n\r\n    @Prop()\r\n    group: string\r\n\r\n    @Prop()\r\n    puzzle: string\r\n\r\n    @Ref('playbar') playbar: Playbar\r\n\r\n    @State Navigation\r\n    @Action setNavigation\r\n\r\n    @Provide()\r\n    world: World = new World()\r\n\r\n    cubeconfig: CubeCongfig = {}\r\n    cubesize: number[] = []\r\n    \r\n\r\n\r\n    ScreenCardTitle: string = ''\r\n\r\n    textConfig: object = {\r\n        ScreenTitle: 'display-2 font-weight-black justify-center align-center',\r\n        header : 'headline text-left',\r\n        bodydefault : 'title text-left',\r\n        alg : 'headline text-left font-weight-bold',\r\n        vote : 'headline text-center',\r\n        date : 'body-1 text-left',\r\n        des : 'body-1 text-left',\r\n        hidedateanddes : false,\r\n        imagesize:125\r\n    }\r\n\r\n    Cases: algdbcase = {}\r\n\r\n    usephoneLayout: boolean = false \r\n    titlestyle: string = 'font-size:12px'\r\n    windowSize: any = { x: 0,y:0}\r\n\r\n    async fetch(){\r\n        if(this.puzzle!='222'&& this.puzzle!='333'){\r\n            this.puzzle = '333'\r\n        }\r\n        const res = await this.$http.get(`algdb/case?puzzle=${this.puzzle}&case=${this.casename}&group=${this.group}&size=20&page=1`)\r\n        this.Cases = res.data.data[0]\r\n        this.ScreenCardTitle = this.Cases['caseAlgs'][0]['moves']\r\n\r\n        \r\n        this.cubeconfig = {\r\n            cubename : this.Cases.name,\r\n            model: 'case',\r\n            renderconfig:{\r\n                order: this.Cases.puzzle == '222'? 2: 3,\r\n                scene:'^',\r\n                alg: this.Cases.genAlgs,\r\n                masktype: this.Cases.groupName,\r\n                coverImgNotModel: false\r\n            },\r\n            playerconfig: {\r\n                hoverplay: false,\r\n                autoplay: false,\r\n                breath: true,\r\n                lock:false,\r\n                loop:false\r\n            }\r\n        }\r\n\r\n        this.playbar.scene = '^'\r\n        this.playbar.action = this.Cases['caseAlgs'][0]['moves']\r\n    }\r\n\r\n    mounted(){\r\n        this.world.dirty = true\r\n    }\r\n\r\n    created(){\r\n        this.fetch()\r\n        this.calVisualCubeSize()\r\n        const params = this.$route.path.split('/')\r\n        const nav: object[] = [{\r\n            text:'Home',\r\n            disabled:false,\r\n            to:'/',\r\n        }]\r\n        nav.push({\r\n            text: params[1],\r\n            disabled:false,\r\n            to:`/puzzle/${params[1]}`,\r\n        })\r\n        nav.push({\r\n            text: params[2],\r\n            disabled:false,\r\n            to:`/${params[1]}/casegroup/${params[2]}`,\r\n        })\r\n        nav.push({\r\n            text: params[4],\r\n            disabled:true,\r\n            to:`/case/${params[4]}`,\r\n        })\r\n        this.setNavigation(nav)\r\n    }\r\n\r\n    onresize(){\r\n        this.windowSize =  { x: window.innerWidth, y: window.innerHeight }\r\n        this.calVisualCubeSize()\r\n        this.refreshtitlestyle()\r\n    }\r\n\r\n    getColor (calories) {\r\n        if (calories > 300) return 'red lighten-2'\r\n        else if (calories > 200) return 'orange lighten-2'\r\n        else if (calories > 100)return 'green lighten-2'\r\n        else if (calories > 50)return 'teal lighten-2'\r\n        else if (calories > 20)return 'purple lighten-4'\r\n        else return 'grey lighten-2'\r\n    }\r\n\r\n\r\n\r\n    algOnScreen(moves){\r\n        this.ScreenCardTitle = moves\r\n        this.playbar.scene = '^'\r\n        this.playbar.action = moves\r\n    }\r\n\r\n    toggle(){\r\n        this.playbar.toggle()\r\n    }\r\n\r\n    calVisualCubeSize(){\r\n        if(this.usephoneLayout){\r\n            const height = window.innerHeight*0.6\r\n            const width = window.innerWidth*0.9\r\n            this.cubesize = [width,height]\r\n        }else{\r\n            \r\n            const width = window.innerWidth\r\n           \r\n            // let size = []\r\n            if(width<600){\r\n                this.cubesize = [250,250]\r\n            }else if(width<960){\r\n                this.cubesize = [300,300]\r\n            }else if(width<1264){\r\n                this.cubesize = [400,400]\r\n            }else if(width<1904){\r\n                this.cubesize = [450,450]\r\n            }else{\r\n                this.cubesize = [500,500]\r\n            }\r\n            this.playbar?.resize(50)\r\n        }\r\n        \r\n        \r\n    }\r\n\r\n    refreshtitlestyle (): string {\r\n            const width =  this.windowSize.x\r\n            const defaultconfig: any = {\r\n                                ScreenTitle: 'font-weight-black justify-center align-center',\r\n                                header : 'text-left',\r\n                                bodydefault : 'text-left',\r\n                                alg : 'text-left font-weight-bold',\r\n                                vote : 'text-center',\r\n                                date : 'text-left',\r\n                                des : 'text-left',\r\n                                hidedateanddes : false,\r\n                                imagesize:125\r\n                            }\r\n\r\n\r\n\r\n            if(width<600){\r\n               defaultconfig.ScreenTitle +=(this.ScreenCardTitle.length>0 && this.ScreenCardTitle.length<20) ? ' display-1' : ' headline'\r\n                defaultconfig.header += ' title'\r\n                defaultconfig.bodydefault += ' title'\r\n                defaultconfig.alg += ' body-1'\r\n                defaultconfig.vote += ' body-1'\r\n                defaultconfig.date += ' body-1'\r\n                defaultconfig.des += ' body-1'\r\n                defaultconfig.hidedateanddes = true\r\n                defaultconfig.imagesize = 80\r\n                this.usephoneLayout = true\r\n                \r\n            }else if(width<960){\r\n               defaultconfig.ScreenTitle +=(this.ScreenCardTitle.length>0 && this.ScreenCardTitle.length<20) ? ' display-2' : ' display-1'\r\n                defaultconfig.header += ' title'\r\n                defaultconfig.bodydefault += ' title'\r\n                defaultconfig.alg += ' title'\r\n                defaultconfig.vote += ' title'\r\n                defaultconfig.date += ' body-1'\r\n                defaultconfig.des += ' body-1'\r\n                defaultconfig.hidedateanddes = true\r\n                this.usephoneLayout = false\r\n            }else if(width<1264){\r\n                defaultconfig.ScreenTitle +=(this.ScreenCardTitle.length>0 && this.ScreenCardTitle.length<20) ? ' display-2' :  ' display-1'\r\n                defaultconfig.header += ' title'\r\n                defaultconfig.bodydefault += ' title'\r\n                defaultconfig.alg += ' title'\r\n                defaultconfig.vote += ' title'\r\n                defaultconfig.date += ' body-1'\r\n                defaultconfig.des += ' body-1'\r\n                this.usephoneLayout = false\r\n            }else if(width<1400){\r\n                defaultconfig.ScreenTitle +=(this.ScreenCardTitle.length>0 && this.ScreenCardTitle.length<20) ? ' display-2' : ' display-1'\r\n                defaultconfig.header += ' headline'\r\n                defaultconfig.bodydefault += ' title'\r\n                defaultconfig.alg += ' headline'\r\n                defaultconfig.vote += ' headline'\r\n                defaultconfig.date += ' body-1'\r\n                defaultconfig.des += ' body-1'\r\n            }else{\r\n                defaultconfig.ScreenTitle += (this.ScreenCardTitle.length>0 && this.ScreenCardTitle.length<20) ? ' display-3' : ' display-2'\r\n                defaultconfig.header += ' headline'\r\n                defaultconfig.bodydefault += ' title'\r\n                defaultconfig.alg += ' headline'\r\n                defaultconfig.vote += ' headline'\r\n                defaultconfig.date += ' body-1'\r\n                defaultconfig.des += ' body-1'\r\n            }\r\n            this.textConfig = defaultconfig\r\n            return defaultconfig\r\n        }\r\n}\r\n\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./v4showCase.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./v4showCase.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./v4showCase.vue?vue&type=template&id=28145261&scoped=true&\"\nimport script from \"./v4showCase.vue?vue&type=script&lang=ts&\"\nexport * from \"./v4showCase.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./v4showCase.vue?vue&type=style&index=0&id=28145261&lang=css&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"28145261\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VChip } from 'vuetify/lib/components/VChip';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VHover } from 'vuetify/lib/components/VHover';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSimpleTable } from 'vuetify/lib/components/VDataTable';\ninstallComponents(component, {VAvatar,VBtn,VCard,VCardActions,VCardTitle,VChip,VCol,VContainer,VHover,VImg,VRow,VSimpleTable})\n\n\n/* vuetify-loader */\nimport installDirectives from \"!../../node_modules/vuetify-loader/lib/runtime/installDirectives.js\"\nimport Resize from 'vuetify/lib/directives/resize'\ninstallDirectives(component, {Resize})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('VisualCube',{attrs:{\"cubeconfig\":_vm.VisualcubeConfig[0]}}),_c('VisualCube',{attrs:{\"cubeconfig\":_vm.VisualcubeConfig[1]}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-sheet',{staticClass:\"visualcube\",attrs:{\"elevation-10\":\"\",\"color\":\"white lighten-1\"},on:{\"mouseenter\":_vm.hoverin,\"mouseleave\":_vm.hoverout}},[_c('div',{ref:\"cubediv\",staticClass:\"cubediv\"}),_c('div',{ref:_vm.renderconfig.refname,staticClass:\"cubediv\"}),(_vm.playerconfig.enable)?_c('player',{ref:\"player\",style:(_vm.playerhide),attrs:{\"autoplay\":_vm.playerconfig.autoplay,\"loop\":_vm.playerconfig.loop}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{style:({'padding-left': _vm.size / 2 + 'px','padding-right': _vm.size / 2 + 'px','padding-top': _vm.size * 0.2 + 'px'}),attrs:{\"xs12\":\"\"}},[_c('v-slider',{staticStyle:{\"margin\":\"0%\",\"padding\":\"0%\"},attrs:{\"readonly\":\"\",\"hide-details\":\"\",\"thumb-label\":_vm.progress!=0?'always':false,\"ticks\":\"always\",\"max\":_vm.actions.length},scopedSlots:_vm._u([{key:\"thumb-label\",fn:function(){return [_vm._v(_vm._s(_vm.progress==0?'#':_vm.actions[_vm.progress - 1].value))]},proxy:true}]),model:{value:(_vm.progress),callback:function ($$v) {_vm.progress=$$v},expression:\"progress\"}})],1),_c('v-flex',{staticStyle:{\"display\":\"flex\"},style:({'padding-left': _vm.size / 4 + 'px','padding-right': _vm.size / 4 + 'px'}),attrs:{\"xs12\":\"\"}},[_c('v-btn',{style:(_vm.style),attrs:{\"text\":\"\",\"large\":\"\",\"disabled\":_vm.disable || _vm.progress==0},on:{\"click\":_vm.init}},[_c('v-icon',{attrs:{\"size\":_vm.size * 0.8}},[_vm._v(\"skip_previous\")])],1),_c('v-btn',{style:(_vm.style),attrs:{\"text\":\"\",\"large\":\"\",\"disabled\":_vm.disable || _vm.progress==0},on:{\"click\":_vm.backward}},[_c('v-icon',{attrs:{\"size\":_vm.size * 0.8}},[_vm._v(\"fast_rewind\")])],1),_c('v-btn',{style:(_vm.style),attrs:{\"text\":\"\",\"large\":\"\",\"disabled\":_vm.disable || _vm.progress == _vm.actions.length},on:{\"click\":_vm.toggle}},[_c('v-icon',{attrs:{\"size\":_vm.size * 0.8}},[_vm._v(_vm._s(_vm.playing?'pause':'play_arrow'))])],1),_c('v-btn',{style:(_vm.style),attrs:{\"text\":\"\",\"large\":\"\",\"disabled\":_vm.disable || _vm.progress == _vm.actions.length},on:{\"click\":_vm.forward}},[_c('v-icon',{attrs:{\"size\":_vm.size * 0.8}},[_vm._v(\"fast_forward\")])],1),_c('v-btn',{style:(_vm.style),attrs:{\"text\":\"\",\"large\":\"\",\"disabled\":_vm.disable || (_vm.progress==_vm.actions.length)},on:{\"click\":_vm.finish}},[_c('v-icon',{attrs:{\"size\":_vm.size * 0.8}},[_vm._v(\"skip_next\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import {Cuber} from \".\";\r\n\r\nexport default class Twister {\r\n  queue: TwistAction[];\r\n  cuber: Cuber;\r\n  constructor(cuber: Cuber) {\r\n    this.cuber = cuber\r\n    this.queue = [];\r\n  }\r\n\r\n  static shuffle(order: number) {\r\n    let result = \"\";\r\n    let exps = [];\r\n    let last = -1;\r\n    let actions = [\"U\", \"D\", \"R\", \"L\", \"F\", \"B\"];\r\n    let axis = -1;\r\n    for (let i = 0; i < 3 * 3 * order; i++) {\r\n      let exp = [];\r\n      while (axis == last) {\r\n        axis = Math.floor(Math.random() * 3);\r\n      }\r\n      let prefix = Math.ceil(Math.random() * Math.floor(order / 2));\r\n      exp.push(prefix == 1 ? \"\" : prefix);\r\n      let side = Math.floor(Math.random() * 2);\r\n      exp.push(actions[axis * 2 + side]);\r\n      let suffix = Math.random();\r\n      if (suffix < 0.2) {\r\n        exp.push(\"2\");\r\n      } else if (suffix < 0.6) {\r\n        exp.push(\"'\");\r\n      }\r\n      exps.push(exp.join(\"\"));\r\n      last = axis;\r\n    }\r\n    result = exps.join(\" \");\r\n    return result;\r\n  }\r\n\r\n  get length() {\r\n    return this.queue.length;\r\n  }\r\n\r\n  finish() {\r\n    for (const action of this.queue) {\r\n      action.fast = true;\r\n    }\r\n    this.cuber.tweener.finish();\r\n  }\r\n\r\n  twist(exp: string, reverse = false, times = 1, fast = false) {\r\n    if (this.queue.length > 0) {\r\n      this.cuber.tweener.finish();\r\n      this.update();\r\n    }\r\n    this.cuber.tweener.speedup();\r\n    let node = new TwistNode(exp, reverse, times);\r\n    let list = node.parse();\r\n    for (let element of list) {\r\n      element.fast = fast;\r\n      this.queue.push(element);\r\n    }\r\n    this.update();\r\n  }\r\n\r\n  push(action: TwistAction) {\r\n    this.queue.push(action);\r\n    this.update();\r\n  }\r\n\r\n  update() {\r\n    if (this.queue.length === 0) {\r\n      return;\r\n    }\r\n    if (this.cuber.world.cube.lock) {\r\n      return;\r\n    }\r\n    let twist = this.queue.shift();\r\n    if (undefined == twist) {\r\n      return;\r\n    }\r\n    this.start(twist);\r\n  }\r\n\r\n  start(action: TwistAction) {\r\n    if (action.exp == \"~\") {\r\n      if (action.fast) {\r\n        this.cuber.world.callback();\r\n        return;\r\n      }\r\n      this.cuber.tweener.tween(0, 1, (this.cuber.preferance.frames / 2) * action.times, (value: number) => {\r\n        if (value === 1) {\r\n          this.cuber.world.callback();\r\n          return;\r\n        }\r\n      });\r\n      return;\r\n    }\r\n    if (action.exp == \"#\") {\r\n      this.cuber.history.clear();\r\n      this.cuber.world.cube.reset();\r\n      this.cuber.world.cube.dirty = true;\r\n      this.cuber.world.callback();\r\n      return;\r\n    }\r\n    if (action.exp == \"*\") {\r\n      let exp = Twister.shuffle(this.cuber.world.cube.order);\r\n      this.twist(exp, false, 1, true);\r\n      this.cuber.history.clear();\r\n      return;\r\n    }\r\n    let angle = -Math.PI / 2;\r\n    if (action.reverse) {\r\n      angle = -angle;\r\n    }\r\n    if (action.times) {\r\n      angle = angle * action.times;\r\n    }\r\n    let part = this.cuber.world.cube.groups.get(action.exp);\r\n    if (part === undefined) {\r\n      this.update();\r\n      return;\r\n    }\r\n    part.angle = 0;\r\n    part.hold();\r\n\r\n    if (action.fast) {\r\n      part.angle = angle;\r\n    }\r\n    part.twist(angle);\r\n    return;\r\n  }\r\n}\r\n\r\nexport class TwistAction {\r\n  exp: string;\r\n  reverse: boolean;\r\n  times: number;\r\n  fast: boolean;\r\n  constructor(exp: string, reverse: boolean = false, times: number = 1, fast: boolean = false) {\r\n    this.exp = exp;\r\n    this.reverse = reverse;\r\n    this.times = times;\r\n    this.fast = fast;\r\n  }\r\n\r\n  get value() {\r\n    let times = this.times;\r\n    let reverse = this.reverse;\r\n    if (times === 3) {\r\n      times = 1;\r\n      reverse = !reverse;\r\n    }\r\n    if (times === 2) {\r\n      reverse = false;\r\n    }\r\n    return times == 0 ? \"\" : this.exp + (reverse ? \"'\" : \"\") + (times == 1 ? \"\" : String(times));\r\n  }\r\n}\r\n\r\nexport class TwistNode {\r\n  static AFFIX = \"'Ww0123456789-\";\r\n  children: TwistNode[];\r\n  twist: TwistAction;\r\n  static SPLIT_SEGMENT(exp: string) {\r\n    let list = [];\r\n    let buffer = \"\";\r\n    let stack = 0;\r\n    let ready = false;\r\n    let note = false;\r\n    for (let i = 0; i < exp.length; i++) {\r\n      let c = exp.charAt(i);\r\n      if (c === \" \" && buffer.length == 0) {\r\n        continue;\r\n      }\r\n      if (c === \"/\" && exp.charAt(i + 1) === \"/\") {\r\n        i++;\r\n        note = true;\r\n        continue;\r\n      }\r\n      if (c === \"\\n\") {\r\n        note = false;\r\n        continue;\r\n      }\r\n      if (note) {\r\n        continue;\r\n      }\r\n      // 后缀可以持续增加\r\n      if (TwistNode.AFFIX.indexOf(c) >= 0) {\r\n        buffer = buffer.concat(c);\r\n        continue;\r\n      }\r\n      // 非后缀检查是否可以中断\r\n      if (buffer.length > 0 && stack == 0 && ready) {\r\n        list.push(buffer);\r\n        buffer = \"\";\r\n        i--;\r\n        ready = false;\r\n        continue;\r\n      }\r\n      //  如果有括号 记录stack\r\n      if (c === \"(\" || c === \"[\") {\r\n        buffer = buffer.concat(c);\r\n        stack++;\r\n        continue;\r\n      }\r\n      if (c === \")\" || c === \"]\") {\r\n        buffer = buffer.concat(c);\r\n        stack--;\r\n        continue;\r\n      }\r\n      ready = true;\r\n      buffer = buffer.concat(c);\r\n    }\r\n    if (buffer.length > 0) {\r\n      list.push(buffer);\r\n    }\r\n    return list;\r\n  }\r\n\r\n  static SPLIT_BRACKET(exp: string) {\r\n    let list = [];\r\n    let buffer = \"\";\r\n    let stack = 0;\r\n    for (let i = 0; i < exp.length; i++) {\r\n      let c = exp.charAt(i);\r\n      // 非后缀检查是否可以中断\r\n      if (stack == 0 && (c === \",\" || c === \":\")) {\r\n        list.push(buffer);\r\n        list.push(c);\r\n        buffer = \"\";\r\n        continue;\r\n      }\r\n      //  如果有括号 记录stack\r\n      if (c === \"(\" || c === \"[\") {\r\n        buffer = buffer.concat(c);\r\n        stack++;\r\n        continue;\r\n      }\r\n      if (c === \")\" || c === \"]\") {\r\n        buffer = buffer.concat(c);\r\n        stack--;\r\n        continue;\r\n      }\r\n      buffer = buffer.concat(c);\r\n    }\r\n    if (buffer.length > 0) {\r\n      list.push(buffer);\r\n    }\r\n    return list;\r\n  }\r\n\r\n  constructor(exp: string, reverse = false, times = 1) {\r\n    // 合法性校验\r\n    this.children = [];\r\n    this.twist = new TwistAction(exp, reverse, times);\r\n    // 不用解析场景\r\n    if (exp.match(/^[0123456789-]*[\\*~#xyzbsfdeulmr][w]*$/gi)) {\r\n      if (/[XYZ]/.test(this.twist.exp)) {\r\n        this.twist.exp = this.twist.exp.toLowerCase();\r\n      }\r\n      return;\r\n    }\r\n    let list = TwistNode.SPLIT_SEGMENT(exp);\r\n    for (let item of list) {\r\n      let values;\r\n      // 只有[]\r\n      values = item.match(/^\\[(.+[:|,].+)\\]$/i);\r\n      if (values) {\r\n        values = TwistNode.SPLIT_BRACKET(values[1]);\r\n        switch (values[1]) {\r\n          case \",\":\r\n            this.children.push(new TwistNode(values[0], false, 1));\r\n            this.children.push(new TwistNode(values[2], false, 1));\r\n            this.children.push(new TwistNode(values[0], true, 1));\r\n            this.children.push(new TwistNode(values[2], true, 1));\r\n            break;\r\n          case \":\":\r\n            this.children.push(new TwistNode(values[0], false, 1));\r\n            this.children.push(new TwistNode(values[2], false, 1));\r\n            this.children.push(new TwistNode(values[0], true, 1));\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        continue;\r\n      }\r\n      // []'2\r\n      values = item.match(/^(\\[.+[:|,].+\\])('?)(\\d*)('?)$/i);\r\n      if (values === null) {\r\n        // 拆解括号\r\n        values = item.match(/^\\((.+)\\)('?)(\\d*)('?)$/i);\r\n      }\r\n      // 无括号\r\n      if (values === null) {\r\n        values = item.match(/([0123456789-]*[\\*\\#~xyzbsfdeulmr][w]*)('?)(\\d*)('?)/i);\r\n      }\r\n      // 异常情况\r\n      if (null === values) {\r\n        return;\r\n      }\r\n      let reverse = (values[2] + values[4]).length == 1;\r\n      let times = values[3].length == 0 ? 1 : parseInt(values[3]);\r\n      this.children.push(new TwistNode(values[1], reverse, times));\r\n    }\r\n  }\r\n\r\n  parse(reverse = false) {\r\n    reverse = this.twist.reverse !== reverse;\r\n    let _result: TwistAction[] = [];\r\n    if (0 !== this.children.length) {\r\n      for (var i = 0; i < this.twist.times; i++) {\r\n        for (var j = 0; j < this.children.length; j++) {\r\n          var n;\r\n          if (reverse) {\r\n            n = this.children[this.children.length - j - 1];\r\n          } else {\r\n            n = this.children[j];\r\n          }\r\n          var list = n.parse(reverse);\r\n          for (let element of list) {\r\n            _result.push(element);\r\n          }\r\n        }\r\n      }\r\n    } else if (this.twist.exp != \"\") {\r\n      let action = new TwistAction(this.twist.exp, reverse, this.twist.times);\r\n      _result.push(action);\r\n    }\r\n    return _result;\r\n  }\r\n\r\n  get value() {\r\n    return this.twist.value;\r\n  }\r\n}\r\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from \"vue\";\r\nimport { Component, Prop, Watch } from \"vue-property-decorator\";\r\nimport { TwistAction, TwistNode } from \"../../cuber/twister\";\r\nimport {Cuber} from \"../../cuber\";\r\n\r\n@Component({\r\n  name: 'PLayer',\r\n  components: {}\r\n})\r\n\r\nexport default class Player extends Vue {\r\n  @Prop({ required: false, default: false })\r\n  disable: boolean;\r\n\r\n\r\n  @Prop()\r\n  autoplay: boolean\r\n\r\n  @Prop()\r\n  loop: boolean\r\n\r\n  cuber: Cuber\r\n\r\n  size: number = 0;\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  mounted() {\r\n    // console.log(this.cubename)\r\n    // console.log(this.$cuberender)\r\n    // this.cuber = this.$cuberender.pagecubes[this.cubename].cuber\r\n    // setTimeout(() => {\r\n    //   this.cuber.world.callbacks.push(() => {\r\n    //   this.callback();\r\n    //   });\r\n    // }, 2000);\r\n\r\n    // console.log(this.cuber)\r\n    \r\n  }\r\n\r\n  resize(size: number) {\r\n    this.size = size;\r\n  }\r\n\r\n  get style() {\r\n    return {\r\n      width: this.size + \"px\",\r\n      height: this.size + \"px\",\r\n      \"min-width\": \"0%\",\r\n      \"min-height\": \"0%\",\r\n      \"text-transform\": \"none\",\r\n      flex: 1\r\n    };\r\n  }\r\n\r\n\r\n\r\n\r\n  playing: boolean = false;\r\n  progress: number = 0;\r\n  @Watch(\"progress\")\r\n  onProgressChange() {\r\n    this.cuber.controller.lock = this.progress > 0;\r\n  }\r\n\r\n  scene: string = \"\";\r\n  @Watch(\"scene\")\r\n  onSceneChange() {\r\n    this.init();\r\n  }\r\n\r\n  action: string = \"\";\r\n  actions: TwistAction[] = [];\r\n  @Watch(\"action\")\r\n  onActionChange() {\r\n    this.actions = new TwistNode(this.action).parse();\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    // this.cuber.controller.lock = false;\r\n    this.playing = false;\r\n    this.progress = 0;\r\n    this.cuber.controller.disable = false;\r\n    this.cuber.twister.finish();\r\n    this.cuber.twister.twist(\"#\");\r\n    let scene = this.scene == \"^\" ? \"(\" + this.action + \")'\" : this.scene;\r\n    this.cuber.twister.twist(scene, false, 1, true);\r\n    this.cuber.history.clear();\r\n    if(this.autoplay){\r\n      setTimeout(() => {\r\n        this.playing = true\r\n        this.callback();\r\n      }, 1000);\r\n    }\r\n  }\r\n\r\n  finish() {\r\n    this.init();\r\n    this.cuber.twister.twist(this.action, false, 1, true);\r\n    this.progress = this.actions.length;\r\n  }\r\n\r\n  callback() {\r\n    if (this.playing) {\r\n      if (this.progress == this.actions.length) {\r\n        if (this.playing) {\r\n          this.playing = false;\r\n          setTimeout(() => {\r\n              if(this.loop){\r\n              this.init()\r\n              }\r\n          }, 2000);\r\n        }\r\n        return;\r\n      }\r\n      let action = this.actions[this.progress];\r\n      this.progress++;\r\n      this.cuber.twister.twist(action.exp, action.reverse, action.times, false);\r\n    }\r\n  }\r\n\r\n  toggle() {\r\n    if (this.playing) {\r\n      this.playing = false;\r\n    } else {\r\n      if (this.progress == 0) {\r\n        this.init();\r\n      }\r\n      this.playing = true;\r\n      this.callback();\r\n    }\r\n  }\r\n\r\n  forward() {\r\n    if (this.progress == this.actions.length) {\r\n      return;\r\n    }\r\n    if (this.progress == 0) {\r\n      this.init();\r\n    }\r\n    this.playing = false;\r\n    let action = this.actions[this.progress];\r\n    this.progress++;\r\n    this.cuber.twister.twist(action.exp, action.reverse, action.times);\r\n  }\r\n\r\n  backward() {\r\n    if (this.progress == 0) {\r\n      return;\r\n    }\r\n    this.playing = false;\r\n    this.progress--;\r\n    let action = this.actions[this.progress];\r\n    this.cuber.twister.twist(action.exp, !action.reverse, action.times);\r\n  }\r\n}\r\n\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=0152a083&\"\nimport script from \"./index.vue?vue&type=script&lang=ts&\"\nexport * from \"./index.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VFlex } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VLayout } from 'vuetify/lib/components/VGrid';\nimport { VSlider } from 'vuetify/lib/components/VSlider';\ninstallComponents(component, {VBtn,VFlex,VIcon,VLayout,VSlider})\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    import Vue from 'vue'\n    import { Component, Watch, Prop, Ref } from \"vue-property-decorator\";\n    import '../../index.css'\n\n    import Player from \"../Player/index.vue\";\n    import {Cuber} from '../../cuber'\nimport { RenderConfig, Playerconfig, CubeCongfig } from '../../cuber/interface';\n    @Component({\n    name:'VisualCubeCoverImg',\n    components: {Player}\n    })\n    export default class VisualCube extends Vue {\n\n    // CubeStageMask = require('./strip.json')\n    renderconfig: RenderConfig\n    playerconfig: Playerconfig\n    cuberef: any\n    cubename: string\n\n    cuber: Cuber;\n    r_id: number = 0\n\n    @Prop()\n    cubeconfig: CubeCongfig\n\n    @Prop()\n    cubesize: number[]\n\n\n\n\n    \n    \n\n    // 保存魔方实例\n    @Ref('player') player!: Player \n    @Ref('cubediv') cubediv: HTMLDivElement\n\n    created(){\n        this.renderconfig = this.cubeconfig.renderconfig\n        this.playerconfig = this.cubeconfig.playerconfig\n        this.cubename = this.renderconfig.cubename\n    }\n        \n\n\n    get playerhide(){\n        if(this.cubeconfig.playerconfig.hide){\n            return 'display:none'\n        }else{\n            return ''\n        }\n    }\n\n    constructor() {\n        super();\n        \n\n    }\n\n\n\n    mounted() {\n        this.cuberef = this.cubeconfig.renderconfig.refname  ? this.$refs[this.cubeconfig.renderconfig.refname] : this.cubediv\n        this.$cuberender.addcube(\n            {\n            cubename: this.renderconfig.cubename,\n            alg: this.renderconfig.alg,\n            scene: this.renderconfig.scene,\n            masktype: this.renderconfig.masktype,\n            refname: this.renderconfig.refname || null,\n            el: this.cuberef,\n            canvas: this.renderconfig.canvas || null,\n            size: this.renderconfig.size || [200,200],\n            template:this.renderconfig.template || null,\n            coverImgNotModel: this.renderconfig.coverImgNotModel || false,\n            preferance: this.renderconfig.preferance || null\n        },()=>{\n\n                this.cuber = this.$cuberender.pagecubes[this.cubename].cuber\n                // 更新到player中\n                this.player.cuber = this.$cuberender.pagecubes[this.cubename].cuber\n\n            // 保存实例\n                // console.log(this.player)\n                // 保存配置\n                // try{\n                //     this.viewport.cuber.preferance.load(this.config.model);\n                // }catch{\n                //     this.viewport.cuber.preferance.load(\"playground\");\n                // }\n                // // 再载入填入在cubeconfig中的配置参数\n                // try{\n                //     for( let param in this.config['cubeconfig']){\n                //         this.preferance[param] = this.config['cubeconfig'][param]\n                //     }\n                // }catch{\n                //     null\n                // }\n\n                // // 设置魔方是否锁定\n                this.cuber.controller.lock = this.cubeconfig.lock || false\n\n                // player enable hide autoplay loop都配置在prop中了\n\n\n                // // 设置player的scene ^表示按照alg逆向打乱\n                this.player.scene =  this.renderconfig.scene ||''\n\n                // // 设置alg公式\n                this.player.action =  this.renderconfig.alg ||''\n\n                // // 有就加载遮罩\n                // try{\n                //     const strip: any = this.CubeStageMask[this.renderconfig.masktype].strip\n                //     this.cuber.world.cube.strip(strip)\n                // }catch{\n                //     null\n                // }\n                // this.$cuberender.unbind(this.cubename)\n\n                // 绑定每一步的执行之后的回调函数，在player的mounted中绑定会出错，在这里绑定比较好\n                this.cuber.world.callbacks.push(() => {\n                    this.player.callback();\n                    });\n        }\n        )\n\n\n        \n\n\n        // 开始刷新\n        this.loop();\n    }\n\n    @Watch('cubesize')\n    onCubesizeChange(){\n        let imgElements = document.getElementsByTagName('IMG')\n        for(let imgelement of imgElements){\n            imgelement[\"style\"][\"width\"] = this.cubesize[0] + 'px'\n        }\n        // this.$cuberender.resize(this.cubesize[0],this.cubesize[1]) \n    }\n\n    \n    hoverin(){\n      \n    this.$cuberender.bind({\n    cubename: this.cubename\n    })\n    this.$cuberender.resize(this.cubesize[0],this.cubesize[1])\n    if(this.playerconfig.hoverplay){\n            const start = Date.now()\n            const loop = setInterval(()=>{\n                let end = Date.now()\n                if((end-start)>500)\n                {\n                    try{\n                        this.player.playing = true;\n                        this.player.callback();\n                        clearInterval(loop)\n                    }catch{\n                        clearInterval(loop)\n                    }\n                }\n            },123)\n    }\n    // 开始刷新\n    this.loop();\n     \n    }\n\n    hoverout(){\n        \n        // console.log(this.cuber.world.cube.lock)\n         if(this.playerconfig.hoverplay){\n            try{\n                this.player.playing = false\n                this.player.init()\n            }catch{\n                null\n            }\n        }\n        this.cuber.controller.handleUp()\n        this.cuber.twister.finish()\n       \n        this.$cuberender.unbind(this.cubename)\n        cancelAnimationFrame(this.r_id)\n    \n    }\n\n    loop() {\n        // 刷新\n        this.r_id = requestAnimationFrame(this.loop.bind(this));\n        // console.log(r_id)\n        try{    \n            this.$cuberender.draw();\n        }catch{\n            cancelAnimationFrame(this.r_id)\n        }\n\n    }\n\n    }\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=6ca4a173&\"\nimport script from \"./index.vue?vue&type=script&lang=ts&\"\nexport * from \"./index.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VSheet } from 'vuetify/lib/components/VSheet';\ninstallComponents(component, {VSheet})\n","\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport VisualCube from '../plugins/cubestack/vue/CubeImgCover/index.vue'\r\nimport Component from 'vue-class-component'\r\nimport { Ref } from 'vue-property-decorator'\r\nimport { CubeCongfig } from '../plugins/cubestack/cuber/interface'\r\n\r\n\r\n\r\n\r\n\r\n\r\n@Component({\r\n    name : 'puzzle',\r\n    components:{VisualCube}\r\n})\r\nexport default class  puzzle extends Vue{\r\n    constructor(){\r\n        super()\r\n    }\r\n\r\n    VisualcubeConfig: CubeCongfig[] = [\r\n        {\r\n            name: 'cube1',\r\n            model : 'xxx',\r\n            lock: true,\r\n            renderconfig:  {\r\n                            cubename: 'cube1',\r\n                            size: [300,300],\r\n                            template: 'playground',\r\n                            coverImgNotModel: true,\r\n                            scene:'^',\r\n                            alg: 'RUR',\r\n                            masktype: ''\r\n                },\r\n            playerconfig : {\r\n                enable: true,\r\n                hide: true,\r\n                autoplay: false,\r\n                loop: true,\r\n                hoverplay: true,\r\n                speed: 'x1',\r\n            }\r\n        },\r\n         {\r\n            name: 'cube2',\r\n            model : 'xxx',\r\n            lock: false,\r\n            renderconfig:  {\r\n                            cubename: 'cube2',\r\n                            size: [300,300],\r\n                            template: 'playground',\r\n                            coverImgNotModel: true,\r\n                            scene:'^',\r\n                            alg: 'R2U2R2',\r\n                            masktype: 'f2l'\r\n                },\r\n            playerconfig : {\r\n                enable: true,\r\n                hide: true,\r\n                autoplay: false,\r\n                loop: true,\r\n                hoverplay: false,\r\n                speed: 'x1',\r\n            }\r\n        }\r\n        ]\r\n\r\n    // @Ref('cube1')  cube1!: VisualCube\r\n    // @Ref('cube2')  cube2!: VisualCube\r\n\r\n    mounted(){\r\n        console.log(this.$cuberender)\r\n    }\r\n}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./test.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./test.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./test.vue?vue&type=template&id=42874e6a&scoped=true&\"\nimport script from \"./test.vue?vue&type=script&lang=ts&\"\nexport * from \"./test.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"42874e6a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticStyle:{\"height\":\"10px\",\"background-color\":\"red\"}}),_c('Render',{attrs:{\"cubeconfig\":_vm.Configs[1]}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport { Component, Inject, Provide, Ref, Prop } from \"vue-property-decorator\";\r\nimport { WebGLRenderer } from \"three\";\r\nimport { COLORS } from \"../plugins/v3/cuber/define\";\r\nimport Toucher from \"../plugins/v3/common/toucher\";\r\nimport World from \"../plugins/v3/cuber/world\";\r\nimport Render from '../plugins/v3/vue/Render/index.vue';\r\nimport { CubeCongfig , RenderConfig, Playerconfig} from '../plugins/v3/cuber/interfaces';\r\n\r\n\r\n\r\n@Component({name:'cube',components:{Render}})\r\nexport default class cube extends Vue{\r\n\r\n    @Ref('render')  renderer: Render\r\n\r\n\r\n    // 当生成很多个魔方的时候不适合用provide\r\n    // @Provide('world')\r\n\r\n\r\n\r\n    world: World = new World()\r\n\r\n    Configs: CubeCongfig[] = [{\r\n            cubename : \"cube1\",\r\n            model: 'casegroup',\r\n            renderconfig:{\r\n                order: 3,\r\n                size: [300,300],\r\n                coverImgNotModel: true,\r\n                scene:'^',\r\n                alg: \"RUR\",\r\n                masktype: ''\r\n            },\r\n            playerconfig: {\r\n                autoplay: false,\r\n                loop: true,\r\n                hoverplay: true,\r\n                lock: false\r\n            }\r\n        },\r\n        {\r\n            cubename : \"cube2\",\r\n            model: 'casegroup',\r\n            renderconfig:{\r\n                order: 2,\r\n                coverImgNotModel: false,\r\n                scene:'^',\r\n                alg: '',\r\n            },\r\n            preferanceconfig:{\r\n                hollow: true\r\n            },\r\n            playerconfig:{\r\n                hoverplay: false,\r\n                lock:false,\r\n                breath:true\r\n                \r\n            }\r\n        }]\r\n\r\n    constructor(){\r\n        super()\r\n    }\r\n\r\n    resize() {\r\n    }\r\n\r\n    mounted(){\r\n\r\n        \r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n}\r\n\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./v3cube.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./v3cube.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./v3cube.vue?vue&type=template&id=ff474fc8&scoped=true&\"\nimport script from \"./v3cube.vue?vue&type=script&lang=ts&\"\nexport * from \"./v3cube.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ff474fc8\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Render',{attrs:{\"cubeconfig\":_vm.Configs[1]}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport { Component, Inject, Provide, Ref, Prop } from \"vue-property-decorator\";\r\nimport { WebGLRenderer } from \"three\";\r\nimport { COLORS } from \"../plugins/v4/cuber/define\";\r\nimport Toucher from \"../plugins/v4/common/toucher\";\r\nimport World from \"../plugins/v4/cuber/world\";\r\nimport Render from '../plugins/v4/vue/Render/index.vue';\r\nimport { CubeCongfig , RenderConfig, Playerconfig} from '../plugins/v4/cuber/interfaces';\r\n\r\n\r\n\r\n@Component({name:'cube',components:{Render}})\r\nexport default class cube extends Vue{\r\n\r\n    @Ref('render')  renderer: Render\r\n\r\n\r\n    // 当生成很多个魔方的时候不适合用provide\r\n    // @Provide('world')\r\n\r\n\r\n\r\n    world: World = new World()\r\n\r\n    Configs: CubeCongfig[] = [\r\n        {\r\n            cubename : \"cube1\",\r\n            model: 'casegroup',\r\n            renderconfig:{\r\n                order: 3,\r\n                size: [300,300],\r\n                coverImgNotModel: true,\r\n                scene:'^',\r\n                alg: \"RUR\",\r\n                masktype: ''\r\n            },\r\n            playerconfig: {\r\n                autoplay: false,\r\n                loop: true,\r\n                hoverplay: true,\r\n                lock: false\r\n            }\r\n        },\r\n        {\r\n            cubename : \"cube2\",\r\n            model: 'casegroup',\r\n            renderconfig:{\r\n                order: 2,\r\n                coverImgNotModel: true,\r\n                scene:'^',\r\n                alg: '',\r\n            },\r\n            // preferanceconfig:{\r\n            //     hollow: false\r\n            // },\r\n            playerconfig:{\r\n                hoverplay: false,\r\n                lock:false,\r\n                breath:true\r\n                \r\n            }\r\n        }]\r\n\r\n    constructor(){\r\n        super()\r\n    }\r\n\r\n    resize() {\r\n    }\r\n\r\n    mounted(){\r\n\r\n        \r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n}\r\n\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./v4cube.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./v4cube.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./v4cube.vue?vue&type=template&id=41af7e8f&scoped=true&\"\nimport script from \"./v4cube.vue?vue&type=script&lang=ts&\"\nexport * from \"./v4cube.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"41af7e8f\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\r\nimport VueRouter from 'vue-router'\r\nimport Home from '../views/Home.vue'\r\n// import showSetOrSubSet  from '../components/showSetOrSubSet.vue'\r\nimport showSetOrSubSet  from '../components/v4showSetOrSubSet.vue'\r\n// import showCaseGroup  from '../components/v3showCaseGroup.vue'\r\nimport showCaseGroup  from '../components/v4showCaseGroup.vue'\r\n// import showCase from '../components/v3showCase.vue';\r\nimport showCase from '../components/v4showCase.vue';\r\nimport test from '../components/test.vue';\r\nimport v3  from '../components/v3cube.vue'\r\nimport v4  from '../components/v4cube.vue'\r\nVue.use(VueRouter)\r\n\r\nconst routes = [\r\n  {\r\n    path: '/',\r\n    name: 'Home',\r\n    component: Home\r\n  },\r\n\r\n  {\r\n    path:'/puzzle/:shortname',\r\n    name:'puzzle',\r\n    component: showSetOrSubSet,\r\n    props:true,\r\n  },\r\n  {\r\n    path:'/:puzzle/casegroup/:setname',\r\n    name:'casegroup',\r\n    component: showCaseGroup,\r\n    props:true,\r\n  },\r\n  {\r\n    path:'/:puzzle/:group/case/:casename',\r\n    name:'case',\r\n    component: showCase,\r\n    props:true,\r\n  },\r\n  {\r\n    path:'/test',\r\n    name:'test',\r\n    component:test\r\n  },\r\n  {\r\n    path:'/v3',\r\n    name:'v3',\r\n    component:v3\r\n  },\r\n  {\r\n    path:'/v4',\r\n    name:'v4',\r\n    component:v4\r\n  }\r\n\r\n\r\n]\r\n\r\nconst router = new VueRouter({\r\n  mode:'hash',\r\n  routes,\r\n})\r\n\r\nexport default router\r\n","import Vue from 'vue'\r\nimport Vuex from 'vuex'\r\n\r\nVue.use(Vuex)\r\n\r\nexport default new Vuex.Store({\r\n  state: {\r\n    'Navigation': [{\r\n      text: 'Home',\r\n      disabled: false,\r\n      to: '/'\r\n    }]\r\n  },\r\n  mutations: {\r\n    setNavigation(state,data){\r\n      state.Navigation = data\r\n    }\r\n  },\r\n  actions: {\r\n    setNavigation(content,data){\r\n      content.commit(\"setNavigation\",data)\r\n    }\r\n  },\r\n  modules: {\r\n  }\r\n})\r\n","import Vue from 'vue';\r\nimport Vuetify from 'vuetify/lib';\r\n\r\nVue.use(Vuetify);\r\n\r\nexport default new Vuetify({\r\n});\r\n","export enum FACE {\r\n  L,\r\n  R,\r\n  D,\r\n  U,\r\n  B,\r\n  F\r\n}\r\n\r\nexport var COLORS = {\r\n  BACKGROUND: \"#FFFFFF\",\r\n  GRAY: \"#404040\",\r\n  BLACK: \"#202020\",\r\n  GREEN: \"#00A020\",\r\n  ORANGE: \"#FF6D00\",\r\n  BLUE: \"#0D47A1\",\r\n  YELLOW: \"#FFD600\",\r\n  RED: \"#B71C1C\",\r\n  WHITE: \"#F0F0F0\",\r\n  CYAN: \"#18FFFF\",\r\n  LIME: \"#C6FF00\",\r\n  PINK: \"#FF4081\",\r\n};\r\n","export class Tween {\r\n  begin: number;\r\n  end: number;\r\n  duration: number;\r\n  callback: Function;\r\n  value: number;\r\n  delta: number;\r\n  constructor(begin: number, end: number, duration: number, callback: Function) {\r\n    this.begin = begin;\r\n    this.end = end;\r\n    this.duration = duration;\r\n    this.callback = callback;\r\n    this.value = 0;\r\n    this.delta = 1;\r\n  }\r\n\r\n  speedup() {\r\n    this.delta = 4;\r\n  }\r\n\r\n  finish() {\r\n    this.callback(this.end);\r\n  }\r\n\r\n  update() {\r\n    this.value = this.value + this.delta;\r\n    let elapsed = this.value / this.duration;\r\n    elapsed = elapsed > 1 ? 1 : elapsed;\r\n    elapsed = elapsed < 0 ? 0 : elapsed;\r\n    elapsed = elapsed - 1;\r\n    let value = 1 - elapsed * elapsed;\r\n    if (value == 1) {\r\n      this.callback(this.end);\r\n      return false;\r\n    }\r\n    this.callback(this.begin + (this.end - this.begin) * value);\r\n    return true;\r\n  }\r\n}\r\n\r\nexport default class Tweener {\r\n  tweens: Tween[];\r\n\r\n  get length() {\r\n    return this.tweens.length;\r\n  }\r\n\r\n  constructor() {\r\n    this.tweens = [];\r\n    this.loop();\r\n  }\r\n\r\n  loop() {\r\n    requestAnimationFrame(this.loop.bind(this));\r\n    this.update();\r\n  }\r\n\r\n  tween(begin: number, end: number, duration: number, update: Function) {\r\n    this.tweens.push(new Tween(begin, end, duration, update));\r\n  }\r\n\r\n  update() {\r\n    if (this.tweens.length === 0) return false;\r\n    var i = 0;\r\n    while (i < this.tweens.length) {\r\n      if (this.tweens[i].update()) {\r\n        i++;\r\n      } else {\r\n        this.tweens.splice(i, 1);\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  speedup() {\r\n    for (const tween of this.tweens) {\r\n      tween.speedup();\r\n    }\r\n  }\r\n\r\n  finish() {\r\n    let tweens = this.tweens.splice(0, this.tweens.length);\r\n    for (const tween of tweens) {\r\n      tween.finish();\r\n    }\r\n  }\r\n}\r\n","import {Cuber} from \".\";\r\n\r\nexport default class Preferance {\r\n  private storage = window.localStorage;\r\n  cuber: Cuber\r\n  constructor(cuber: Cuber) {\r\n    this.cuber = cuber\r\n  }\r\n\r\n  public mode: string;\r\n  data = {\r\n    order: 3,\r\n    scale: 50,\r\n    perspective: 50,\r\n    angle: 63,\r\n    gradient: 67,\r\n    brightness: 80,\r\n    frames: 30,\r\n    sensitivity: 50,\r\n    mirror: false,\r\n    hollow: false\r\n  };\r\n\r\n  load(mode: string) {\r\n    this.mode = mode;\r\n    let version = \"0.0.4\";\r\n    if (this.storage.getItem(\"version\") != version) {\r\n      this.storage.clear();\r\n      this.storage.setItem(\"version\", version);\r\n    }\r\n    let save = this.storage.getItem(mode + \".\" + \"preferance\");\r\n    if (save) {\r\n      this.data = JSON.parse(save);\r\n    }\r\n    this.refresh();\r\n  }\r\n\r\n  save() {\r\n    this.storage.setItem(this.mode + \".\" + \"preferance\", JSON.stringify(this.data));\r\n  }\r\n\r\n  refresh() {\r\n    this.order = this.data.order;\r\n    this.scale = this.data.scale;\r\n    this.perspective = this.data.perspective;\r\n    this.angle = this.data.angle;\r\n    this.gradient = this.data.gradient;\r\n    this.brightness = this.data.brightness;\r\n    this.frames = this.data.frames;\r\n    this.mirror = this.data.mirror;\r\n    this.hollow = this.data.hollow;\r\n  }\r\n\r\n  get order() {\r\n    return this.data.order;\r\n  }\r\n  set order(value) {\r\n    if (this.data.order != value) {\r\n      this.data.order = value;\r\n      this.refresh();\r\n      this.save();\r\n    }\r\n    this.cuber.world.order = value;\r\n  }\r\n\r\n  get scale() {\r\n    return this.data.scale;\r\n  }\r\n  set scale(value) {\r\n    if (this.data.scale != value) {\r\n      this.data.scale = value;\r\n      this.save();\r\n    }\r\n    this.cuber.world.resize();\r\n  }\r\n\r\n  get perspective() {\r\n    return this.data.perspective;\r\n  }\r\n  set perspective(value) {\r\n    if (this.data.perspective != value) {\r\n      this.data.perspective = value;\r\n      this.save();\r\n    }\r\n    this.cuber.world.resize();\r\n  }\r\n\r\n  get angle() {\r\n    return this.data.angle;\r\n  }\r\n  set angle(value) {\r\n    if (this.data.angle != value) {\r\n      this.data.angle = value;\r\n      this.save();\r\n    }\r\n    this.cuber.world.scene.rotation.y = ((value / 100 - 1) * Math.PI) / 2;\r\n    this.cuber.world.dirty = true;\r\n  }\r\n\r\n  get gradient() {\r\n    return this.data.gradient;\r\n  }\r\n  set gradient(value) {\r\n    if (this.data.gradient != value) {\r\n      this.data.gradient = value;\r\n      this.save();\r\n    }\r\n    this.cuber.world.scene.rotation.x = ((1 - value / 100) * Math.PI) / 2;\r\n    this.cuber.world.dirty = true;\r\n  }\r\n\r\n  get brightness() {\r\n    return this.data.brightness;\r\n  }\r\n  set brightness(value) {\r\n    if (this.data.brightness != value) {\r\n      this.data.brightness = value;\r\n      this.save();\r\n    }\r\n    let light = value / 100;\r\n    this.cuber.world.ambient.intensity = light;\r\n    let d = light / 2;\r\n    if (d > 1 - light) {\r\n      d = 1 - light;\r\n    }\r\n    this.cuber.world.directional.intensity = d;\r\n    this.cuber.world.dirty = true;\r\n  }\r\n\r\n  get frames() {\r\n    return this.data.frames;\r\n  }\r\n  set frames(value) {\r\n    if (this.data.frames != value) {\r\n      this.data.frames = value;\r\n      this.save();\r\n    }\r\n  }\r\n\r\n  get sensitivity() {\r\n    return this.data.sensitivity;\r\n  }\r\n  set sensitivity(value) {\r\n    if (this.data.sensitivity != value) {\r\n      this.data.sensitivity = value;\r\n      this.save();\r\n    }\r\n  }\r\n\r\n  get mirror() {\r\n    return this.data.mirror;\r\n  }\r\n  set mirror(value) {\r\n    if (this.data.mirror != value) {\r\n      this.data.mirror = value;\r\n      this.save();\r\n    }\r\n    for (let cubelet of this.cuber.world.cube.cubelets) {\r\n      cubelet.mirror = value;\r\n    }\r\n    this.cuber.world.dirty = true;\r\n  }\r\n\r\n  get hollow() {\r\n    return this.data.hollow;\r\n  }\r\n  set hollow(value: boolean) {\r\n    if (this.data.hollow != value) {\r\n      this.data.hollow = value;\r\n      this.save();\r\n    }\r\n    for (let cubelet of this.cuber.world.cube.cubelets) {\r\n      cubelet.hollow = value;\r\n    }\r\n    this.cuber.world.dirty = true;\r\n  }\r\n}\r\n","import { FACE, COLORS } from \"./define\";\r\nimport {\r\n  Vector3,\r\n  Group,\r\n  Geometry,\r\n  Face3,\r\n  ExtrudeGeometry,\r\n  Shape,\r\n  ShapeGeometry,\r\n  MeshPhongMaterial,\r\n  MeshNormalMaterial,\r\n  MeshLambertMaterial,\r\n  MeshBasicMaterial,\r\n  Mesh,\r\n  Quaternion\r\n} from \"three\";\r\n\r\nclass Frame extends Geometry {\r\n  private static readonly _INDICES = [\r\n    [0, 2, 1],\r\n    [0, 3, 2],\r\n    [4, 6, 5],\r\n    [4, 7, 6],\r\n    [8, 10, 9],\r\n    [8, 11, 10],\r\n    [12, 14, 13],\r\n    [12, 15, 14],\r\n    [16, 18, 17],\r\n    [16, 19, 18],\r\n    [20, 22, 21],\r\n    [20, 23, 22],\r\n    [1, 6, 7],\r\n    [0, 1, 7],\r\n    [3, 0, 10],\r\n    [11, 3, 10],\r\n    [17, 2, 3],\r\n    [16, 17, 3],\r\n    [23, 20, 1],\r\n    [2, 23, 1],\r\n    [5, 12, 13],\r\n    [4, 5, 13],\r\n    [9, 13, 14],\r\n    [8, 9, 14],\r\n    [22, 15, 12],\r\n    [21, 22, 12],\r\n    [19, 14, 15],\r\n    [18, 19, 15],\r\n    [7, 4, 9],\r\n    [10, 7, 9],\r\n    [11, 8, 19],\r\n    [16, 11, 19],\r\n    [23, 17, 18],\r\n    [22, 23, 18],\r\n    [20, 21, 5],\r\n    [6, 20, 5],\r\n    [20, 6, 1],\r\n    [10, 0, 7],\r\n    [21, 12, 5],\r\n    [13, 9, 4],\r\n    [23, 2, 17],\r\n    [11, 16, 3],\r\n    [22, 18, 15],\r\n    [8, 14, 19]\r\n  ];\r\n\r\n  constructor(size: number, border: number) {\r\n    super();\r\n    const _O = size / 2;\r\n    const _I = _O - border;\r\n    const _verts = [\r\n      //0: F Face\r\n      [-_I, +_I, +_O],\r\n      [+_I, +_I, +_O],\r\n      [+_I, -_I, +_O],\r\n      [-_I, -_I, +_O],\r\n      //4: U Face\r\n      [-_I, +_O, -_I],\r\n      [+_I, +_O, -_I],\r\n      [+_I, +_O, +_I],\r\n      [-_I, +_O, +_I],\r\n      //8: L Face\r\n      [-_O, -_I, -_I],\r\n      [-_O, +_I, -_I],\r\n      [-_O, +_I, +_I],\r\n      [-_O, -_I, +_I],\r\n      //12: B Face\r\n      [+_I, +_I, -_O],\r\n      [-_I, +_I, -_O],\r\n      [-_I, -_I, -_O],\r\n      [+_I, -_I, -_O],\r\n      //16: D Face\r\n      [-_I, -_O, +_I],\r\n      [+_I, -_O, +_I],\r\n      [+_I, -_O, -_I],\r\n      [-_I, -_O, -_I],\r\n      //20: R Face\r\n      [+_O, +_I, +_I],\r\n      [+_O, +_I, -_I],\r\n      [+_O, -_I, -_I],\r\n      [+_O, -_I, +_I]\r\n    ];\r\n\r\n    for (let i = 0; i < _verts.length; i++) {\r\n      let _vert = _verts[i];\r\n      this.vertices.push(new Vector3(_vert[0], _vert[1], _vert[2]));\r\n    }\r\n    for (let i = 0; i < Frame._INDICES.length; i++) {\r\n      let _indice = Frame._INDICES[i];\r\n      let _face = new Face3(_indice[0], _indice[1], _indice[2]);\r\n      this.faces.push(_face);\r\n    }\r\n    this.computeFaceNormals();\r\n  }\r\n}\r\n\r\nclass Sticker extends ExtrudeGeometry {\r\n  constructor(size: number, depth: number) {\r\n    size = size / 2;\r\n    let left = -size;\r\n    let bottom = size;\r\n    let top = -size;\r\n    let right = size;\r\n    let radius = size / 4;\r\n\r\n    let shape = new Shape();\r\n    shape.moveTo(left, top + radius);\r\n    shape.lineTo(left, bottom - radius);\r\n    shape.quadraticCurveTo(left, bottom, left + radius, bottom);\r\n    shape.lineTo(right - radius, bottom);\r\n    shape.quadraticCurveTo(right, bottom, right, bottom - radius);\r\n    shape.lineTo(right, top + radius);\r\n    shape.quadraticCurveTo(right, top, right - radius, top);\r\n    shape.lineTo(left + radius, top);\r\n    shape.quadraticCurveTo(left, top, left, top + radius);\r\n    shape.closePath();\r\n\r\n    super(shape, { bevelEnabled: false, depth: depth });\r\n  }\r\n}\r\n\r\nclass Mirror extends ShapeGeometry {\r\n  constructor(size: number) {\r\n    size = size / 2;\r\n    let left = -size;\r\n    let bottom = size;\r\n    let top = -size;\r\n    let right = size;\r\n    let radius = size / 4;\r\n\r\n    let shape = new Shape();\r\n    shape.moveTo(left, top + radius);\r\n    shape.lineTo(left, bottom - radius);\r\n    shape.quadraticCurveTo(left, bottom, left + radius, bottom);\r\n    shape.lineTo(right - radius, bottom);\r\n    shape.quadraticCurveTo(right, bottom, right, bottom - radius);\r\n    shape.lineTo(right, top + radius);\r\n    shape.quadraticCurveTo(right, top, right - radius, top);\r\n    shape.lineTo(left + radius, top);\r\n    shape.quadraticCurveTo(left, top, left, top + radius);\r\n    shape.closePath();\r\n\r\n    super(shape);\r\n  }\r\n}\r\n\r\nexport default class Cubelet extends Group {\r\n  public static readonly SIZE: number = 64;\r\n  private static readonly _BORDER_WIDTH: number = 3;\r\n  private static readonly _STICKER_DEPTH: number = 3;\r\n  private static readonly _FRAME: Frame = new Frame(Cubelet.SIZE, Cubelet._BORDER_WIDTH);\r\n  private static readonly _STICKER: Sticker = new Sticker(\r\n    Cubelet.SIZE - 2 * Cubelet._BORDER_WIDTH - Cubelet._STICKER_DEPTH,\r\n    Cubelet._STICKER_DEPTH\r\n  );\r\n  private static readonly _MIRROR: Mirror = new Mirror(\r\n    Cubelet.SIZE - 2 * Cubelet._BORDER_WIDTH - Cubelet._STICKER_DEPTH\r\n  );\r\n\r\n  private static LAMBERS = (() => {\r\n    let result: any = {};\r\n    for (const key in COLORS) {\r\n      let color = (<any>COLORS)[key];\r\n      if (key == \"BLACK\") {\r\n        result[key] = new MeshPhongMaterial({\r\n          color: color,\r\n          specular: COLORS.GRAY,\r\n          shininess: 8\r\n        });\r\n      } else {\r\n        result[key] = new MeshLambertMaterial({ color: color });\r\n      }\r\n    }\r\n    return result;\r\n  })();\r\n\r\n  private static BASICS = (() => {\r\n    let result: any = {};\r\n    for (const key in COLORS) {\r\n      let color = (<any>COLORS)[key];\r\n      result[key] = new MeshBasicMaterial({ color: color });\r\n    }\r\n    return result;\r\n  })();\r\n\r\n  _vector: Vector3;\r\n\r\n  set vector(vector) {\r\n    let half = (this.order - 1) / 2;\r\n    let x = Math.round(vector.x * 2) / 2;\r\n    let y = Math.round(vector.y * 2) / 2;\r\n    let z = Math.round(vector.z * 2) / 2;\r\n    this._vector.set(x, y, z);\r\n    x = Math.round(x + half);\r\n    y = Math.round(y + half);\r\n    z = Math.round(z + half);\r\n    this._index = z * this.order * this.order + y * this.order + x;\r\n    this.position.x = Cubelet.SIZE * this._vector.x;\r\n    this.position.y = Cubelet.SIZE * this._vector.y;\r\n    this.position.z = Cubelet.SIZE * this._vector.z;\r\n  }\r\n  get vector() {\r\n    return this._vector;\r\n  }\r\n\r\n  _index: number;\r\n\r\n  set index(index) {\r\n    let half = (this.order - 1) / 2;\r\n    let _x = (index % this.order) - half;\r\n    let _y = Math.floor((index % (this.order * this.order)) / this.order) - half;\r\n    let _z = Math.floor(index / (this.order * this.order)) - half;\r\n    this.vector = new Vector3(_x, _y, _z);\r\n  }\r\n\r\n  get index(): number {\r\n    return this._index;\r\n  }\r\n\r\n  mirrors: Mesh[];\r\n  lambers: MeshLambertMaterial[];\r\n  basics: MeshBasicMaterial[];\r\n  set mirror(value: boolean) {\r\n    if (value) {\r\n      for (let i = 0; i < 6; i++) {\r\n        if (this.mirrors[i] instanceof Mesh && this.children.indexOf(this.mirrors[i]) < 0) {\r\n          this.add(this.mirrors[i]);\r\n        }\r\n      }\r\n    } else {\r\n      for (let i = 0; i < 6; i++) {\r\n        if (this.mirrors[i] instanceof Mesh && this.children.indexOf(this.mirrors[i]) >= 0) {\r\n          this.remove(this.mirrors[i]);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  set hollow(value: boolean) {\r\n    if (value) {\r\n      if (this.frame instanceof Mesh && this.children.indexOf(this.frame) >= 0) {\r\n        this.remove(this.frame);\r\n      }\r\n    } else {\r\n      if (this.frame instanceof Mesh && this.children.indexOf(this.frame) < 0) {\r\n        this.add(this.frame);\r\n      }\r\n    }\r\n  }\r\n\r\n  getColor(face: FACE) {\r\n    let position = new Vector3(0, 0, 0);\r\n    switch (face) {\r\n      case FACE.L:\r\n        position.x = -1;\r\n        break;\r\n      case FACE.R:\r\n        position.x = 1;\r\n        break;\r\n      case FACE.D:\r\n        position.y = -1;\r\n        break;\r\n      case FACE.U:\r\n        position.y = 1;\r\n        break;\r\n      case FACE.B:\r\n        position.z = -1;\r\n        break;\r\n      case FACE.F:\r\n        position.z = 1;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    this._quaternion.copy(this.quaternion);\r\n    position.applyQuaternion(this._quaternion.inverse());\r\n    let x = Math.round(position.x);\r\n    let y = Math.round(position.y);\r\n    let z = Math.round(position.z);\r\n    let color = 0;\r\n    if (x < 0) {\r\n      color = FACE.L;\r\n    } else if (x > 0) {\r\n      color = FACE.R;\r\n    } else if (y < 0) {\r\n      color = FACE.D;\r\n    } else if (y > 0) {\r\n      color = FACE.U;\r\n    } else if (z < 0) {\r\n      color = FACE.B;\r\n    } else if (z > 0) {\r\n      color = FACE.F;\r\n    }\r\n    return color;\r\n  }\r\n\r\n  initial: number;\r\n  stickers: Mesh[];\r\n  _quaternion: Quaternion;\r\n  frame: Mesh;\r\n  order: number;\r\n\r\n  constructor(order: number, index: number) {\r\n    super();\r\n    this.order = order;\r\n    this.initial = index;\r\n    this._vector = new Vector3();\r\n    this.index = index;\r\n    this.stickers = [];\r\n    this._quaternion = new Quaternion();\r\n    this.mirrors = [];\r\n\r\n    let half = (order - 1) / 2;\r\n\r\n    this.lambers = [\r\n      this.vector.x == -half ? Cubelet.LAMBERS.ORANGE : Cubelet.LAMBERS.GRAY,\r\n      this.vector.x == half ? Cubelet.LAMBERS.RED : Cubelet.LAMBERS.GRAY,\r\n      this.vector.y == -half ? Cubelet.LAMBERS.WHITE : Cubelet.LAMBERS.GRAY,\r\n      this.vector.y == half ? Cubelet.LAMBERS.YELLOW : Cubelet.LAMBERS.GRAY,\r\n      this.vector.z == -half ? Cubelet.LAMBERS.GREEN : Cubelet.LAMBERS.GRAY,\r\n      this.vector.z == half ? Cubelet.LAMBERS.BLUE : Cubelet.LAMBERS.GRAY\r\n    ];\r\n\r\n    this.basics = [\r\n      this.vector.x == -half ? Cubelet.BASICS.ORANGE : Cubelet.BASICS.GRAY,\r\n      this.vector.x == half ? Cubelet.BASICS.RED : Cubelet.BASICS.GRAY,\r\n      this.vector.y == -half ? Cubelet.BASICS.WHITE : Cubelet.BASICS.GRAY,\r\n      this.vector.y == half ? Cubelet.BASICS.YELLOW : Cubelet.BASICS.GRAY,\r\n      this.vector.z == -half ? Cubelet.BASICS.GREEN : Cubelet.BASICS.GRAY,\r\n      this.vector.z == half ? Cubelet.BASICS.BLUE : Cubelet.BASICS.GRAY\r\n    ];\r\n\r\n    this.frame = new Mesh(Cubelet._FRAME, Cubelet.LAMBERS.BLACK);\r\n    this.add(this.frame);\r\n\r\n    for (let i = 0; i < 6; i++) {\r\n      let _sticker = new Mesh(Cubelet._STICKER, this.lambers[i]);\r\n      _sticker.name = FACE[i];\r\n      switch (i) {\r\n        case FACE.L:\r\n          _sticker.rotation.y = -Math.PI / 2;\r\n          _sticker.position.x = -Cubelet.SIZE / 2;\r\n          break;\r\n        case FACE.R:\r\n          _sticker.rotation.y = Math.PI / 2;\r\n          _sticker.position.x = Cubelet.SIZE / 2;\r\n          break;\r\n        case FACE.D:\r\n          _sticker.rotation.x = Math.PI / 2;\r\n          _sticker.position.y = -Cubelet.SIZE / 2;\r\n          break;\r\n        case FACE.U:\r\n          _sticker.rotation.x = -Math.PI / 2;\r\n          _sticker.position.y = Cubelet.SIZE / 2;\r\n          break;\r\n        case FACE.B:\r\n          _sticker.rotation.x = Math.PI;\r\n          _sticker.position.z = -Cubelet.SIZE / 2;\r\n          break;\r\n        case FACE.F:\r\n          _sticker.rotation.x = 2 * Math.PI;\r\n          _sticker.position.z = Cubelet.SIZE / 2;\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      this.stickers.push(_sticker);\r\n      if (this.lambers[i] != Cubelet.LAMBERS.GRAY) {\r\n        this.add(_sticker);\r\n        let _mirror = new Mesh(Cubelet._MIRROR, this.basics[i]);\r\n        _mirror.rotation.x = _sticker.rotation.x == 0 ? 0 : _sticker.rotation.x + Math.PI;\r\n        _mirror.rotation.y = _sticker.rotation.y == 0 ? 0 : _sticker.rotation.y + Math.PI;\r\n        _mirror.rotation.z = _sticker.rotation.z == 0 ? 0 : _sticker.rotation.z + Math.PI;\r\n        if (_mirror.rotation.x + _mirror.rotation.y + _mirror.rotation.z == 0) {\r\n          _mirror.rotation.y = Math.PI;\r\n        }\r\n\r\n        _mirror.position.x = _sticker.position.x * 3;\r\n        _mirror.position.y = _sticker.position.y * 3;\r\n        _mirror.position.z = _sticker.position.z * 3;\r\n        this.add(_mirror);\r\n        this.mirrors[i] = _mirror;\r\n      }\r\n      this.matrixAutoUpdate = false;\r\n      this.updateMatrix();\r\n    }\r\n  }\r\n\r\n  stick(face: number, color: string) {\r\n    let lamber;\r\n    let basic;\r\n    let index = null;\r\n    if (color && color.length > 0) {\r\n      for (const key in COLORS) {\r\n        let c = (<any>COLORS)[key];\r\n        if (c == color) {\r\n          index = key;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    if (index) {\r\n      lamber = Cubelet.LAMBERS[index];\r\n      basic = Cubelet.LAMBERS[index];\r\n    } else {\r\n      lamber = this.lambers[face];\r\n      basic = this.basics[face];\r\n    }\r\n    if (index == \"BLACK\") {\r\n      this.stickers[face].visible = false;\r\n    } else {\r\n      this.stickers[face].visible = true;\r\n    }\r\n    this.stickers[face].material = lamber;\r\n    if (this.mirrors[face] instanceof Mesh) {\r\n      this.mirrors[face].material = basic;\r\n    }\r\n  }\r\n}\r\n","import Cubelet from \"./cubelet\";\r\nimport { TwistAction } from \"./twister\";\r\nimport Cube from \"./cube\";\r\nimport { Group, Vector3 } from \"three\";\r\nimport {Cuber} from \".\";\r\n\r\nexport default class CubeGroup extends Group {\r\n  cube: Cube;\r\n  cuber: Cuber;\r\n  cubelets: Cubelet[];\r\n  name: string;\r\n  indices: number[];\r\n  axis: Vector3;\r\n\r\n  _angle: number;\r\n  set angle(angle) {\r\n    this.setRotationFromAxisAngle(this.axis, angle);\r\n    this._angle = angle;\r\n    this.updateMatrix();\r\n    this.cube.dirty = true;\r\n  }\r\n  get angle() {\r\n    return this._angle;\r\n  }\r\n\r\n  constructor(cube: Cube, name: string, indices: number[], axis: Vector3) {\r\n    super();\r\n    this.cube = cube;\r\n    this.cuber = cube.cuber;\r\n    this._angle = 0;\r\n    this.cubelets = [];\r\n    this.name = name;\r\n    this.indices = indices;\r\n    this.axis = axis;\r\n    this.matrixAutoUpdate = false;\r\n    this.updateMatrix();\r\n  }\r\n\r\n  exp(reverse: boolean, times: number) {\r\n    let exp = this.name;\r\n    let values = this.name.match(/(^-?[xyz]):(\\d*):(\\d*$)/i);\r\n    if (values?.length == 4) {\r\n      let axis = values[1];\r\n      let layer = Number(values[2]);\r\n      if (layer == Number(values[3])) {\r\n        let half = (this.cube.order + 1) / 2;\r\n        if (axis.length == 1 && layer < half) {\r\n          axis = \"-\" + axis;\r\n          reverse = !reverse;\r\n        } else if (axis.length == 2 && layer > half) {\r\n          axis = axis[1];\r\n          reverse = !reverse;\r\n        }\r\n        if (axis.length == 1) {\r\n          layer = this.cube.order - layer + 1;\r\n        }\r\n        switch (axis) {\r\n          case \"x\":\r\n            exp = layer === half ? \"M'\" : \"R\";\r\n            break;\r\n          case \"y\":\r\n            exp = layer === half ? \"E'\" : \"U\";\r\n            break;\r\n          case \"z\":\r\n            exp = layer === half ? \"S\" : \"F\";\r\n            break;\r\n          case \"-x\":\r\n            exp = layer === half ? \"M\" : \"L\";\r\n            break;\r\n          case \"-y\":\r\n            exp = layer === half ? \"E\" : \"D\";\r\n            break;\r\n          case \"-z\":\r\n            exp = layer === half ? \"S'\" : \"B\";\r\n            break;\r\n        }\r\n        if (exp.length == 2) {\r\n          exp = exp[0];\r\n          reverse = !reverse;\r\n        }\r\n        exp = (layer === 1 || layer === half ? \"\" : String(layer)) + exp;\r\n      }\r\n    }\r\n    return new TwistAction(exp, reverse, times);\r\n  }\r\n\r\n  hold() {\r\n    this.angle = 0;\r\n    for (let i of this.indices) {\r\n      let cubelet = this.cube.cubelets[i];\r\n      this.cubelets.push(cubelet);\r\n      this.cube.remove(cubelet);\r\n      this.add(cubelet);\r\n    }\r\n    this.cube.lock = true;\r\n  }\r\n\r\n  drop() {\r\n    this.angle = Math.round(this.angle / (Math.PI / 2)) * (Math.PI / 2);\r\n    while (true) {\r\n      let cubelet = this.cubelets.pop();\r\n      if (undefined === cubelet) {\r\n        break;\r\n      }\r\n      this.rotate(cubelet);\r\n      this.remove(cubelet);\r\n      this.cube.add(cubelet);\r\n      this.cube.cubelets[cubelet.index] = cubelet;\r\n    }\r\n    this.cube.lock = false;\r\n    if (this.angle != 0) {\r\n      this.cube.update();\r\n    }\r\n    this.angle = 0;\r\n  }\r\n\r\n  twist(angle = this.angle) {\r\n    angle = Math.round(angle / (Math.PI / 2)) * (Math.PI / 2);\r\n    let reverse = angle > 0;\r\n    let times = Math.round(Math.abs(angle) / (Math.PI / 2));\r\n    if (times != 0) {\r\n      this.cuber.history.record(this.exp(reverse, times));\r\n    }\r\n    let delta = angle - this.angle;\r\n    if (delta === 0) {\r\n      this.drop();\r\n    } else {\r\n      let d = Math.abs(delta) / (Math.PI / 2);\r\n      var duration = this.cuber.preferance.frames * (2 - 2 / (d + 1));\r\n      this.cuber.tweener.tween(this.angle, angle, duration, (value: number) => {\r\n        this.angle = value;\r\n        if (Math.abs(this.angle - angle) < 1e-6) {\r\n          this.drop();\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  rotate(cubelet: Cubelet) {\r\n    cubelet.rotateOnWorldAxis(this.axis, this.angle);\r\n    cubelet.vector = cubelet.vector.applyAxisAngle(this.axis, this.angle);\r\n    cubelet.updateMatrix();\r\n  }\r\n}\r\n\r\nexport class GroupTable {\r\n  private order: number;\r\n  private groups: Map<string, CubeGroup> = new Map();\r\n\r\n  public static FORMAT(axis: string, from: number, to: number) {\r\n    return axis + \":\" + from + \":\" + to;\r\n  }\r\n\r\n  public static readonly AXIS_VECTOR: { [key: string]: Vector3 } = {\r\n    a: new Vector3(1, 1, 1),\r\n    x: new Vector3(1, 0, 0),\r\n    y: new Vector3(0, 1, 0),\r\n    z: new Vector3(0, 0, 1),\r\n    \"-x\": new Vector3(-1, 0, 0),\r\n    \"-y\": new Vector3(0, -1, 0),\r\n    \"-z\": new Vector3(0, 0, -1)\r\n  };\r\n  constructor(cube: Cube) {\r\n    this.order = cube.order;\r\n    // 根据魔方阶数生成所有正向group\r\n    for (let axis of [\"x\", \"y\", \"z\"]) {\r\n      for (let from = 1; from <= this.order; from++) {\r\n        for (let to = from; to <= this.order; to++) {\r\n          let name = GroupTable.FORMAT(axis, from, to);\r\n          this.groups.set(name, new CubeGroup(cube, name, [], GroupTable.AXIS_VECTOR[axis]));\r\n        }\r\n      }\r\n    }\r\n    // 块类型group\r\n    for (let type of [\"center\", \"edge\", \"corner\"]) {\r\n      this.groups.set(type, new CubeGroup(cube, type, [], GroupTable.AXIS_VECTOR[\"a\"]));\r\n    }\r\n    // 将每个块索引放入x y z的每层中\r\n    for (const cubelet of cube.initials) {\r\n      let index = cubelet.initial;\r\n      let axis;\r\n      let layer;\r\n      let group;\r\n      let faces = 0;\r\n\r\n      axis = \"x\";\r\n      layer = (index % this.order) + 1;\r\n      if (layer == 1 || layer == this.order) {\r\n        faces++;\r\n      }\r\n      group = this.groups.get(GroupTable.FORMAT(axis, layer, layer));\r\n      if (!group) {\r\n        throw Error();\r\n      }\r\n      group.indices.push(cubelet.index);\r\n\r\n      axis = \"y\";\r\n      layer = Math.floor((index % (this.order * this.order)) / this.order) + 1;\r\n      if (layer == 1 || layer == this.order) {\r\n        faces++;\r\n      }\r\n      group = this.groups.get(GroupTable.FORMAT(axis, layer, layer));\r\n      if (!group) {\r\n        throw Error();\r\n      }\r\n      group.indices.push(cubelet.index);\r\n      axis = \"z\";\r\n      layer = Math.floor(index / (this.order * this.order)) + 1;\r\n      if (layer == 1 || layer == this.order) {\r\n        faces++;\r\n      }\r\n      group = this.groups.get(GroupTable.FORMAT(axis, layer, layer));\r\n      if (!group) {\r\n        throw Error();\r\n      }\r\n      group.indices.push(cubelet.index);\r\n\r\n      group = this.groups.get([\"\", \"center\", \"edge\", \"corner\"][faces]);\r\n      if (group) {\r\n        group.indices.push(cubelet.index);\r\n      }\r\n    }\r\n    // x y z的多层\r\n    for (let axis of [\"x\", \"y\", \"z\"]) {\r\n      for (let from = 1; from <= this.order; from++) {\r\n        for (let to = from + 1; to <= this.order; to++) {\r\n          let dst = this.groups.get(GroupTable.FORMAT(axis, from, to));\r\n          if (!dst) {\r\n            throw Error();\r\n          }\r\n          for (let i = from; i <= to; i++) {\r\n            let src = this.groups.get(GroupTable.FORMAT(axis, i, i));\r\n            if (!src) {\r\n              throw Error();\r\n            }\r\n            dst.indices.push(...src.indices);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // 通过正向group拷贝反向group\r\n    for (let axis of [\"-x\", \"-y\", \"-z\"]) {\r\n      for (let from = 1; from <= this.order; from++) {\r\n        for (let to = from; to <= this.order; to++) {\r\n          let template = this.groups.get(GroupTable.FORMAT(axis.replace(\"-\", \"\"), from, to));\r\n          if (!template) {\r\n            throw Error();\r\n          }\r\n          let name = GroupTable.FORMAT(axis, from, to);\r\n          this.groups.set(name, new CubeGroup(cube, name, template.indices, GroupTable.AXIS_VECTOR[axis]));\r\n        }\r\n      }\r\n    }\r\n    // 特殊处理整体旋转\r\n    for (let axis of [\"x\", \"y\", \"z\"]) {\r\n      let template = this.groups.get(GroupTable.FORMAT(axis.replace(\"-\", \"\"), 1, this.order));\r\n      if (!template) {\r\n        throw Error();\r\n      }\r\n      this.groups.set(axis, new CubeGroup(cube, axis, template.indices, GroupTable.AXIS_VECTOR[axis]));\r\n    }\r\n    for (const group of this.groups.values()) {\r\n      cube.add(group);\r\n    }\r\n  }\r\n\r\n  private static AXIS_MAP: any = {\r\n    R: \"x\",\r\n    L: \"-x\",\r\n    U: \"y\",\r\n    D: \"-y\",\r\n    F: \"z\",\r\n    B: \"-z\",\r\n    M: \"-x\",\r\n    E: \"-y\",\r\n    S: \"z\"\r\n  };\r\n\r\n  get(name: string) {\r\n    let axis: string = \"\";\r\n    let from: number = 0;\r\n    let to: number = 0;\r\n    if (this.groups.get(name)) {\r\n      return this.groups.get(name);\r\n    }\r\n    if (name.match(/.[Ww]/)) {\r\n      name = name.toLowerCase().replace(\"w\", \"\");\r\n    }\r\n    if (/[XYZ]/.test(name)) {\r\n      name = name.toLowerCase();\r\n    }\r\n    if (name.length === 1) {\r\n      switch (name) {\r\n        case \"x\":\r\n        case \"y\":\r\n        case \"z\":\r\n          return this.groups.get(name);\r\n        case \"R\":\r\n        case \"L\":\r\n        case \"U\":\r\n        case \"D\":\r\n        case \"F\":\r\n        case \"B\":\r\n          axis = GroupTable.AXIS_MAP[name];\r\n          from = axis.length == 2 ? 1 : this.order;\r\n          to = from;\r\n          break;\r\n        case \"r\":\r\n        case \"l\":\r\n        case \"u\":\r\n        case \"d\":\r\n        case \"f\":\r\n        case \"b\":\r\n          axis = GroupTable.AXIS_MAP[name.toUpperCase()];\r\n          from = axis.length == 2 ? 1 : this.order;\r\n          to = axis.length == 2 ? 2 : this.order - 1;\r\n          break;\r\n        case \"E\":\r\n        case \"M\":\r\n        case \"S\":\r\n          axis = GroupTable.AXIS_MAP[name];\r\n          from = Math.floor((this.order + 1) / 2);\r\n          to = Math.ceil((this.order + 1) / 2);\r\n          break;\r\n        case \"e\":\r\n        case \"m\":\r\n        case \"s\":\r\n          axis = GroupTable.AXIS_MAP[name.toUpperCase()];\r\n          from = 2;\r\n          to = this.order - 1;\r\n          break;\r\n      }\r\n    } else {\r\n      let list = name.match(/([0123456789]*)(-?)([0123456789]*)([lrudfb])/i);\r\n      if (list == null) {\r\n        return undefined;\r\n      }\r\n      from = Number(list[1]);\r\n      to = Number(list[3]);\r\n      if (to === NaN || to === 0) {\r\n        if (/[lrudfb]/.test(list[4])) {\r\n          to = 1;\r\n        } else {\r\n          to = from;\r\n        }\r\n      }\r\n      axis = GroupTable.AXIS_MAP[list[4].toUpperCase()];\r\n      from = axis.length == 2 ? from : this.order - from + 1;\r\n      to = axis.length == 2 ? to : this.order - to + 1;\r\n    }\r\n    if (from > to) {\r\n      [from, to] = [to, from];\r\n    }\r\n    return this.groups.get(GroupTable.FORMAT(axis, from, to));\r\n  }\r\n}\r\n","import { FACE } from \"./define\";\r\nimport Cubelet from \"./cubelet\";\r\nimport CubeGroup, { GroupTable } from \"./group\";\r\nimport { TouchAction } from \"../common/toucher\";\r\nimport { Vector3, Plane, Ray, Vector2, Matrix4 } from \"three\";\r\nimport {Cuber} from \".\";\r\n\r\nexport class Holder {\r\n  public vector: Vector3;\r\n  public index: number;\r\n  public plane: Plane;\r\n  constructor() {\r\n    this.vector = new Vector3();\r\n  }\r\n}\r\n\r\nexport default class Controller {\r\n  public cuber: Cuber;\r\n  public dragging = false;\r\n  public rotating = false;\r\n  public angle = 0;\r\n  public taps: Function[];\r\n  public ray = new Ray();\r\n  public down = new Vector2(0, 0);\r\n  public move = new Vector2(0, 0);\r\n  public matrix = new Matrix4();\r\n  public holder = new Holder();\r\n  public vector = new Vector3();\r\n  public group: CubeGroup | undefined;\r\n  public planes = [\r\n    new Plane(new Vector3(1, 0, 0), (-Cubelet.SIZE * 3) / 2),\r\n    new Plane(new Vector3(0, 1, 0), (-Cubelet.SIZE * 3) / 2),\r\n    new Plane(new Vector3(0, 0, 1), (-Cubelet.SIZE * 3) / 2)\r\n  ];\r\n  public _lock: boolean = false;\r\n  get lock() {\r\n    return this._lock;\r\n  }\r\n  set lock(value) {\r\n    this.handleUp();\r\n    this._lock = value;\r\n  }\r\n\r\n  public _disable: boolean = false;\r\n  get disable() {\r\n    return this._disable;\r\n  }\r\n  set disable(value) {\r\n    this.handleUp();\r\n    this._disable = value;\r\n  }\r\n\r\n  constructor(cuber: Cuber) {\r\n    this.cuber = cuber\r\n    this.taps = [];\r\n    this.loop();\r\n  }\r\n\r\n  loop() {\r\n    requestAnimationFrame(this.loop.bind(this));\r\n    this.update();\r\n  }\r\n\r\n  update() {\r\n    if (this.rotating && this.group) {\r\n      if (this.group.angle != this.angle) {\r\n        let delta = (this.angle - this.group.angle) / 2;\r\n        let max = (Math.PI / 2 / this.cuber.preferance.frames) * 4;\r\n        if (delta > max) {\r\n          delta = max;\r\n        }\r\n        if (delta < -max) {\r\n          delta = -max;\r\n        }\r\n        this.group.angle += delta;\r\n        this.cuber.world.dirty = true;\r\n      }\r\n    }\r\n  }\r\n\r\n  match() {\r\n    let g: CubeGroup | undefined;\r\n    if (this.holder.index === -1) {\r\n      for (let ax of [\"x\", \"y\", \"z\"]) {\r\n        g = this.cuber.world.cube.groups.get(ax);\r\n        if (g?.axis.dot(this.holder.plane.normal) === 0) {\r\n          return g;\r\n        }\r\n      }\r\n    } else {\r\n      const plane = this.holder.plane.normal;\r\n      const finger = this.holder.vector;\r\n      const index = this.holder.index;\r\n      const order = this.cuber.world.cube.order;\r\n      for (let axis of [\"x\", \"y\", \"z\"]) {\r\n        let vector = GroupTable.AXIS_VECTOR[axis];\r\n        if (vector.dot(plane) === 0 && vector.dot(finger) === 0) {\r\n          let layer = 0;\r\n          switch (axis) {\r\n            case \"x\":\r\n              layer = index % order;\r\n              break;\r\n            case \"y\":\r\n              layer = Math.floor((index % (order * order)) / order);\r\n              break;\r\n            case \"z\":\r\n              layer = Math.floor(index / (order * order));\r\n              break;\r\n          }\r\n          layer = layer + 1;\r\n          return this.cuber.world.cube.groups.get(GroupTable.FORMAT(axis, layer, layer));\r\n        }\r\n      }\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  intersect(point: Vector2, plane: Plane) {\r\n    var x = (point.x / this.cuber.world.width) * 2 - 1;\r\n    var y = -(point.y / this.cuber.world.height) * 2 + 1;\r\n    this.ray.origin.setFromMatrixPosition(this.cuber.world.camera.matrixWorld);\r\n    this.ray.direction\r\n      .set(x, y, 0.5)\r\n      .unproject(this.cuber.world.camera)\r\n      .sub(this.ray.origin)\r\n      .normalize();\r\n    this.ray.applyMatrix4(this.matrix.identity().getInverse(this.cuber.world.scene.matrix));\r\n    var result = new Vector3(Infinity, Infinity, Infinity);\r\n    this.ray.intersectPlane(plane, result);\r\n    return result;\r\n  }\r\n\r\n  handleDown() {\r\n    if (this.disable) {\r\n      return;\r\n    }\r\n    if (this.dragging || this.rotating) {\r\n      this.handleUp();\r\n    }\r\n    this.dragging = true;\r\n    this.holder.index = -1;\r\n    this.cuber.tweener.speedup();\r\n    let distance = 0;\r\n    this.planes.forEach(plane => {\r\n      var point = this.intersect(this.down, plane);\r\n      if (point !== null) {\r\n        var x = point.x / Cubelet.SIZE / 3;\r\n        var y = point.y / Cubelet.SIZE / 3;\r\n        var z = point.z / Cubelet.SIZE / 3;\r\n        if (Math.abs(x) <= 0.5 && Math.abs(y) <= 0.5 && Math.abs(z) <= 0.5) {\r\n          let d =\r\n            Math.pow(point.x - this.ray.origin.x, 2) +\r\n            Math.pow(point.y - this.ray.origin.y, 2) +\r\n            Math.pow(point.z - this.ray.origin.z, 2);\r\n          if (distance == 0 || d < distance) {\r\n            this.holder.plane = plane;\r\n            let order = this.cuber.world.cube.order;\r\n            x = Math.ceil((x + 0.5) * order) - 1;\r\n            y = Math.ceil((y + 0.5) * order) - 1;\r\n            z = Math.ceil((z + 0.5) * order) - 1;\r\n            this.holder.index = z * order * order + y * order + x;\r\n            distance = d;\r\n            return;\r\n          }\r\n        }\r\n      }\r\n      return;\r\n    }, this);\r\n  }\r\n\r\n  handleMove() {\r\n    if (this.disable) {\r\n      return;\r\n    }\r\n    if (this.dragging) {\r\n      var dx = this.move.x - this.down.x;\r\n      var dy = this.move.y - this.down.y;\r\n      var d = Math.sqrt(dx * dx + dy * dy);\r\n      if (Math.min(this.cuber.world.width, this.cuber.world.height) / d > 128) {\r\n        return true;\r\n      }\r\n      this.cuber.tweener.finish();\r\n      if (this.cuber.world.cube.lock) {\r\n        this.dragging = false;\r\n        this.rotating = false;\r\n        return true;\r\n      }\r\n      this.dragging = false;\r\n      this.rotating = true;\r\n      if (this.holder.index === -1) {\r\n        if (dx * dx > dy * dy) {\r\n          this.group = this.cuber.world.cube.groups.get(\"y\");\r\n        } else {\r\n          let vector = new Vector3((Cubelet.SIZE * 3) / 2, 0, (Cubelet.SIZE * 3) / 2);\r\n          vector.applyMatrix4(this.cuber.world.scene.matrix).project(this.cuber.world.camera);\r\n          let half = this.cuber.world.width / 2;\r\n          let x = Math.round(vector.x * half + half);\r\n          if (this.down.x < x) {\r\n            this.group = this.cuber.world.cube.groups.get(\"x\");\r\n          } else {\r\n            this.group = this.cuber.world.cube.groups.get(\"z\");\r\n          }\r\n        }\r\n      } else {\r\n        var start = this.intersect(this.down, this.holder.plane);\r\n        var end = this.intersect(this.move, this.holder.plane);\r\n        this.vector.subVectors(end, start);\r\n        var x = this.vector.x;\r\n        var y = this.vector.y;\r\n        var z = this.vector.z;\r\n        var max = Math.max(Math.abs(x), Math.abs(y), Math.abs(z));\r\n        x = Math.abs(x) === max ? x : 0;\r\n        y = Math.abs(y) === max ? y : 0;\r\n        z = Math.abs(z) === max ? z : 0;\r\n        this.vector.set(x, y, z);\r\n        this.holder.vector.copy(this.vector.multiply(this.vector).normalize());\r\n\r\n        this.group = this.match();\r\n        this.vector.crossVectors(this.holder.vector, this.holder.plane.normal);\r\n        this.holder.vector.multiplyScalar(this.vector.x + this.vector.y + this.vector.z);\r\n      }\r\n      this.group?.hold();\r\n    }\r\n    if (this.rotating && this.group) {\r\n      let scale = this.cuber.preferance.sensitivity / 50 - 1;\r\n      scale = 2 ** scale;\r\n      if (this.holder.index === -1) {\r\n        var dx = this.move.x - this.down.x;\r\n        var dy = this.move.y - this.down.y;\r\n        if (this.group === this.cuber.world.cube.groups.get(\"y\")) {\r\n          this.angle = (((dx / Cubelet.SIZE) * Math.PI) / 6) * scale;\r\n        } else if (this.group === this.cuber.world.cube.groups.get(\"x\")) {\r\n          this.angle = (((dy / Cubelet.SIZE) * Math.PI) / 6) * scale;\r\n        } else if (this.group === this.cuber.world.cube.groups.get(\"z\")) {\r\n          this.angle = (((-dy / Cubelet.SIZE) * Math.PI) / 6) * scale;\r\n        }\r\n      } else {\r\n        var start = this.intersect(this.down, this.holder.plane);\r\n        var end = this.intersect(this.move, this.holder.plane);\r\n        this.vector.subVectors(end, start).multiply(this.holder.vector);\r\n        this.angle =\r\n          ((((-(this.vector.x + this.vector.y + this.vector.z) *\r\n            (this.group.axis.x + this.group.axis.y + this.group.axis.z)) /\r\n            Cubelet.SIZE) *\r\n            Math.PI) /\r\n            6) *\r\n          scale;\r\n      }\r\n    }\r\n  }\r\n\r\n  handleUp() {\r\n    if (this.dragging) {\r\n      let face = null;\r\n      switch (this.holder.plane) {\r\n        case this.planes[0]:\r\n          face = FACE.R;\r\n          break;\r\n        case this.planes[1]:\r\n          face = FACE.U;\r\n          break;\r\n        case this.planes[2]:\r\n          face = FACE.F;\r\n          break;\r\n      }\r\n      for (let tap of this.taps) {\r\n        tap(this.holder.index, face);\r\n      }\r\n    }\r\n    if (this.rotating) {\r\n      if (this.group && this.group !== null) {\r\n        if (!this.lock) {\r\n          if (Math.abs(this.angle) < Math.PI / 4) {\r\n            let tick = new Date().getTime();\r\n            let speed = Math.abs(this.angle) / (tick - this.tick);\r\n            if (speed > 0.001) {\r\n              this.angle = this.angle == 0 ? 0 : ((this.angle / Math.abs(this.angle)) * Math.PI) / 2;\r\n            }\r\n          }\r\n          this.group.twist(this.angle);\r\n        } else {\r\n          this.group.twist(0);\r\n        }\r\n      }\r\n    }\r\n    this.holder.index = -1;\r\n    this.dragging = false;\r\n    this.rotating = false;\r\n    this.cuber.world.dirty = true;\r\n  }\r\n\r\n  tick: number = new Date().getTime();\r\n  hover: number = -1;\r\n  touch = (action: TouchAction) => {\r\n    switch (action.type) {\r\n      case \"touchstart\":\r\n      case \"mousedown\":\r\n        this.down.x = action.x;\r\n        this.down.y = action.y;\r\n        this.tick = new Date().getTime();\r\n        this.handleDown();\r\n        break;\r\n      case \"mousemove\":\r\n      case \"touchmove\":\r\n        this.move.x = action.x;\r\n        this.move.y = action.y;\r\n        this.handleMove();\r\n        break;\r\n      case \"touchend\":\r\n      case \"touchcancel\":\r\n      case \"mouseup\":\r\n      case \"mouseout\":\r\n        this.handleUp();\r\n        break;\r\n      default:\r\n        return false;\r\n    }\r\n    return true;\r\n  };\r\n}\r\n","import { GroupTable } from \"./group\";\r\nimport Cubelet from \"./cubelet\";\r\nimport { FACE, COLORS } from \"./define\";\r\nimport { Group, Euler } from \"three\";\r\nimport {Cuber} from '.';\r\n\r\nexport default class Cube extends Group {\r\n  public dirty: boolean = true;\r\n  public lock: boolean = false;\r\n  public cubelets: Cubelet[] = [];\r\n  public initials: Cubelet[] = [];\r\n  public groups: GroupTable;\r\n  public complete: boolean = false;\r\n  public order: number;\r\n  public cuber: Cuber;\r\n  public callback: Function;\r\n\r\n  constructor(order: number,cuber: Cuber, callback: Function) {\r\n    super();\r\n    this.order = order;\r\n    this.cuber = cuber;\r\n    this.callback = callback;\r\n    this.scale.set(3 / order, 3 / order, 3 / order);\r\n    for (var i = 0; i < order * order * order; i++) {\r\n      let cubelet = new Cubelet(order, i);\r\n      this.cubelets.push(cubelet);\r\n      this.initials.push(cubelet);\r\n      this.add(cubelet);\r\n    }\r\n    this.groups = new GroupTable(this);\r\n    this.matrixAutoUpdate = false;\r\n    this.updateMatrix();\r\n  }\r\n\r\n  update() {\r\n    let complete = [FACE.U, FACE.D, FACE.L, FACE.R, FACE.F, FACE.B].every(face => {\r\n      let group = this.groups.get(FACE[face]);\r\n      if (!group) {\r\n        throw Error();\r\n      }\r\n      let color = this.cubelets[group.indices[0]].getColor(face);\r\n      let same = group.indices.every(idx => {\r\n        return color == this.cubelets[idx].getColor(face);\r\n      });\r\n      return same;\r\n    });\r\n    this.complete = complete;\r\n    this.callback();\r\n  }\r\n\r\n  index(value: number) {\r\n    return this.initials[value].index;\r\n  }\r\n\r\n  reset() {\r\n    for (let cubelet of this.cubelets) {\r\n      cubelet.setRotationFromEuler(new Euler(0, 0, 0));\r\n      cubelet.index = cubelet.initial;\r\n      cubelet.updateMatrix();\r\n    }\r\n    this.cubelets.sort((left, right) => {\r\n      return left.index - right.index;\r\n    });\r\n  }\r\n\r\n  stick(index: number, face: number, color: string) {\r\n    let cubelet = this.initials[index];\r\n    if (!cubelet) {\r\n      throw Error(\"invalid cubelet index: \" + index);\r\n    }\r\n    cubelet.stick(face, color);\r\n    this.dirty = true;\r\n  }\r\n\r\n  strip(strip: { [face: string]: number[] | undefined }) {\r\n    for (const face of [FACE.L, FACE.R, FACE.D, FACE.U, FACE.B, FACE.F]) {\r\n      let key = FACE[face];\r\n      let group = this.groups.get(FACE[face]);\r\n      if (!group) {\r\n        throw Error();\r\n      }\r\n      for (const index of group.indices) {\r\n        this.initials[index].stick(face, \"\");\r\n      }\r\n      let indexes = strip[key];\r\n      if (indexes == undefined) {\r\n        continue;\r\n      }\r\n      for (const index of indexes) {\r\n        let cubelet = this.initials[index];\r\n        if (!cubelet) {\r\n          throw Error(\"invalid cubelet index: \" + index);\r\n        }\r\n        cubelet.stick(face, COLORS.BLACK);\r\n      }\r\n    }\r\n    this.dirty = true;\r\n  }\r\n\r\n  //                +------------+\r\n  //                | U1  U2  U3 |\r\n  //                |            |\r\n  //                | U4  U5  U6 |\r\n  //                |            |\r\n  //                | U7  U8  U9 |\r\n  //   +------------+------------+------------+------------+\r\n  //   | L1  L2  L3 | F1  F2  F3 | R1  R2  R3 | B1  B2  B3 |\r\n  //   |            |            |            |            |\r\n  //   | L4  L5  L6 | F4  F5  F6 | R4  R5  R6 | B4  B5  B6 |\r\n  //   |            |            |            |            |\r\n  //   | L7  L8  L9 | F7  F8  F9 | R7  R8  R9 | B7  B8  B9 |\r\n  //   +------------+------------+------------+------------+\r\n  //                | D1  D2  D3 |\r\n  //                |            |\r\n  //                | D4  D5  D6 |\r\n  //                |            |\r\n  //                | D7  D8  D9 |\r\n  //                +------------+\r\n  get state() {\r\n    let result = [];\r\n    for (let face of [FACE.U, FACE.R, FACE.F, FACE.D, FACE.L, FACE.B]) {\r\n      let group = this.groups.get(FACE[face]);\r\n      if (!group) {\r\n        throw Error();\r\n      }\r\n      for (let i of group.indices) {\r\n        result.push(this.cubelets[i].getColor(face));\r\n      }\r\n    }\r\n    return result.join(\"\");\r\n  }\r\n}\r\n","import {Cuber} from \".\";\r\nimport Cube from \"./cube\";\r\nimport Cubelet from \"./cubelet\";\r\nimport { Scene, PerspectiveCamera, AmbientLight, DirectionalLight } from \"three\";\r\n\r\nexport default class World {\r\n  public width: number = 1;\r\n  public height: number = 1;\r\n  public dirty: boolean = false;\r\n\r\n  public scene: Scene;\r\n  public camera: PerspectiveCamera;\r\n\r\n  public cube: Cube;\r\n  public cuber: Cuber;\r\n\r\n  public ambient: AmbientLight;\r\n  public directional: DirectionalLight;\r\n\r\n  private cubes: Cube[] = [];\r\n  public callbacks: Function[] = [];\r\n\r\n  set order(value: number) {\r\n    this.scene.remove(this.cube);\r\n    if (this.cubes[value] == undefined){\r\n      this.cubes[value] = new Cube(value, this.cuber, this.callback);\r\n    }\r\n    this.cube = this.cubes[value];\r\n    this.scene.add(this.cube);\r\n    this.dirty = true;\r\n  }\r\n\r\n  get order() {\r\n    return this.cube.order;\r\n  }\r\n\r\n  constructor(cuber: Cuber) {\r\n    this.cuber = cuber\r\n    this.scene = new Scene();\r\n    this.scene.rotation.x = Math.PI / 6;\r\n    this.scene.rotation.y = -Math.PI / 4 + Math.PI / 16;\r\n    this.order = 3;\r\n\r\n    this.ambient = new AmbientLight(0xffffff, 0.8);\r\n    this.scene.add(this.ambient);\r\n    this.directional = new DirectionalLight(0xffffff, 0.2);\r\n    this.directional.position.set(Cubelet.SIZE, Cubelet.SIZE * 4, Cubelet.SIZE * 2);\r\n    this.scene.add(this.directional);\r\n\r\n    this.camera = new PerspectiveCamera(50, 1, 1, Cubelet.SIZE * 32);\r\n    this.camera.position.x = 0;\r\n    this.camera.position.y = 0;\r\n    this.camera.position.z = 0;\r\n  }\r\n\r\n  callback = () => {\r\n    for (let callback of this.callbacks) {\r\n      callback();\r\n    }\r\n    this.cuber.twister.update();\r\n  };\r\n\r\n  resize() {\r\n    let scale = this.cuber.preferance.scale / 100 + 0.5;\r\n    let perspective = (100.1 / (this.cuber.preferance.perspective + 0.01)) * 4 - 3;\r\n    let min = this.height / Math.min(this.width, this.height) / scale / perspective;\r\n    let fov = (2 * Math.atan(min) * 180) / Math.PI;\r\n\r\n    this.camera.aspect = this.width / this.height;\r\n    this.camera.fov = fov;\r\n    let distance = Cubelet.SIZE * 3 * perspective;\r\n    this.camera.position.z = distance;\r\n    this.camera.near = distance - Cubelet.SIZE * 3;\r\n    this.camera.far = distance + Cubelet.SIZE * 3;\r\n    this.camera.lookAt(this.scene.position);\r\n    this.camera.updateProjectionMatrix();\r\n    this.dirty = true;\r\n  }\r\n}\r\n","import {Cuber} from \".\";\r\nimport { TwistAction } from \"./twister\";\r\n\r\nexport default class History {\r\n  list: TwistAction[] = [];\r\n  exp: string = \"\";\r\n  cuber: Cuber;\r\n  constructor(cuber: Cuber) {\r\n    this.cuber = cuber\r\n  }\r\n\r\n  record(action: TwistAction) {\r\n    if (this.list.length == 0) {\r\n      action.times = action.times % 4;\r\n      if (action.times != 0) {\r\n        this.list.push(action);\r\n        this.exp = this.exp + \" \" + action.value;\r\n      }\r\n    } else {\r\n      let last = this.list[this.list.length - 1];\r\n      if (last.exp == action.exp) {\r\n        last.times = last.times + action.times * (last.reverse == action.reverse ? 1 : -1);\r\n        last.times = last.times % 4;\r\n        this.exp = this.exp.substring(0, this.exp.lastIndexOf(\" \"));\r\n        if (last.times == 0) {\r\n          this.list.pop();\r\n        } else {\r\n          this.exp = this.exp + \" \" + last.value;\r\n        }\r\n      } else {\r\n        this.list.push(action);\r\n        this.exp = this.exp + \" \" + action.value;\r\n      }\r\n    }\r\n  }\r\n\r\n  clear() {\r\n    this.list = [];\r\n    this.exp = \"\";\r\n  }\r\n\r\n  get last() {\r\n    return this.list[this.list.length - 1];\r\n  }\r\n\r\n  get length() {\r\n    return this.list.length;\r\n  }\r\n\r\n  get moves() {\r\n    let length = this.length;\r\n    for (const twist of this.list) {\r\n      if (twist.exp == \"x\" || twist.exp == \"y\" || twist.exp == \"z\") {\r\n        length--;\r\n      }\r\n    }\r\n    return length;\r\n  }\r\n\r\n  undo() {\r\n    if (this.length == 0) {\r\n      return;\r\n    }\r\n    this.cuber.twister.finish();\r\n    if (this.length == 0) {\r\n      return;\r\n    }\r\n    let last = this.last;\r\n    let action = new TwistAction(last.exp, !last.reverse, last.times);\r\n    this.cuber.twister.push(action);\r\n  }\r\n}\r\n","import Tweener from \"./tweener\";\r\nimport Twister from \"./twister\";\r\nimport Preferance from \"./preferance\";\r\nimport Controller from \"./controller\";\r\n// import Capture from \"./capture\";\r\nimport World from \"./world\";\r\nimport History from \"./history\";\r\n\r\nexport class Cuber {\r\n  _context: Cuber\r\n  world: World;\r\n  tweener: Tweener;\r\n  twister: Twister;\r\n  history: History;\r\n  preferance: Preferance;\r\n  controller: Controller;\r\n  // capture: Capture;\r\n\r\n  constructor() {\r\n    this.world = new World(this);\r\n    this.tweener = new Tweener();\r\n    this.twister = new Twister(this);\r\n    this.history = new History(this);\r\n    this.preferance = new Preferance(this);\r\n    this.controller = new Controller(this);\r\n    // this.capture = new Capture();\r\n    this._context = this\r\n  }\r\n}\r\n\r\nlet cuber = new Cuber();\r\nexport default cuber;\r\n","export class TouchAction {\r\n  type: string;\r\n  x: number;\r\n  y: number;\r\n  constructor(type: string, x: number, y: number) {\r\n    this.type = type;\r\n    this.x = x;\r\n    this.y = y;\r\n  }\r\n}\r\n\r\nexport default class Toucher {\r\n  private offsetX = 0\r\n  private offsetY = 0\r\n  init(canvas: HTMLCanvasElement, callback: Function) {\r\n    this.canvas = canvas;\r\n    this.callback = callback;\r\n    canvas.addEventListener(\"touchstart\", this.touch);\r\n    canvas.addEventListener(\"touchmove\", this.touch);\r\n    canvas.addEventListener(\"touchend\", this.touch);\r\n    canvas.addEventListener(\"touchcancel\", this.touch);\r\n\r\n    canvas.addEventListener(\"mousedown\", this.mouse);\r\n    canvas.addEventListener(\"mousemove\", this.mouse);\r\n    canvas.addEventListener(\"mouseup\", this.mouse);\r\n    canvas.addEventListener(\"mouseout\", this.mouse);\r\n  }\r\n  canvas: HTMLCanvasElement;\r\n  callback: Function;\r\n\r\n  setoffset = (canvas: HTMLCanvasElement)=>{\r\n    // 不需要计算scroll值，只需要在scroll事件发生的时候重新计算一次即可\r\n    [this.offsetX,this.offsetY] =  [canvas.getBoundingClientRect().left,canvas.getBoundingClientRect().top]\r\n  }\r\n\r\n  mouse = (event: MouseEvent) => {\r\n    this.canvas.tabIndex = 1;\r\n    this.canvas.focus();\r\n    let action = new TouchAction(event.type, event.clientX-this.offsetX, event.clientY-this.offsetY);\r\n    this.callback(action);\r\n    event.returnValue = false;\r\n    return false;\r\n  };\r\n\r\n  touch = (event: TouchEvent) => {\r\n    this.canvas.tabIndex = 1;\r\n    this.canvas.focus();\r\n    let touches = event.changedTouches;\r\n    let first = touches[0];\r\n    let action = new TouchAction(event.type, first.clientX-this.offsetX, first.clientY-this.offsetY);\r\n    this.callback(action);\r\n    event.preventDefault();\r\n    return true;\r\n  };\r\n}\r\n","\r\nimport {Cuber} from '.'\r\nimport { WebGLRenderer } from 'three';\r\nimport Toucher from \"../common/toucher\";\r\nimport { COLORS } from '../cuber/define';\r\nimport Cube from './cube';\r\nimport { Pagecubes, RenderConfig } from './interface';\r\nconst CubeStageMask = require('./strip.json')\r\nexport default class CubeRenderer{\r\n    public renderer: WebGLRenderer;\r\n    public toucher: Toucher;\r\n    cubename: string;\r\n    cuber?: Cuber;\r\n    el?: HTMLDivElement;\r\n    canvas?: HTMLCanvasElement;\r\n    coverimg?: HTMLImageElement;\r\n    size?: number[];\r\n    action?: string\r\n    pagecubes?: Pagecubes = {};\r\n\r\n    constructor(){\r\n    }\r\n\r\n    // 实例化一个魔方，生成缩略图\r\n    addcube(renderconfig: RenderConfig,callback: Function){\r\n\r\n        this.cubename = renderconfig.cubename\r\n        this.cuber = new Cuber()\r\n        this.el = renderconfig.el\r\n        if(renderconfig.canvas){\r\n            this.canvas = renderconfig.canvas\r\n        }else{\r\n            this.canvas =  document.createElement('canvas')\r\n        }\r\n        // 设置模板\r\n        if(renderconfig.template){\r\n            try{\r\n                this.cuber.preferance.load(renderconfig.template) \r\n            } catch{\r\n                this.cuber.preferance.load('playground') \r\n            }\r\n        }\r\n        // 修改细节配置\r\n        if(renderconfig.preferance){\r\n            try{\r\n                for(let param in renderconfig.preferance){\r\n                    this.cuber.preferance[param] = renderconfig.preferance[param]\r\n                }\r\n            }catch{\r\n\r\n            }\r\n        }\r\n\r\n        // 创建renderer 和 toucher\r\n        this.canvas.style.outline = 'none'\r\n        this.renderer = new WebGLRenderer({\r\n            canvas : this.canvas,\r\n            antialias : true\r\n        })\r\n        this.renderer.autoClear = false\r\n        this.renderer.setClearColor(COLORS.BACKGROUND)\r\n        this.renderer.setPixelRatio(window.devicePixelRatio)\r\n\r\n        this.toucher = new Toucher()\r\n        this.toucher.init(this.canvas,this.cuber.controller.touch)\r\n        this.el.appendChild(this.renderer.domElement);\r\n        this.size = renderconfig.size ? renderconfig.size : [200,200]\r\n        this.resize(this.size[0],this.size[1])\r\n\r\n        if(this.cuber.preferance.order==3 && renderconfig.masktype){\r\n            const strip = CubeStageMask[renderconfig.masktype].strip\r\n            this.cuber.world.cube.strip(strip)\r\n        }\r\n\r\n        if(renderconfig.coverImgNotModel && renderconfig.alg){\r\n            this.cuber.twister.finish();\r\n            this.cuber.twister.twist(\"#\");\r\n            this.action = renderconfig.scene == \"^\" ? \"(\" + renderconfig.alg + \")'\" : renderconfig.alg\r\n            this.cuber.twister.twist(this.action, false, 1, true);\r\n            this.cuber.history.clear();\r\n        }\r\n        \r\n        // 绘制第一帧\r\n        this.draw()\r\n        // 根据渲染模型生成缩略图\r\n        const content = this.renderer.domElement.toDataURL(\"image/png\");\r\n\r\n\r\n        if(renderconfig.coverImgNotModel){\r\n            // 销毁和清除renderer\r\n            this.renderer.dispose()\r\n            this.renderer = null\r\n             // 删除canvas 添加图片标签\r\n            this.el.removeChild(this.canvas)\r\n            this.canvas = null\r\n            // this.canvas.style.display = 'none'\r\n            this.coverimg = document.createElement('img')\r\n            this.coverimg.style.objectFit = 'contain'\r\n            this.coverimg.style.width = this.size[0] + 'px'\r\n            this.coverimg.src = content\r\n            this.el.appendChild(this.coverimg)\r\n        }else{\r\n            this.setoffset()\r\n        }\r\n\r\n        // 保存cube实例数据\r\n        this.pagecubes[renderconfig.cubename] = {\r\n            cubename: renderconfig.cubename,\r\n            cuber: this.cuber,\r\n            el: this.el,\r\n            canvas: this.canvas,\r\n            size: this.size,\r\n            coverimg: this.coverimg,\r\n            toucher: this.toucher,\r\n            config: renderconfig\r\n        }\r\n\r\n        callback()\r\n    }\r\n\r\n    // 没有传参，表示直接用上文中的renderer，有传参就装载\r\n    refreshCoverImage(cubename?: string){\r\n        this.bind({cubename : cubename})\r\n        this.unbind(cubename)\r\n    }\r\n\r\n    // 绑定并激活魔方，如果封面是图片就改为canvas，最后修正偏移\r\n    bind(cube: {cubename?:string ,cuber?: Cuber, el?: HTMLDivElement, size?: number[]}){\r\n        if(this.pagecubes[cube.cubename]){\r\n            this.cubename = cube.cubename\r\n            this.cuber = this.pagecubes[cube.cubename].cuber\r\n            this.el = this.pagecubes[cube.cubename].el\r\n            this.canvas = this.pagecubes[cube.cubename].canvas\r\n            this.size = this.pagecubes[cube.cubename].size\r\n            this.coverimg = this.pagecubes[cube.cubename].coverimg\r\n            this.toucher = this.pagecubes[cube.cubename].toucher\r\n        }else{\r\n            null\r\n            // 扩展给新建的实例对象\r\n        }\r\n\r\n        if(this.canvas){\r\n            this.renderer = new WebGLRenderer({\r\n                canvas : this.canvas,\r\n                antialias : true\r\n            })\r\n            this.renderer.autoClear = false\r\n            this.renderer.setClearColor(COLORS.BACKGROUND)\r\n            this.renderer.setPixelRatio(window.devicePixelRatio)\r\n            this.renderer.setPixelRatio(window.devicePixelRatio)\r\n        }else{\r\n            this.canvas =  document.createElement('canvas')\r\n            this.canvas.style.outline = 'none'\r\n            this.coverimg.style.display = 'none'\r\n            this.renderer = new WebGLRenderer({\r\n                canvas : this.canvas,\r\n                antialias : true\r\n            })\r\n            this.renderer.autoClear = false\r\n            this.renderer.setClearColor(COLORS.BACKGROUND)\r\n            this.renderer.setPixelRatio(window.devicePixelRatio)\r\n            this.renderer.setPixelRatio(window.devicePixelRatio)\r\n            this.el.appendChild(this.renderer.domElement);\r\n            // 保存canvas信息\r\n            this.pagecubes[cube.cubename].canvas = this.canvas\r\n            this.resize(this.size[0],this.size[1])\r\n            this.toucher = new Toucher()\r\n            this.toucher.init(this.canvas,this.cuber.controller.touch)\r\n        }\r\n        this.draw()\r\n        this.setoffset(this.canvas)\r\n        \r\n    }\r\n\r\n    // 解绑魔方\r\n    unbind(cubename?:string ){\r\n        // 只有首屏图片模式需要unbind\r\n        if(this.pagecubes[cubename] && this.pagecubes[cubename].config.coverImgNotModel){\r\n\r\n            // 因为刚从bind进入，所有各种资源都还没有释放\r\n            this.draw()\r\n            // 根据渲染模型生成缩略图\r\n            const content = this.renderer.domElement.toDataURL(\"image/png\");\r\n\r\n            // 销毁和清除renderer\r\n            this.renderer.dispose()\r\n            this.renderer = null\r\n\r\n            // 删除canvas 添加图片标签\r\n            this.el.removeChild(this.canvas)\r\n            this.canvas = null\r\n            // 修改图片属性\r\n            this.coverimg.style.display = ''\r\n            this.coverimg.style.objectFit = 'contain'\r\n            this.coverimg.src = content\r\n            \r\n            // 更新 cube实例信息\r\n            this.pagecubes[cubename].canvas = null\r\n            this.pagecubes[cubename].coverimg = this.coverimg\r\n        }\r\n\r\n    }\r\n\r\n    resize(width: number, height: number) {\r\n        this.cuber.world.width = width;\r\n        this.cuber.world.height = height;\r\n        this.cuber.world.resize();\r\n        this.renderer.setSize(width, height, true);\r\n        this.cuber.world.dirty = true;\r\n    }\r\n\r\n    setoffset(canvas: HTMLCanvasElement = this.canvas){\r\n        this.toucher.setoffset(canvas)\r\n    }\r\n\r\n    draw() {\r\n        if (this.cuber.world.dirty || this.cuber.world.cube.dirty) {\r\n            this.renderer.clear();\r\n            this.renderer.render(this.cuber.world.scene, this.cuber.world.camera);\r\n            this.cuber.world.dirty = false;\r\n            this.cuber.world.cube.dirty = false;\r\n            return true;\r\n        }\r\n            return false;\r\n        \r\n    }\r\n}\r\n\r\n\r\n\r\n","import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\nimport store from './store'\r\nimport vuetify from './plugins/vuetify';\r\nimport axios from 'axios'\r\n// import moduleName from './plugins/visualcube/Player/index';\r\nimport CubeRenderer from './plugins/cubestack/cuber/renderer'\r\n\r\nVue.config.productionTip = false\r\nVue.prototype.$cuberender = new CubeRenderer()\r\nVue.prototype.vuetify = vuetify\r\n\r\nVue.prototype.$http = axios.create({\r\n  // baseURL : 'http://localhost:3000'\r\n  baseURL : 'https://solarsunrise.cn/api/cubenode/'\r\n  // baseURL : 'http://192.168.1.6:3000'\r\n})\r\n\r\n\r\nlet vm = new Vue({\r\n  router,\r\n  store,\r\n  vuetify,\r\n  render: h => h(App)\r\n}).$mount('#app')\r\nexport default vm;","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}